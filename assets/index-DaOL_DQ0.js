var jA=Object.defineProperty;var RA=(t,e,n)=>e in t?jA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ty=(t,e,n)=>RA(t,typeof e!="symbol"?e+"":e,n);function MA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hb={exports:{}},Qu={},fb={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),IA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),OA=Symbol.for("react.strict_mode"),DA=Symbol.for("react.profiler"),$A=Symbol.for("react.provider"),zA=Symbol.for("react.context"),FA=Symbol.for("react.forward_ref"),BA=Symbol.for("react.suspense"),VA=Symbol.for("react.memo"),UA=Symbol.for("react.lazy"),ny=Symbol.iterator;function HA(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mb=Object.assign,gb={};function Io(t,e,n){this.props=t,this.context=e,this.refs=gb,this.updater=n||pb}Io.prototype.isReactComponent={};Io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vb(){}vb.prototype=Io.prototype;function Pm(t,e,n){this.props=t,this.context=e,this.refs=gb,this.updater=n||pb}var jm=Pm.prototype=new vb;jm.constructor=Pm;mb(jm,Io.prototype);jm.isPureReactComponent=!0;var ry=Array.isArray,yb=Object.prototype.hasOwnProperty,Rm={current:null},xb={key:!0,ref:!0,__self:!0,__source:!0};function wb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yb.call(e,r)&&!xb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Al,type:t,key:s,ref:o,props:i,_owner:Rm.current}}function WA(t,e){return{$$typeof:Al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function qA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qA(""+t.key):e.toString(36)}function Mc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Al:case IA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dh(o,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Mc(i,e,n,"",function(c){return c})):i!=null&&(Mm(i)&&(i=WA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+dh(s,a);o+=Mc(s,e,n,l,i)}else if(l=HA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+dh(s,a++),o+=Mc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,n){if(t==null)return t;var r=[],i=0;return Mc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function YA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Ic={transition:null},KA={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:Rm};function bb(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Mm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=Io;Ne.Fragment=LA;Ne.Profiler=DA;Ne.PureComponent=Pm;Ne.StrictMode=OA;Ne.Suspense=BA;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KA;Ne.act=bb;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yb.call(e,l)&&!xb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Al,type:t.type,key:i,ref:s,props:r,_owner:o}};Ne.createContext=function(t){return t={$$typeof:zA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$A,_context:t},t.Consumer=t};Ne.createElement=wb;Ne.createFactory=function(t){var e=wb.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:FA,render:t}};Ne.isValidElement=Mm;Ne.lazy=function(t){return{$$typeof:UA,_payload:{_status:-1,_result:t},_init:YA}};Ne.memo=function(t,e){return{$$typeof:VA,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=Ic.transition;Ic.transition={};try{t()}finally{Ic.transition=e}};Ne.unstable_act=bb;Ne.useCallback=function(t,e){return $t.current.useCallback(t,e)};Ne.useContext=function(t){return $t.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return $t.current.useEffect(t,e)};Ne.useId=function(){return $t.current.useId()};Ne.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return $t.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};Ne.useRef=function(t){return $t.current.useRef(t)};Ne.useState=function(t){return $t.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return $t.current.useTransition()};Ne.version="18.3.1";fb.exports=Ne;var y=fb.exports;const Oe=pn(y),Sb=MA({__proto__:null,default:Oe},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GA=y,ZA=Symbol.for("react.element"),XA=Symbol.for("react.fragment"),QA=Object.prototype.hasOwnProperty,JA=GA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eP={key:!0,ref:!0,__self:!0,__source:!0};function kb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QA.call(e,r)&&!eP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ZA,type:t,key:s,ref:o,props:i,_owner:JA.current}}Qu.Fragment=XA;Qu.jsx=kb;Qu.jsxs=kb;hb.exports=Qu;var d=hb.exports,Of={},Cb={exports:{}},mn={},Eb={exports:{}},Nb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,O){var N=T.length;T.push(O);e:for(;0<N;){var B=N-1>>>1,Q=T[B];if(0<i(Q,O))T[B]=O,T[N]=Q,N=B;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var O=T[0],N=T.pop();if(N!==O){T[0]=N;e:for(var B=0,Q=T.length,A=Q>>>1;B<A;){var J=2*(B+1)-1,le=T[J],ce=J+1,X=T[ce];if(0>i(le,N))ce<Q&&0>i(X,le)?(T[B]=X,T[ce]=N,B=ce):(T[B]=le,T[J]=N,B=J);else if(ce<Q&&0>i(X,N))T[B]=X,T[ce]=N,B=ce;else break e}}return O}function i(T,O){var N=T.sortIndex-O.sortIndex;return N!==0?N:T.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=T)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function S(T){if(m=!1,b(T),!g)if(n(l)!==null)g=!0,D(E);else{var O=n(c);O!==null&&F(S,O.startTime-T)}}function E(T,O){g=!1,m&&(m=!1,v(P),P=-1),p=!0;var N=f;try{for(b(O),h=n(l);h!==null&&(!(h.expirationTime>O)||T&&!M());){var B=h.callback;if(typeof B=="function"){h.callback=null,f=h.priorityLevel;var Q=B(h.expirationTime<=O);O=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(l)&&r(l),b(O)}else r(l);h=n(l)}if(h!==null)var A=!0;else{var J=n(c);J!==null&&F(S,J.startTime-O),A=!1}return A}finally{h=null,f=N,p=!1}}var C=!1,_=null,P=-1,L=5,j=-1;function M(){return!(t.unstable_now()-j<L)}function z(){if(_!==null){var T=t.unstable_now();j=T;var O=!0;try{O=_(!0,T)}finally{O?R():(C=!1,_=null)}}else C=!1}var R;if(typeof x=="function")R=function(){x(z)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,$=I.port2;I.port1.onmessage=z,R=function(){$.postMessage(null)}}else R=function(){w(z,0)};function D(T){_=T,C||(C=!0,R())}function F(T,O){P=w(function(){T(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(E))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var N=f;f=O;try{return T()}finally{f=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,O){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var N=f;f=T;try{return O()}finally{f=N}},t.unstable_scheduleCallback=function(T,O,N){var B=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?B+N:B):N=B,T){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=N+Q,T={id:u++,callback:O,priorityLevel:T,startTime:N,expirationTime:Q,sortIndex:-1},N>B?(T.sortIndex=N,e(c,T),n(l)===null&&T===n(c)&&(m?(v(P),P=-1):m=!0,F(S,N-B))):(T.sortIndex=Q,e(l,T),g||p||(g=!0,D(E))),T},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(T){var O=f;return function(){var N=f;f=O;try{return T.apply(this,arguments)}finally{f=N}}}})(Nb);Eb.exports=Nb;var tP=Eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP=y,fn=tP;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _b=new Set,Fa={};function fs(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(Fa[t]=e,t=0;t<e.length;t++)_b.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,rP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sy={},oy={};function iP(t){return Df.call(oy,t)?!0:Df.call(sy,t)?!1:rP.test(t)?oy[t]=!0:(sy[t]=!0,!1)}function sP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oP(t,e,n,r){if(e===null||typeof e>"u"||sP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Im=/[\-:]([a-z])/g;function Lm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Im,Lm);bt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Im,Lm);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Im,Lm);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Om(t,e,n,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oP(e,n,i,r)&&(n=null),r||i===null?iP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zr=nP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gl=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),Dm=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),Ab=Symbol.for("react.context"),$m=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Ff=Symbol.for("react.suspense_list"),zm=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),Pb=Symbol.for("react.offscreen"),ay=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,hh;function da(t){if(hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hh=e&&e[1]||""}return`
`+hh+t}var fh=!1;function ph(t,e){if(!t||fh)return"";fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?da(t):""}function aP(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=ph(t.type,!1),t;case 11:return t=ph(t.type.render,!1),t;case 1:return t=ph(t.type,!0),t;default:return""}}function Bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Is:return"Portal";case $f:return"Profiler";case Dm:return"StrictMode";case zf:return"Suspense";case Ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ab:return(t.displayName||"Context")+".Consumer";case Tb:return(t._context.displayName||"Context")+".Provider";case $m:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zm:return e=t.displayName||null,e!==null?e:Bf(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return Bf(t(e))}catch{}}return null}function lP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(e);case 8:return e===Dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cP(t){var e=jb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zl(t){t._valueTracker||(t._valueTracker=cP(t))}function Rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mb(t,e){e=e.checked,e!=null&&Om(t,"checked",e,!1)}function Uf(t,e){Mb(t,e);var n=yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hf(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hf(t,e,n){(e!=="number"||tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ha=Array.isArray;function Zs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(ha(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function Ib(t,e){var n=yi(e.value),r=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xl,Ob=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uP=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(t){uP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ba[e]=ba[t]})});function Db(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ba.hasOwnProperty(t)&&ba[t]?(""+e).trim():e+"px"}function $b(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Db(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dP=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(t,e){if(e){if(dP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Kf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zf=null,Xs=null,Qs=null;function hy(t){if(t=Rl(t)){if(typeof Zf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=rd(e),Zf(t.stateNode,t.type,e))}}function zb(t){Xs?Qs?Qs.push(t):Qs=[t]:Xs=t}function Fb(){if(Xs){var t=Xs,e=Qs;if(Qs=Xs=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function Bb(t,e){return t(e)}function Vb(){}var mh=!1;function Ub(t,e,n){if(mh)return t(e,n);mh=!0;try{return Bb(t,e,n)}finally{mh=!1,(Xs!==null||Qs!==null)&&(Vb(),Fb())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Xf=!1;if(Rr)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){Xf=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{Xf=!1}function hP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Sa=!1,nu=null,ru=!1,Qf=null,fP={onError:function(t){Sa=!0,nu=t}};function pP(t,e,n,r,i,s,o,a,l){Sa=!1,nu=null,hP.apply(fP,arguments)}function mP(t,e,n,r,i,s,o,a,l){if(pP.apply(this,arguments),Sa){if(Sa){var c=nu;Sa=!1,nu=null}else throw Error(G(198));ru||(ru=!0,Qf=c)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(ps(t)!==t)throw Error(G(188))}function gP(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fy(i),t;if(s===r)return fy(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Wb(t){return t=gP(t),t!==null?qb(t):null}function qb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qb(t);if(e!==null)return e;t=t.sibling}return null}var Yb=fn.unstable_scheduleCallback,py=fn.unstable_cancelCallback,vP=fn.unstable_shouldYield,yP=fn.unstable_requestPaint,nt=fn.unstable_now,xP=fn.unstable_getCurrentPriorityLevel,Bm=fn.unstable_ImmediatePriority,Kb=fn.unstable_UserBlockingPriority,iu=fn.unstable_NormalPriority,wP=fn.unstable_LowPriority,Gb=fn.unstable_IdlePriority,Ju=null,ir=null;function bP(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Ju,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:CP,SP=Math.log,kP=Math.LN2;function CP(t){return t>>>=0,t===0?32:31-(SP(t)/kP|0)|0}var Ql=64,Jl=4194304;function fa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function su(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=fa(a):(s&=o,s!==0&&(r=fa(s)))}else o=n&~i,o!==0?r=fa(o):s!==0&&(r=fa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),i=1<<n,r|=t[n],e&=~i;return r}function EP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ln(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=EP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zb(){var t=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),t}function gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function _P(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ln(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Xb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qb,Um,Jb,e1,t1,ep=!1,ec=[],ai=null,li=null,ci=null,Ua=new Map,Ha=new Map,ei=[],TP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(e.pointerId)}}function Xo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Rl(e),e!==null&&Um(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AP(t,e,n,r,i){switch(e){case"focusin":return ai=Xo(ai,t,e,n,r,i),!0;case"dragenter":return li=Xo(li,t,e,n,r,i),!0;case"mouseover":return ci=Xo(ci,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ua.set(s,Xo(Ua.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ha.set(s,Xo(Ha.get(s)||null,t,e,n,r,i)),!0}return!1}function n1(t){var e=Bi(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=Hb(n),e!==null){t.blockedOn=e,t1(t.priority,function(){Jb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gf=r,n.target.dispatchEvent(r),Gf=null}else return e=Rl(n),e!==null&&Um(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){Lc(t)&&n.delete(e)}function PP(){ep=!1,ai!==null&&Lc(ai)&&(ai=null),li!==null&&Lc(li)&&(li=null),ci!==null&&Lc(ci)&&(ci=null),Ua.forEach(gy),Ha.forEach(gy)}function Qo(t,e){t.blockedOn===e&&(t.blockedOn=null,ep||(ep=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,PP)))}function Wa(t){function e(i){return Qo(i,t)}if(0<ec.length){Qo(ec[0],t);for(var n=1;n<ec.length;n++){var r=ec[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ai!==null&&Qo(ai,t),li!==null&&Qo(li,t),ci!==null&&Qo(ci,t),Ua.forEach(e),Ha.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)n1(n),n.blockedOn===null&&ei.shift()}var Js=zr.ReactCurrentBatchConfig,ou=!0;function jP(t,e,n,r){var i=Ie,s=Js.transition;Js.transition=null;try{Ie=1,Hm(t,e,n,r)}finally{Ie=i,Js.transition=s}}function RP(t,e,n,r){var i=Ie,s=Js.transition;Js.transition=null;try{Ie=4,Hm(t,e,n,r)}finally{Ie=i,Js.transition=s}}function Hm(t,e,n,r){if(ou){var i=tp(t,e,n,r);if(i===null)Nh(t,e,r,au,n),my(t,r);else if(AP(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<TP.indexOf(t)){for(;i!==null;){var s=Rl(i);if(s!==null&&Qb(s),s=tp(t,e,n,r),s===null&&Nh(t,e,r,au,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nh(t,e,r,null,n)}}var au=null;function tp(t,e,n,r){if(au=null,t=Fm(r),t=Bi(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return au=t,null}function r1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xP()){case Bm:return 1;case Kb:return 4;case iu:case wP:return 16;case Gb:return 536870912;default:return 16}default:return 16}}var ri=null,Wm=null,Oc=null;function i1(){if(Oc)return Oc;var t,e=Wm,n=e.length,r,i="value"in ri?ri.value:ri.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Oc=i.slice(t,1<r?1-r:void 0)}function Dc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function vy(){return!1}function gn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tc:vy,this.isPropagationStopped=vy,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=gn(Lo),jl=Qe({},Lo,{view:0,detail:0}),MP=gn(jl),vh,yh,Jo,ed=Qe({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(vh=t.screenX-Jo.screenX,yh=t.screenY-Jo.screenY):yh=vh=0,Jo=t),vh)},movementY:function(t){return"movementY"in t?t.movementY:yh}}),yy=gn(ed),IP=Qe({},ed,{dataTransfer:0}),LP=gn(IP),OP=Qe({},jl,{relatedTarget:0}),xh=gn(OP),DP=Qe({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),$P=gn(DP),zP=Qe({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FP=gn(zP),BP=Qe({},Lo,{data:0}),xy=gn(BP),VP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HP[t])?!!e[t]:!1}function Ym(){return WP}var qP=Qe({},jl,{key:function(t){if(t.key){var e=VP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ym,charCode:function(t){return t.type==="keypress"?Dc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YP=gn(qP),KP=Qe({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=gn(KP),GP=Qe({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ym}),ZP=gn(GP),XP=Qe({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),QP=gn(XP),JP=Qe({},ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e2=gn(JP),t2=[9,13,27,32],Km=Rr&&"CompositionEvent"in window,ka=null;Rr&&"documentMode"in document&&(ka=document.documentMode);var n2=Rr&&"TextEvent"in window&&!ka,s1=Rr&&(!Km||ka&&8<ka&&11>=ka),by=" ",Sy=!1;function o1(t,e){switch(t){case"keyup":return t2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function r2(t,e){switch(t){case"compositionend":return a1(e);case"keypress":return e.which!==32?null:(Sy=!0,by);case"textInput":return t=e.data,t===by&&Sy?null:t;default:return null}}function i2(t,e){if(Os)return t==="compositionend"||!Km&&o1(t,e)?(t=i1(),Oc=Wm=ri=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return s1&&e.locale!=="ko"?null:e.data;default:return null}}var s2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!s2[t.type]:e==="textarea"}function l1(t,e,n,r){zb(r),e=lu(e,"onChange"),0<e.length&&(n=new qm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ca=null,qa=null;function o2(t){x1(t,0)}function td(t){var e=zs(t);if(Rb(e))return t}function a2(t,e){if(t==="change")return e}var c1=!1;if(Rr){var wh;if(Rr){var bh="oninput"in document;if(!bh){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),bh=typeof Cy.oninput=="function"}wh=bh}else wh=!1;c1=wh&&(!document.documentMode||9<document.documentMode)}function Ey(){Ca&&(Ca.detachEvent("onpropertychange",u1),qa=Ca=null)}function u1(t){if(t.propertyName==="value"&&td(qa)){var e=[];l1(e,qa,t,Fm(t)),Ub(o2,e)}}function l2(t,e,n){t==="focusin"?(Ey(),Ca=e,qa=n,Ca.attachEvent("onpropertychange",u1)):t==="focusout"&&Ey()}function c2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return td(qa)}function u2(t,e){if(t==="click")return td(e)}function d2(t,e){if(t==="input"||t==="change")return td(e)}function h2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:h2;function Ya(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Df.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _y(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function d1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h1(){for(var t=window,e=tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tu(t.document)}return e}function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f2(t){var e=h1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d1(n.ownerDocument.documentElement,n)){if(r!==null&&Gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_y(n,s);var o=_y(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p2=Rr&&"documentMode"in document&&11>=document.documentMode,Ds=null,np=null,Ea=null,rp=!1;function Ty(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rp||Ds==null||Ds!==tu(r)||(r=Ds,"selectionStart"in r&&Gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Ya(Ea,r)||(Ea=r,r=lu(np,"onSelect"),0<r.length&&(e=new qm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function nc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Sh={},f1={};Rr&&(f1=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function nd(t){if(Sh[t])return Sh[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f1)return Sh[t]=e[n];return t}var p1=nd("animationend"),m1=nd("animationiteration"),g1=nd("animationstart"),v1=nd("transitionend"),y1=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){y1.set(t,e),fs(e,[t])}for(var kh=0;kh<Ay.length;kh++){var Ch=Ay[kh],m2=Ch.toLowerCase(),g2=Ch[0].toUpperCase()+Ch.slice(1);Ai(m2,"on"+g2)}Ai(p1,"onAnimationEnd");Ai(m1,"onAnimationIteration");Ai(g1,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(v1,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v2=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mP(r,e,void 0,t),t.currentTarget=null}function x1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Py(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Py(i,a,c),s=l}}}if(ru)throw t=Qf,ru=!1,Qf=null,t}function He(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var r=t+"__bubble";n.has(r)||(w1(e,t,2,!1),n.add(r))}function Eh(t,e,n){var r=0;e&&(r|=4),w1(n,t,r,e)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Ka(t){if(!t[rc]){t[rc]=!0,_b.forEach(function(n){n!=="selectionchange"&&(v2.has(n)||Eh(n,!1,t),Eh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rc]||(e[rc]=!0,Eh("selectionchange",!1,e))}}function w1(t,e,n,r){switch(r1(e)){case 1:var i=jP;break;case 4:i=RP;break;default:i=Hm}n=i.bind(null,e,n,t),i=void 0,!Xf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ub(function(){var c=s,u=Fm(n),h=[];e:{var f=y1.get(t);if(f!==void 0){var p=qm,g=t;switch(t){case"keypress":if(Dc(n)===0)break e;case"keydown":case"keyup":p=YP;break;case"focusin":g="focus",p=xh;break;case"focusout":g="blur",p=xh;break;case"beforeblur":case"afterblur":p=xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=LP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ZP;break;case p1:case m1:case g1:p=$P;break;case v1:p=QP;break;case"scroll":p=MP;break;case"wheel":p=e2;break;case"copy":case"cut":case"paste":p=FP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wy}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Va(x,v),S!=null&&m.push(Ga(x,S,b)))),w)break;x=x.return}0<m.length&&(f=new p(f,g,null,n,u),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Gf&&(g=n.relatedTarget||n.fromElement)&&(Bi(g)||g[Mr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Bi(g):null,g!==null&&(w=ps(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=yy,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=wy,S="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:zs(p),b=g==null?f:zs(g),f=new m(S,x+"leave",p,n,u),f.target=w,f.relatedTarget=b,S=null,Bi(u)===c&&(m=new m(v,x+"enter",g,n,u),m.target=b,m.relatedTarget=w,S=m),w=S,p&&g)t:{for(m=p,v=g,x=0,b=m;b;b=Ss(b))x++;for(b=0,S=v;S;S=Ss(S))b++;for(;0<x-b;)m=Ss(m),x--;for(;0<b-x;)v=Ss(v),b--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ss(m),v=Ss(v)}m=null}else m=null;p!==null&&jy(h,f,p,m,!1),g!==null&&w!==null&&jy(h,w,g,m,!0)}}e:{if(f=c?zs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=a2;else if(ky(f))if(c1)E=d2;else{E=c2;var C=l2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=u2);if(E&&(E=E(t,c))){l1(h,E,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Hf(f,"number",f.value)}switch(C=c?zs(c):window,t){case"focusin":(ky(C)||C.contentEditable==="true")&&(Ds=C,np=c,Ea=null);break;case"focusout":Ea=np=Ds=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,Ty(h,n,u);break;case"selectionchange":if(p2)break;case"keydown":case"keyup":Ty(h,n,u)}var _;if(Km)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Os?o1(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(s1&&n.locale!=="ko"&&(Os||P!=="onCompositionStart"?P==="onCompositionEnd"&&Os&&(_=i1()):(ri=u,Wm="value"in ri?ri.value:ri.textContent,Os=!0)),C=lu(c,P),0<C.length&&(P=new xy(P,t,null,n,u),h.push({event:P,listeners:C}),_?P.data=_:(_=a1(n),_!==null&&(P.data=_)))),(_=n2?r2(t,n):i2(t,n))&&(c=lu(c,"onBeforeInput"),0<c.length&&(u=new xy("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=_))}x1(h,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Va(t,n),s!=null&&r.unshift(Ga(t,s,i)),s=Va(t,e),s!=null&&r.push(Ga(t,s,i))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Va(n,s),l!=null&&o.unshift(Ga(n,l,a))):i||(l=Va(n,s),l!=null&&o.push(Ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var y2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(y2,`
`).replace(x2,"")}function ic(t,e,n){if(e=Ry(e),Ry(t)!==e&&n)throw Error(G(425))}function cu(){}var ip=null,sp=null;function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,w2=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,b2=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(S2)}:ap;function S2(t){setTimeout(function(){throw t})}function _h(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wa(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Oo,Za="__reactProps$"+Oo,Mr="__reactContainer$"+Oo,lp="__reactEvents$"+Oo,k2="__reactListeners$"+Oo,C2="__reactHandles$"+Oo;function Bi(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iy(t);t!==null;){if(n=t[Jn])return n;t=Iy(t)}return e}t=n,n=t.parentNode}return null}function Rl(t){return t=t[Jn]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function rd(t){return t[Za]||null}var cp=[],Fs=-1;function Pi(t){return{current:t}}function qe(t){0>Fs||(t.current=cp[Fs],cp[Fs]=null,Fs--)}function ze(t,e){Fs++,cp[Fs]=t.current,t.current=e}var xi={},At=Pi(xi),Wt=Pi(!1),Zi=xi;function vo(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qt(t){return t=t.childContextTypes,t!=null}function uu(){qe(Wt),qe(At)}function Ly(t,e,n){if(At.current!==xi)throw Error(G(168));ze(At,e),ze(Wt,n)}function b1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,lP(t)||"Unknown",i));return Qe({},n,r)}function du(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,Zi=At.current,ze(At,t),ze(Wt,Wt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=b1(t,e,Zi),r.__reactInternalMemoizedMergedChildContext=t,qe(Wt),qe(At),ze(At,t)):qe(Wt),ze(Wt,n)}var Er=null,id=!1,Th=!1;function S1(t){Er===null?Er=[t]:Er.push(t)}function E2(t){id=!0,S1(t)}function ji(){if(!Th&&Er!==null){Th=!0;var t=0,e=Ie;try{var n=Er;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Er=null,id=!1}catch(i){throw Er!==null&&(Er=Er.slice(t+1)),Yb(Bm,ji),i}finally{Ie=e,Th=!1}}return null}var Bs=[],Vs=0,hu=null,fu=0,xn=[],wn=0,Xi=null,_r=1,Tr="";function Di(t,e){Bs[Vs++]=fu,Bs[Vs++]=hu,hu=t,fu=e}function k1(t,e,n){xn[wn++]=_r,xn[wn++]=Tr,xn[wn++]=Xi,Xi=t;var r=_r;t=Tr;var i=32-Ln(r)-1;r&=~(1<<i),n+=1;var s=32-Ln(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_r=1<<32-Ln(e)+i|n<<i|r,Tr=s+t}else _r=1<<s|n<<i|r,Tr=t}function Zm(t){t.return!==null&&(Di(t,1),k1(t,1,0))}function Xm(t){for(;t===hu;)hu=Bs[--Vs],Bs[Vs]=null,fu=Bs[--Vs],Bs[Vs]=null;for(;t===Xi;)Xi=xn[--wn],xn[wn]=null,Tr=xn[--wn],xn[wn]=null,_r=xn[--wn],xn[wn]=null}var ln=null,sn=null,Ye=!1,Mn=null;function C1(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,sn=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:_r,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,sn=null,!0):!1;default:return!1}}function up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dp(t){if(Ye){var e=sn;if(e){var n=e;if(!Dy(t,e)){if(up(t))throw Error(G(418));e=ui(n.nextSibling);var r=ln;e&&Dy(t,e)?C1(r,n):(t.flags=t.flags&-4097|2,Ye=!1,ln=t)}}else{if(up(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ye=!1,ln=t}}}function $y(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function sc(t){if(t!==ln)return!1;if(!Ye)return $y(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!op(t.type,t.memoizedProps)),e&&(e=sn)){if(up(t))throw E1(),Error(G(418));for(;e;)C1(t,e),e=ui(e.nextSibling)}if($y(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=ln?ui(t.stateNode.nextSibling):null;return!0}function E1(){for(var t=sn;t;)t=ui(t.nextSibling)}function yo(){sn=ln=null,Ye=!1}function Qm(t){Mn===null?Mn=[t]:Mn.push(t)}var N2=zr.ReactCurrentBatchConfig;function ea(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function oc(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zy(t){var e=t._init;return e(t._payload)}function N1(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=pi(v,x),v.index=0,v.sibling=null,v}function s(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,S){return x===null||x.tag!==6?(x=Lh(b,v.mode,S),x.return=v,x):(x=i(x,b),x.return=v,x)}function l(v,x,b,S){var E=b.type;return E===Ls?u(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Qr&&zy(E)===x.type)?(S=i(x,b.props),S.ref=ea(v,x,b),S.return=v,S):(S=Hc(b.type,b.key,b.props,null,v.mode,S),S.ref=ea(v,x,b),S.return=v,S)}function c(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Oh(b,v.mode,S),x.return=v,x):(x=i(x,b.children||[]),x.return=v,x)}function u(v,x,b,S,E){return x===null||x.tag!==7?(x=qi(b,v.mode,S,E),x.return=v,x):(x=i(x,b),x.return=v,x)}function h(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Lh(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gl:return b=Hc(x.type,x.key,x.props,null,v.mode,b),b.ref=ea(v,null,x),b.return=v,b;case Is:return x=Oh(x,v.mode,b),x.return=v,x;case Qr:var S=x._init;return h(v,S(x._payload),b)}if(ha(x)||Go(x))return x=qi(x,v.mode,b,null),x.return=v,x;oc(v,x)}return null}function f(v,x,b,S){var E=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gl:return b.key===E?l(v,x,b,S):null;case Is:return b.key===E?c(v,x,b,S):null;case Qr:return E=b._init,f(v,x,E(b._payload),S)}if(ha(b)||Go(b))return E!==null?null:u(v,x,b,S,null);oc(v,b)}return null}function p(v,x,b,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,a(x,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gl:return v=v.get(S.key===null?b:S.key)||null,l(x,v,S,E);case Is:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,E);case Qr:var C=S._init;return p(v,x,b,C(S._payload),E)}if(ha(S)||Go(S))return v=v.get(b)||null,u(x,v,S,E,null);oc(x,S)}return null}function g(v,x,b,S){for(var E=null,C=null,_=x,P=x=0,L=null;_!==null&&P<b.length;P++){_.index>P?(L=_,_=null):L=_.sibling;var j=f(v,_,b[P],S);if(j===null){_===null&&(_=L);break}t&&_&&j.alternate===null&&e(v,_),x=s(j,x,P),C===null?E=j:C.sibling=j,C=j,_=L}if(P===b.length)return n(v,_),Ye&&Di(v,P),E;if(_===null){for(;P<b.length;P++)_=h(v,b[P],S),_!==null&&(x=s(_,x,P),C===null?E=_:C.sibling=_,C=_);return Ye&&Di(v,P),E}for(_=r(v,_);P<b.length;P++)L=p(_,v,P,b[P],S),L!==null&&(t&&L.alternate!==null&&_.delete(L.key===null?P:L.key),x=s(L,x,P),C===null?E=L:C.sibling=L,C=L);return t&&_.forEach(function(M){return e(v,M)}),Ye&&Di(v,P),E}function m(v,x,b,S){var E=Go(b);if(typeof E!="function")throw Error(G(150));if(b=E.call(b),b==null)throw Error(G(151));for(var C=E=null,_=x,P=x=0,L=null,j=b.next();_!==null&&!j.done;P++,j=b.next()){_.index>P?(L=_,_=null):L=_.sibling;var M=f(v,_,j.value,S);if(M===null){_===null&&(_=L);break}t&&_&&M.alternate===null&&e(v,_),x=s(M,x,P),C===null?E=M:C.sibling=M,C=M,_=L}if(j.done)return n(v,_),Ye&&Di(v,P),E;if(_===null){for(;!j.done;P++,j=b.next())j=h(v,j.value,S),j!==null&&(x=s(j,x,P),C===null?E=j:C.sibling=j,C=j);return Ye&&Di(v,P),E}for(_=r(v,_);!j.done;P++,j=b.next())j=p(_,v,P,j.value,S),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?P:j.key),x=s(j,x,P),C===null?E=j:C.sibling=j,C=j);return t&&_.forEach(function(z){return e(v,z)}),Ye&&Di(v,P),E}function w(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Ls&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gl:e:{for(var E=b.key,C=x;C!==null;){if(C.key===E){if(E=b.type,E===Ls){if(C.tag===7){n(v,C.sibling),x=i(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Qr&&zy(E)===C.type){n(v,C.sibling),x=i(C,b.props),x.ref=ea(v,C,b),x.return=v,v=x;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===Ls?(x=qi(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=Hc(b.type,b.key,b.props,null,v.mode,S),S.ref=ea(v,x,b),S.return=v,v=S)}return o(v);case Is:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=i(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Oh(b,v.mode,S),x.return=v,v=x}return o(v);case Qr:return C=b._init,w(v,x,C(b._payload),S)}if(ha(b))return g(v,x,b,S);if(Go(b))return m(v,x,b,S);oc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,b),x.return=v,v=x):(n(v,x),x=Lh(b,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return w}var xo=N1(!0),_1=N1(!1),pu=Pi(null),mu=null,Us=null,Jm=null;function eg(){Jm=Us=mu=null}function tg(t){var e=pu.current;qe(pu),t._currentValue=e}function hp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){mu=t,Jm=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(mu===null)throw Error(G(308));Us=t,mu.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Vi=null;function ng(t){Vi===null?Vi=[t]:Vi.push(t)}function T1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ng(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ir(t,r)}function Ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ir(t,n)}return i=r.interleaved,i===null?(e.next=e,ng(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ir(t,n)}function $c(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}function Fy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gu(t,e,n,r){var i=t.updateQueue;Jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Qe({},h,f);break e;case 2:Jr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ji|=o,t.lanes=o,t.memoizedState=h}}function By(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Ml={},sr=Pi(Ml),Xa=Pi(Ml),Qa=Pi(Ml);function Ui(t){if(t===Ml)throw Error(G(174));return t}function ig(t,e){switch(ze(Qa,e),ze(Xa,t),ze(sr,Ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qf(e,t)}qe(sr),ze(sr,e)}function wo(){qe(sr),qe(Xa),qe(Qa)}function P1(t){Ui(Qa.current);var e=Ui(sr.current),n=qf(e,t.type);e!==n&&(ze(Xa,t),ze(sr,n))}function sg(t){Xa.current===t&&(qe(sr),qe(Xa))}var Ge=Pi(0);function vu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ah=[];function og(){for(var t=0;t<Ah.length;t++)Ah[t]._workInProgressVersionPrimary=null;Ah.length=0}var zc=zr.ReactCurrentDispatcher,Ph=zr.ReactCurrentBatchConfig,Qi=0,Ze=null,ut=null,ft=null,yu=!1,Na=!1,Ja=0,_2=0;function kt(){throw Error(G(321))}function ag(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function lg(t,e,n,r,i,s){if(Qi=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zc.current=t===null||t.memoizedState===null?j2:R2,t=n(r,i),Na){s=0;do{if(Na=!1,Ja=0,25<=s)throw Error(G(301));s+=1,ft=ut=null,e.updateQueue=null,zc.current=M2,t=n(r,i)}while(Na)}if(zc.current=xu,e=ut!==null&&ut.next!==null,Qi=0,ft=ut=Ze=null,yu=!1,e)throw Error(G(300));return t}function cg(){var t=Ja!==0;return Ja=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ze.memoizedState=ft=t:ft=ft.next=t,ft}function En(){if(ut===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=ft===null?Ze.memoizedState:ft.next;if(e!==null)ft=e,ut=t;else{if(t===null)throw Error(G(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ft===null?Ze.memoizedState=ft=t:ft=ft.next=t}return ft}function el(t,e){return typeof e=="function"?e(t):e}function jh(t){var e=En(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Qi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ze.lanes|=u,Ji|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,zn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ze.lanes|=s,Ji|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rh(t){var e=En(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function j1(){}function R1(t,e){var n=Ze,r=En(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ht=!0),r=r.queue,ug(L1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,tl(9,I1.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(G(349));Qi&30||M1(n,e,i)}return i}function M1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I1(t,e,n,r){e.value=n,e.getSnapshot=r,O1(e)&&D1(t)}function L1(t,e,n){return n(function(){O1(e)&&D1(t)})}function O1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function D1(t){var e=Ir(t,1);e!==null&&On(e,t,1,-1)}function Vy(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=P2.bind(null,Ze,t),[e.memoizedState,t]}function tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $1(){return En().memoizedState}function Fc(t,e,n,r){var i=Xn();Ze.flags|=t,i.memoizedState=tl(1|e,n,void 0,r===void 0?null:r)}function sd(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&ag(r,o.deps)){i.memoizedState=tl(e,n,s,r);return}}Ze.flags|=t,i.memoizedState=tl(1|e,n,s,r)}function Uy(t,e){return Fc(8390656,8,t,e)}function ug(t,e){return sd(2048,8,t,e)}function z1(t,e){return sd(4,2,t,e)}function F1(t,e){return sd(4,4,t,e)}function B1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function V1(t,e,n){return n=n!=null?n.concat([t]):null,sd(4,4,B1.bind(null,e,t),n)}function dg(){}function U1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function H1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function W1(t,e,n){return Qi&21?(zn(n,e)||(n=Zb(),Ze.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function T2(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Ph.transition;Ph.transition={};try{t(!1),e()}finally{Ie=n,Ph.transition=r}}function q1(){return En().memoizedState}function A2(t,e,n){var r=fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Y1(t))K1(e,n);else if(n=T1(t,e,n,r),n!==null){var i=It();On(n,t,r,i),G1(n,e,r)}}function P2(t,e,n){var r=fi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y1(t))K1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var l=e.interleaved;l===null?(i.next=i,ng(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=T1(t,e,i,r),n!==null&&(i=It(),On(n,t,r,i),G1(n,e,r))}}function Y1(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function K1(t,e){Na=yu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}var xu={readContext:Cn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},j2={readContext:Cn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,B1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=A2.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:Vy,useDebugValue:dg,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=Vy(!1),e=t[0];return t=T2.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,i=Xn();if(Ye){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),mt===null)throw Error(G(349));Qi&30||M1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Uy(L1.bind(null,r,s,t),[t]),r.flags|=2048,tl(9,I1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xn(),e=mt.identifierPrefix;if(Ye){var n=Tr,r=_r;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R2={readContext:Cn,useCallback:U1,useContext:Cn,useEffect:ug,useImperativeHandle:V1,useInsertionEffect:z1,useLayoutEffect:F1,useMemo:H1,useReducer:jh,useRef:$1,useState:function(){return jh(el)},useDebugValue:dg,useDeferredValue:function(t){var e=En();return W1(e,ut.memoizedState,t)},useTransition:function(){var t=jh(el)[0],e=En().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:R1,useId:q1,unstable_isNewReconciler:!1},M2={readContext:Cn,useCallback:U1,useContext:Cn,useEffect:ug,useImperativeHandle:V1,useInsertionEffect:z1,useLayoutEffect:F1,useMemo:H1,useReducer:Rh,useRef:$1,useState:function(){return Rh(el)},useDebugValue:dg,useDeferredValue:function(t){var e=En();return ut===null?e.memoizedState=t:W1(e,ut.memoizedState,t)},useTransition:function(){var t=Rh(el)[0],e=En().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:R1,useId:q1,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var od={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=fi(t),s=jr(r,i);s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(On(e,t,i,r),$c(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=fi(t),s=jr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(On(e,t,i,r),$c(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=fi(t),i=jr(n,r);i.tag=2,e!=null&&(i.callback=e),e=di(t,i,r),e!==null&&(On(e,t,r,n),$c(e,t,r))}};function Hy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ya(n,r)||!Ya(i,s):!0}function Z1(t,e,n){var r=!1,i=xi,s=e.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(i=qt(e)?Zi:At.current,r=e.contextTypes,s=(r=r!=null)?vo(t,i):xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function pp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cn(s):(s=qt(e)?Zi:At.current,i.context=vo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&od.enqueueReplaceState(i,i.state,null),gu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=aP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var I2=typeof WeakMap=="function"?WeakMap:Map;function X1(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bu||(bu=!0,Ep=r),mp(t,e)},n}function Q1(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mp(t,e),typeof r!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new I2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=K2.bind(null,t,e,n),e.then(t,t))}function Yy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ky(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,di(n,e,1))),n.lanes|=1),t)}var L2=zr.ReactCurrentOwner,Ht=!1;function Rt(t,e,n,r){e.child=t===null?_1(e,null,n,r):xo(e,t.child,n,r)}function Gy(t,e,n,r,i){n=n.render;var s=e.ref;return eo(e,i),r=lg(t,e,n,r,s,i),n=cg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(Ye&&n&&Zm(e),e.flags|=1,Rt(t,e,r,i),e.child)}function Zy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,J1(t,e,s,r,i)):(t=Hc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ya,n(o,r)&&t.ref===e.ref)return Lr(t,e,i)}return e.flags|=1,t=pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function J1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ya(s,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,Lr(t,e,i)}return gp(t,e,n,r,i)}function eS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Ws,nn),nn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Ws,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(Ws,nn),nn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(Ws,nn),nn|=r;return Rt(t,e,i,n),e.child}function tS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gp(t,e,n,r,i){var s=qt(n)?Zi:At.current;return s=vo(e,s),eo(e,i),n=lg(t,e,n,r,s,i),r=cg(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(Ye&&r&&Zm(e),e.flags|=1,Rt(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(qt(n)){var s=!0;du(e)}else s=!1;if(eo(e,i),e.stateNode===null)Bc(t,e),Z1(e,n,r),pp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cn(c):(c=qt(n)?Zi:At.current,c=vo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wy(e,o,r,c),Jr=!1;var f=e.memoizedState;o.state=f,gu(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Wt.current||Jr?(typeof u=="function"&&(fp(e,n,u,r),l=e.memoizedState),(a=Jr||Hy(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,A1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cn(l):(l=qt(n)?Zi:At.current,l=vo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Wy(e,o,r,l),Jr=!1,f=e.memoizedState,o.state=f,gu(e,r,o,i);var g=e.memoizedState;a!==h||f!==g||Wt.current||Jr?(typeof p=="function"&&(fp(e,n,p,r),g=e.memoizedState),(c=Jr||Hy(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return vp(t,e,n,r,s,i)}function vp(t,e,n,r,i,s){tS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Oy(e,n,!1),Lr(t,e,s);r=e.stateNode,L2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,s),e.child=xo(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function nS(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),ig(t,e.containerInfo)}function Qy(t,e,n,r,i){return yo(),Qm(i),e.flags|=256,Rt(t,e,n,r),e.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function rS(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(Ge,i&1),t===null)return dp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cd(o,r,0,null),t=qi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xp(n),e.memoizedState=yp,t):hg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return O2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pi(a,s):(s=qi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yp,r}return s=t.child,t=s.sibling,r=pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hg(t,e){return e=cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ac(t,e,n,r){return r!==null&&Qm(r),xo(e,t.child,null,n),t=hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mh(Error(G(422))),ac(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cd({mode:"visible",children:r.children},i,0,null),s=qi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=xp(o),e.memoizedState=yp,s);if(!(e.mode&1))return ac(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Mh(s,r,void 0),ac(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ht||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ir(t,i),On(r,t,i,-1))}return yg(),r=Mh(Error(G(421))),ac(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=G2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,sn=ui(i.nextSibling),ln=e,Ye=!0,Mn=null,t!==null&&(xn[wn++]=_r,xn[wn++]=Tr,xn[wn++]=Xi,_r=t.id,Tr=t.overflow,Xi=e),e=hg(e,r.children),e.flags|=4096,e)}function Jy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hp(t.return,e,n)}function Ih(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jy(t,n,e);else if(t.tag===19)Jy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ih(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ih(e,!0,n,null,s);break;case"together":Ih(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D2(t,e,n){switch(e.tag){case 3:nS(e),yo();break;case 5:P1(e);break;case 1:qt(e.type)&&du(e);break;case 4:ig(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(pu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?rS(t,e,n):(ze(Ge,Ge.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);ze(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,eS(t,e,n)}return Lr(t,e,n)}var sS,wp,oS,aS;sS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wp=function(){};oS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ui(sr.current);var s=null;switch(n){case"input":i=Vf(t,i),r=Vf(t,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=Wf(t,i),r=Wf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cu)}Yf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&He("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ta(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $2(t,e,n){var r=e.pendingProps;switch(Xm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return qt(e.type)&&uu(),Ct(e),null;case 3:return r=e.stateNode,wo(),qe(Wt),qe(At),og(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(Tp(Mn),Mn=null))),wp(t,e),Ct(e),null;case 5:sg(e);var i=Ui(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)oS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Ct(e),null}if(t=Ui(sr.current),sc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jn]=e,r[Za]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<pa.length;i++)He(pa[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":ly(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":uy(r,s),He("invalid",r)}Yf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ic(r.textContent,a,t),i=["children",""+a]):Fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":Zl(r),cy(r,s,!0);break;case"textarea":Zl(r),dy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[Za]=r,sS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kf(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<pa.length;i++)He(pa[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":ly(t,r),i=Vf(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),He("invalid",t);break;case"textarea":uy(t,r),i=Wf(t,r),He("invalid",t);break;default:i=r}Yf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$b(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ob(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ba(t,l):typeof l=="number"&&Ba(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&Om(t,s,l,o))}switch(n){case"input":Zl(t),cy(t,r,!1);break;case"textarea":Zl(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)aS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Ui(Qa.current),Ui(sr.current),sc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:ic(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ic(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return Ct(e),null;case 13:if(qe(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&sn!==null&&e.mode&1&&!(e.flags&128))E1(),yo(),e.flags|=98560,s=!1;else if(s=sc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[Jn]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else Mn!==null&&(Tp(Mn),Mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?dt===0&&(dt=3):yg())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return wo(),wp(t,e),t===null&&Ka(e.stateNode.containerInfo),Ct(e),null;case 10:return tg(e.type._context),Ct(e),null;case 17:return qt(e.type)&&uu(),Ct(e),null;case 19:if(qe(Ge),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ta(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vu(t),o!==null){for(e.flags|=128,ta(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>So&&(e.flags|=128,r=!0,ta(s,!1),e.lanes=4194304)}else{if(!r)if(t=vu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ta(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Ct(e),null}else 2*nt()-s.renderingStartTime>So&&n!==1073741824&&(e.flags|=128,r=!0,ta(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=Ge.current,ze(Ge,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return vg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function z2(t,e){switch(Xm(e),e.tag){case 1:return qt(e.type)&&uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),qe(Wt),qe(At),og(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(qe(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ge),null;case 4:return wo(),null;case 10:return tg(e.type._context),null;case 22:case 23:return vg(),null;case 24:return null;default:return null}}var lc=!1,Nt=!1,F2=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function bp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var ex=!1;function B2(t,e){if(ip=ou,t=h1(),Gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sp={focusedElem:t,selectionRange:n},ou=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,w=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:jn(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(S){Je(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return g=ex,ex=!1,g}function _a(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bp(e,n,s)}i=i.next}while(i!==r)}}function ad(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lS(t){var e=t.alternate;e!==null&&(t.alternate=null,lS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[Za],delete e[lp],delete e[k2],delete e[C2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cS(t){return t.tag===5||t.tag===3||t.tag===4}function tx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cu));else if(r!==4&&(t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}function Cp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cp(t,e,n),t=t.sibling;t!==null;)Cp(t,e,n),t=t.sibling}var yt=null,Rn=!1;function qr(t,e,n){for(n=n.child;n!==null;)uS(t,e,n),n=n.sibling}function uS(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:Nt||Hs(n,e);case 6:var r=yt,i=Rn;yt=null,qr(t,e,n),yt=r,Rn=i,yt!==null&&(Rn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Rn?(t=yt,n=n.stateNode,t.nodeType===8?_h(t.parentNode,n):t.nodeType===1&&_h(t,n),Wa(t)):_h(yt,n.stateNode));break;case 4:r=yt,i=Rn,yt=n.stateNode.containerInfo,Rn=!0,qr(t,e,n),yt=r,Rn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bp(n,e,o),i=i.next}while(i!==r)}qr(t,e,n);break;case 1:if(!Nt&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,qr(t,e,n),Nt=r):qr(t,e,n);break;default:qr(t,e,n)}}function nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F2),e.forEach(function(r){var i=Z2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,Rn=!1;break e;case 3:yt=a.stateNode.containerInfo,Rn=!0;break e;case 4:yt=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(yt===null)throw Error(G(160));uS(s,o,i),yt=null,Rn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dS(e,t),e=e.sibling}function dS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),Kn(t),r&4){try{_a(3,t,t.return),ad(3,t)}catch(m){Je(t,t.return,m)}try{_a(5,t,t.return)}catch(m){Je(t,t.return,m)}}break;case 1:An(e,t),Kn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(An(e,t),Kn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var i=t.stateNode;try{Ba(i,"")}catch(m){Je(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mb(i,s),Kf(a,o);var c=Kf(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?$b(i,h):u==="dangerouslySetInnerHTML"?Ob(i,h):u==="children"?Ba(i,h):Om(i,u,h,c)}switch(a){case"input":Uf(i,s);break;case"textarea":Ib(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zs(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Zs(i,!!s.multiple,s.defaultValue,!0):Zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Za]=s}catch(m){Je(t,t.return,m)}}break;case 6:if(An(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Je(t,t.return,m)}}break;case 3:if(An(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wa(e.containerInfo)}catch(m){Je(t,t.return,m)}break;case 4:An(e,t),Kn(t);break;case 13:An(e,t),Kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mg=nt())),r&4&&nx(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||u,An(e,t),Nt=c):An(e,t),Kn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(h=ie=u;ie!==null;){switch(f=ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:Hs(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Je(r,n,m)}}break;case 5:Hs(f,f.return);break;case 22:if(f.memoizedState!==null){ix(h);continue}}p!==null?(p.return=f,ie=p):ix(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Db("display",o))}catch(m){Je(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Je(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:An(e,t),Kn(t),r&4&&nx(t);break;case 21:break;default:An(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cS(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ba(i,""),r.flags&=-33);var s=tx(t);Cp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tx(t);kp(t,a,o);break;default:throw Error(G(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V2(t,e,n){ie=t,hS(t)}function hS(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nt;a=lc;var c=Nt;if(lc=o,(Nt=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?sx(i):l!==null?(l.return=o,ie=l):sx(i);for(;s!==null;)ie=s,hS(s),s=s.sibling;ie=i,lc=a,Nt=c}rx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):rx(t)}}function rx(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||ad(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&By(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}By(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Wa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Nt||e.flags&512&&Sp(e)}catch(f){Je(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function ix(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function sx(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ad(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Je(e,i,l)}}var s=e.return;try{Sp(e)}catch(l){Je(e,s,l)}break;case 5:var o=e.return;try{Sp(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var U2=Math.ceil,wu=zr.ReactCurrentDispatcher,fg=zr.ReactCurrentOwner,kn=zr.ReactCurrentBatchConfig,Ae=0,mt=null,ot=null,wt=0,nn=0,Ws=Pi(0),dt=0,nl=null,Ji=0,ld=0,pg=0,Ta=null,Ut=null,mg=0,So=1/0,Cr=null,bu=!1,Ep=null,hi=null,cc=!1,ii=null,Su=0,Aa=0,Np=null,Vc=-1,Uc=0;function It(){return Ae&6?nt():Vc!==-1?Vc:Vc=nt()}function fi(t){return t.mode&1?Ae&2&&wt!==0?wt&-wt:N2.transition!==null?(Uc===0&&(Uc=Zb()),Uc):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:r1(t.type)),t):1}function On(t,e,n,r){if(50<Aa)throw Aa=0,Np=null,Error(G(185));Pl(t,n,r),(!(Ae&2)||t!==mt)&&(t===mt&&(!(Ae&2)&&(ld|=n),dt===4&&ti(t,wt)),Yt(t,r),n===1&&Ae===0&&!(e.mode&1)&&(So=nt()+500,id&&ji()))}function Yt(t,e){var n=t.callbackNode;NP(t,e);var r=su(t,t===mt?wt:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?E2(ox.bind(null,t)):S1(ox.bind(null,t)),b2(function(){!(Ae&6)&&ji()}),n=null;else{switch(Xb(r)){case 1:n=Bm;break;case 4:n=Kb;break;case 16:n=iu;break;case 536870912:n=Gb;break;default:n=iu}n=wS(n,fS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fS(t,e){if(Vc=-1,Uc=0,Ae&6)throw Error(G(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=su(t,t===mt?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ku(t,r);else{e=r;var i=Ae;Ae|=2;var s=mS();(mt!==t||wt!==e)&&(Cr=null,So=nt()+500,Wi(t,e));do try{q2();break}catch(a){pS(t,a)}while(!0);eg(),wu.current=s,Ae=i,ot!==null?e=0:(mt=null,wt=0,e=dt)}if(e!==0){if(e===2&&(i=Jf(t),i!==0&&(r=i,e=_p(t,i))),e===1)throw n=nl,Wi(t,0),ti(t,r),Yt(t,nt()),n;if(e===6)ti(t,r);else{if(i=t.current.alternate,!(r&30)&&!H2(i)&&(e=ku(t,r),e===2&&(s=Jf(t),s!==0&&(r=s,e=_p(t,s))),e===1))throw n=nl,Wi(t,0),ti(t,r),Yt(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:$i(t,Ut,Cr);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=mg+500-nt(),10<e)){if(su(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ap($i.bind(null,t,Ut,Cr),e);break}$i(t,Ut,Cr);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ln(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U2(r/1960))-r,10<r){t.timeoutHandle=ap($i.bind(null,t,Ut,Cr),r);break}$i(t,Ut,Cr);break;case 5:$i(t,Ut,Cr);break;default:throw Error(G(329))}}}return Yt(t,nt()),t.callbackNode===n?fS.bind(null,t):null}function _p(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=ku(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&Tp(e)),t}function Tp(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function H2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~pg,e&=~ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function ox(t){if(Ae&6)throw Error(G(327));to();var e=su(t,0);if(!(e&1))return Yt(t,nt()),null;var n=ku(t,e);if(t.tag!==0&&n===2){var r=Jf(t);r!==0&&(e=r,n=_p(t,r))}if(n===1)throw n=nl,Wi(t,0),ti(t,e),Yt(t,nt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,Ut,Cr),Yt(t,nt()),null}function gg(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(So=nt()+500,id&&ji())}}function es(t){ii!==null&&ii.tag===0&&!(Ae&6)&&to();var e=Ae;Ae|=1;var n=kn.transition,r=Ie;try{if(kn.transition=null,Ie=1,t)return t()}finally{Ie=r,kn.transition=n,Ae=e,!(Ae&6)&&ji()}}function vg(){nn=Ws.current,qe(Ws)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,w2(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uu();break;case 3:wo(),qe(Wt),qe(At),og();break;case 5:sg(r);break;case 4:wo();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:tg(r.type._context);break;case 22:case 23:vg()}n=n.return}if(mt=t,ot=t=pi(t.current,null),wt=nn=e,dt=0,nl=null,pg=ld=Ji=0,Ut=Ta=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vi=null}return t}function pS(t,e){do{var n=ot;try{if(eg(),zc.current=xu,yu){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yu=!1}if(Qi=0,ft=ut=Ze=null,Na=!1,Ja=0,fg.current=null,n===null||n.return===null){dt=1,nl=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Yy(o);if(p!==null){p.flags&=-257,Ky(p,o,a,s,e),p.mode&1&&qy(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){qy(s,c,e),yg();break e}l=Error(G(426))}}else if(Ye&&a.mode&1){var w=Yy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ky(w,o,a,s,e),Qm(bo(l,a));break e}}s=l=bo(l,a),dt!==4&&(dt=2),Ta===null?Ta=[s]:Ta.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=X1(s,l,e);Fy(s,v);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hi===null||!hi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Q1(s,a,e);Fy(s,S);break e}}s=s.return}while(s!==null)}vS(n)}catch(E){e=E,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function mS(){var t=wu.current;return wu.current=xu,t===null?xu:t}function yg(){(dt===0||dt===3||dt===2)&&(dt=4),mt===null||!(Ji&268435455)&&!(ld&268435455)||ti(mt,wt)}function ku(t,e){var n=Ae;Ae|=2;var r=mS();(mt!==t||wt!==e)&&(Cr=null,Wi(t,e));do try{W2();break}catch(i){pS(t,i)}while(!0);if(eg(),Ae=n,wu.current=r,ot!==null)throw Error(G(261));return mt=null,wt=0,dt}function W2(){for(;ot!==null;)gS(ot)}function q2(){for(;ot!==null&&!vP();)gS(ot)}function gS(t){var e=xS(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?vS(t):ot=e,fg.current=null}function vS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z2(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(n=$2(n,e,nn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);dt===0&&(dt=5)}function $i(t,e,n){var r=Ie,i=kn.transition;try{kn.transition=null,Ie=1,Y2(t,e,n,r)}finally{kn.transition=i,Ie=r}return null}function Y2(t,e,n,r){do to();while(ii!==null);if(Ae&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_P(t,s),t===mt&&(ot=mt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cc||(cc=!0,wS(iu,function(){return to(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kn.transition,kn.transition=null;var o=Ie;Ie=1;var a=Ae;Ae|=4,fg.current=null,B2(t,n),dS(n,t),f2(sp),ou=!!ip,sp=ip=null,t.current=n,V2(n),yP(),Ae=a,Ie=o,kn.transition=s}else t.current=n;if(cc&&(cc=!1,ii=t,Su=i),s=t.pendingLanes,s===0&&(hi=null),bP(n.stateNode),Yt(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bu)throw bu=!1,t=Ep,Ep=null,t;return Su&1&&t.tag!==0&&to(),s=t.pendingLanes,s&1?t===Np?Aa++:(Aa=0,Np=t):Aa=0,ji(),null}function to(){if(ii!==null){var t=Xb(Su),e=kn.transition,n=Ie;try{if(kn.transition=null,Ie=16>t?16:t,ii===null)var r=!1;else{if(t=ii,ii=null,Su=0,Ae&6)throw Error(G(331));var i=Ae;for(Ae|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:_a(8,u,s)}var h=u.child;if(h!==null)h.return=u,ie=h;else for(;ie!==null;){u=ie;var f=u.sibling,p=u.return;if(lS(u),u===c){ie=null;break}if(f!==null){f.return=p,ie=f;break}ie=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_a(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ie=v;break e}ie=s.return}}var x=t.current;for(ie=x;ie!==null;){o=ie;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ie=b;else e:for(o=x;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ad(9,a)}}catch(E){Je(a,a.return,E)}if(a===o){ie=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ie=S;break e}ie=a.return}}if(Ae=i,ji(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(Ju,t)}catch{}r=!0}return r}finally{Ie=n,kn.transition=e}}return!1}function ax(t,e,n){e=bo(n,e),e=X1(t,e,1),t=di(t,e,1),e=It(),t!==null&&(Pl(t,1,e),Yt(t,e))}function Je(t,e,n){if(t.tag===3)ax(t,t,n);else for(;e!==null;){if(e.tag===3){ax(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r))){t=bo(n,t),t=Q1(e,t,1),e=di(e,t,1),t=It(),e!==null&&(Pl(e,1,t),Yt(e,t));break}}e=e.return}}function K2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(wt&n)===n&&(dt===4||dt===3&&(wt&130023424)===wt&&500>nt()-mg?Wi(t,0):pg|=n),Yt(t,e)}function yS(t,e){e===0&&(t.mode&1?(e=Jl,Jl<<=1,!(Jl&130023424)&&(Jl=4194304)):e=1);var n=It();t=Ir(t,e),t!==null&&(Pl(t,e,n),Yt(t,n))}function G2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yS(t,n)}function Z2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),yS(t,n)}var xS;xS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,D2(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Ye&&e.flags&1048576&&k1(e,fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bc(t,e),t=e.pendingProps;var i=vo(e,At.current);eo(e,n),i=lg(null,e,r,t,i,n);var s=cg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(s=!0,du(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rg(e),i.updater=od,e.stateNode=i,i._reactInternals=e,pp(e,r,t,n),e=vp(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&Zm(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Q2(r),t=jn(r,t),i){case 0:e=gp(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Gy(null,e,r,t,n);break e;case 14:e=Zy(null,e,r,jn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),gp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Xy(t,e,r,i,n);case 3:e:{if(nS(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,A1(t,e),gu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bo(Error(G(423)),e),e=Qy(t,e,r,n,i);break e}else if(r!==i){i=bo(Error(G(424)),e),e=Qy(t,e,r,n,i);break e}else for(sn=ui(e.stateNode.containerInfo.firstChild),ln=e,Ye=!0,Mn=null,n=_1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yo(),r===i){e=Lr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return P1(e),t===null&&dp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,op(r,i)?o=null:s!==null&&op(r,s)&&(e.flags|=32),tS(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&dp(e),null;case 13:return rS(t,e,n);case 4:return ig(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xo(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Gy(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(pu,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!Wt.current){e=Lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=jr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eo(e,n),i=Cn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),Zy(t,e,r,i,n);case 15:return J1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Bc(t,e),e.tag=1,qt(r)?(t=!0,du(e)):t=!1,eo(e,n),Z1(e,r,i),pp(e,r,i,n),vp(null,e,r,!0,t,n);case 19:return iS(t,e,n);case 22:return eS(t,e,n)}throw Error(G(156,e.tag))};function wS(t,e){return Yb(t,e)}function X2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new X2(t,e,n,r)}function xg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q2(t){if(typeof t=="function")return xg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$m)return 11;if(t===zm)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ls:return qi(n.children,i,s,e);case Dm:o=8,i|=8;break;case $f:return t=Sn(12,n,e,i|2),t.elementType=$f,t.lanes=s,t;case zf:return t=Sn(13,n,e,i),t.elementType=zf,t.lanes=s,t;case Ff:return t=Sn(19,n,e,i),t.elementType=Ff,t.lanes=s,t;case Pb:return cd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tb:o=10;break e;case Ab:o=9;break e;case $m:o=11;break e;case zm:o=14;break e;case Qr:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qi(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function cd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=Pb,t.lanes=n,t.stateNode={isHidden:!1},t}function Lh(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function Oh(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gh(0),this.expirationTimes=gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wg(t,e,n,r,i,s,o,a,l){return t=new J2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rg(s),t}function ej(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bS(t){if(!t)return xi;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(qt(n))return b1(t,n,e)}return e}function SS(t,e,n,r,i,s,o,a,l){return t=wg(n,r,!0,t,i,s,o,a,l),t.context=bS(null),n=t.current,r=It(),i=fi(n),s=jr(r,i),s.callback=e??null,di(n,s,i),t.current.lanes=i,Pl(t,i,r),Yt(t,r),t}function ud(t,e,n,r){var i=e.current,s=It(),o=fi(i);return n=bS(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=di(i,e,o),t!==null&&(On(t,i,o,s),$c(t,i,o)),o}function Cu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bg(t,e){lx(t,e),(t=t.alternate)&&lx(t,e)}function tj(){return null}var kS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sg(t){this._internalRoot=t}dd.prototype.render=Sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));ud(t,e,null,null)};dd.prototype.unmount=Sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){ud(null,t,null,null)}),e[Mr]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=e1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&n1(t)}};function kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cx(){}function nj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cu(o);s.call(c)}}var o=SS(e,r,t,0,null,!1,!1,"",cx);return t._reactRootContainer=o,t[Mr]=o.current,Ka(t.nodeType===8?t.parentNode:t),es(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cu(l);a.call(c)}}var l=wg(t,0,!1,null,null,!1,!1,"",cx);return t._reactRootContainer=l,t[Mr]=l.current,Ka(t.nodeType===8?t.parentNode:t),es(function(){ud(e,l,n,r)}),l}function fd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Cu(o);a.call(l)}}ud(e,o,t,i)}else o=nj(n,e,t,i,r);return Cu(o)}Qb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fa(e.pendingLanes);n!==0&&(Vm(e,n|1),Yt(e,nt()),!(Ae&6)&&(So=nt()+500,ji()))}break;case 13:es(function(){var r=Ir(t,1);if(r!==null){var i=It();On(r,t,1,i)}}),bg(t,1)}};Um=function(t){if(t.tag===13){var e=Ir(t,134217728);if(e!==null){var n=It();On(e,t,134217728,n)}bg(t,134217728)}};Jb=function(t){if(t.tag===13){var e=fi(t),n=Ir(t,e);if(n!==null){var r=It();On(n,t,e,r)}bg(t,e)}};e1=function(){return Ie};t1=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Zf=function(t,e,n){switch(e){case"input":if(Uf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rd(r);if(!i)throw Error(G(90));Rb(r),Uf(r,i)}}}break;case"textarea":Ib(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};Bb=gg;Vb=es;var rj={usingClientEntryPoint:!1,Events:[Rl,zs,rd,zb,Fb,gg]},na={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ij={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wb(t),t===null?null:t.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||tj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{Ju=uc.inject(ij),ir=uc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rj;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(e))throw Error(G(200));return ej(t,e,null,n)};mn.createRoot=function(t,e){if(!kg(t))throw Error(G(299));var n=!1,r="",i=kS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wg(t,1,!1,null,null,n,!1,r,i),t[Mr]=e.current,Ka(t.nodeType===8?t.parentNode:t),new Sg(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Wb(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return es(t)};mn.hydrate=function(t,e,n){if(!hd(e))throw Error(G(200));return fd(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!kg(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=kS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=SS(e,null,t,1,n??null,i,!1,s,o),t[Mr]=e.current,Ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dd(e)};mn.render=function(t,e,n){if(!hd(e))throw Error(G(200));return fd(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!hd(t))throw Error(G(40));return t._reactRootContainer?(es(function(){fd(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};mn.unstable_batchedUpdates=gg;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return fd(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function CS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CS)}catch(t){console.error(t)}}CS(),Cb.exports=mn;var ms=Cb.exports;const sj=pn(ms);var ux=ms;Of.createRoot=ux.createRoot,Of.hydrateRoot=ux.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rl.apply(this,arguments)}var si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(si||(si={}));const dx="popstate";function oj(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=gs(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ap("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Eu(s))}function r(i,s){Cg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return lj(e,n,r,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aj(){return Math.random().toString(36).substr(2,8)}function hx(t,e){return{usr:t.state,key:t.key,idx:e}}function Ap(t,e,n,r){return n===void 0&&(n=null),rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gs(e):e,{state:n,key:e&&e.key||r||aj()})}function Eu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=si.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(rl({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=si.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:m.location,delta:v})}function f(w,v){a=si.Push;let x=Ap(m.location,w,v);n&&n(x,w),c=u()+1;let b=hx(x,c),S=m.createHref(x);try{o.pushState(b,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&l&&l({action:a,location:m.location,delta:1})}function p(w,v){a=si.Replace;let x=Ap(m.location,w,v);n&&n(x,w),c=u();let b=hx(x,c),S=m.createHref(x);o.replaceState(b,"",S),s&&l&&l({action:a,location:m.location,delta:0})}function g(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof w=="string"?w:Eu(w);return x=x.replace(/ $/,"%20"),Xe(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dx,h),l=w,()=>{i.removeEventListener(dx,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fx||(fx={}));function cj(t,e,n){return n===void 0&&(n="/"),uj(t,e,n)}function uj(t,e,n,r){let i=typeof e=="string"?gs(e):e,s=ko(i.pathname||"/",n);if(s==null)return null;let o=ES(t);dj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Sj(s);a=wj(o[l],c)}return a}function ES(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Xe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=mi([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ES(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yj(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of NS(s.path))i(s,o,l)}),e}function NS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=NS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function dj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hj=/^:[\w-]+$/,fj=3,pj=2,mj=1,gj=10,vj=-2,px=t=>t==="*";function yj(t,e){let n=t.split("/"),r=n.length;return n.some(px)&&(r+=vj),e&&(r+=pj),n.filter(i=>!px(i)).reduce((i,s)=>i+(hj.test(s)?fj:s===""?mj:gj),r)}function xj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=Pp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:mi([s,h.pathname]),pathnameBase:Nj(mi([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=mi([s,h.pathnameBase]))}return o}function Pp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function bj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Sj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ko(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gs(t):t;return{pathname:n?n.startsWith("/")?n:Cj(n,e):e,search:_j(r),hash:Tj(i)}}function Cj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ej(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(t,e){let n=Ej(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ng(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=gs(t):(i=rl({},t),Xe(!i.pathname||!i.pathname.includes("?"),Dh("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Dh("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Dh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=kj(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const mi=t=>t.join("/").replace(/\/\/+/g,"/"),Nj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_j=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Aj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _S=["post","put","patch","delete"];new Set(_S);const Pj=["get",..._S];new Set(Pj);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},il.apply(this,arguments)}const pd=y.createContext(null),TS=y.createContext(null),Fr=y.createContext(null),md=y.createContext(null),Br=y.createContext({outlet:null,matches:[],isDataRoute:!1}),AS=y.createContext(null);function jj(t,e){let{relative:n}=e===void 0?{}:e;Do()||Xe(!1);let{basename:r,navigator:i}=y.useContext(Fr),{hash:s,pathname:o,search:a}=gd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:mi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Do(){return y.useContext(md)!=null}function vn(){return Do()||Xe(!1),y.useContext(md).location}function PS(t){y.useContext(Fr).static||y.useLayoutEffect(t)}function vt(){let{isDataRoute:t}=y.useContext(Br);return t?Hj():Rj()}function Rj(){Do()||Xe(!1);let t=y.useContext(pd),{basename:e,future:n,navigator:r}=y.useContext(Fr),{matches:i}=y.useContext(Br),{pathname:s}=vn(),o=JSON.stringify(Eg(i,n.v7_relativeSplatPath)),a=y.useRef(!1);return PS(()=>{a.current=!0}),y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Ng(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mi([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function vs(){let{matches:t}=y.useContext(Br),e=t[t.length-1];return e?e.params:{}}function gd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(Fr),{matches:i}=y.useContext(Br),{pathname:s}=vn(),o=JSON.stringify(Eg(i,r.v7_relativeSplatPath));return y.useMemo(()=>Ng(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Mj(t,e){return Ij(t,e)}function Ij(t,e,n,r){Do()||Xe(!1);let{navigator:i,static:s}=y.useContext(Fr),{matches:o}=y.useContext(Br),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=vn(),h;if(e){var f;let v=typeof e=="string"?gs(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Xe(!1),h=v}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=cj(t,{pathname:g}),w=zj(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:mi([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:mi([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&w?y.createElement(md.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:si.Pop}},w):w}function Lj(){let t=Uj(),e=Aj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,null)}const Oj=y.createElement(Lj,null);class Dj extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Br.Provider,{value:this.props.routeContext},y.createElement(AS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $j(t){let{routeContext:e,match:n,children:r}=t,i=y.useContext(pd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Br.Provider,{value:e},r)}function zj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Xe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,g=!1,m=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||Oj,l&&(c<0&&f===0?(Wj("route-fallback"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=m:g?b=w:h.route.Component?b=y.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,y.createElement($j,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(Dj,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var jS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jS||{}),RS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RS||{});function Fj(t){let e=y.useContext(pd);return e||Xe(!1),e}function Bj(t){let e=y.useContext(TS);return e||Xe(!1),e}function Vj(t){let e=y.useContext(Br);return e||Xe(!1),e}function MS(t){let e=Vj(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function Uj(){var t;let e=y.useContext(AS),n=Bj(),r=MS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Hj(){let{router:t}=Fj(jS.UseNavigateStable),e=MS(RS.UseNavigateStable),n=y.useRef(!1);return PS(()=>{n.current=!0}),y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,il({fromRouteId:e},s)))},[t,e])}const mx={};function Wj(t,e,n){mx[t]||(mx[t]=!0)}function qj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gi(t){let{to:e,replace:n,state:r,relative:i}=t;Do()||Xe(!1);let{future:s,static:o}=y.useContext(Fr),{matches:a}=y.useContext(Br),{pathname:l}=vn(),c=vt(),u=Ng(e,Eg(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function tt(t){Xe(!1)}function Yj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=si.Pop,navigator:s,static:o=!1,future:a}=t;Do()&&Xe(!1);let l=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:s,static:o,future:il({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=gs(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,m=y.useMemo(()=>{let w=ko(u,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:i}},[l,u,h,f,p,g,i]);return m==null?null:y.createElement(Fr.Provider,{value:c},y.createElement(md.Provider,{children:n,value:m}))}function IS(t){let{children:e,location:n}=t;return Mj(jp(e),n)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,jp(r.props.children,s));return}r.type!==tt&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(this,arguments)}function LS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Kj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Gj(t,e){return t.button===0&&(!e||e==="_self")&&!Kj(t)}const Zj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Qj="6";try{window.__reactRouterVersion=Qj}catch{}const Jj=y.createContext({isTransitioning:!1}),eR="startTransition",gx=Sb[eR];function tR(t){let{basename:e,children:n,future:r,window:i}=t,s=y.useRef();s.current==null&&(s.current=oj({window:i,v5Compat:!0}));let o=s.current,[a,l]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=y.useCallback(h=>{c&&gx?gx(()=>l(h)):l(h)},[l,c]);return y.useLayoutEffect(()=>o.listen(u),[o,u]),y.useEffect(()=>qj(r),[r]),y.createElement(Yj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const nR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iR=y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=LS(e,Zj),{basename:p}=y.useContext(Fr),g,m=!1;if(typeof c=="string"&&rR.test(c)&&(g=c,nR))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),E=ko(S.pathname,p);S.origin===b.origin&&E!=null?c=E+S.search+S.hash:m=!0}catch{}let w=jj(c,{relative:i}),v=aR(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function x(b){r&&r(b),b.defaultPrevented||v(b)}return y.createElement("a",Nu({},f,{href:g||w,onClick:m||s?r:x,ref:n,target:l}))}),sR=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=LS(e,Xj),f=gd(l,{relative:h.relative}),p=vn(),g=y.useContext(TS),{navigator:m,basename:w}=y.useContext(Fr),v=g!=null&&lR(f)&&c===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=p.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=ko(S,w)||S);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=b===x||!o&&b.startsWith(x)&&b.charAt(E)==="/",_=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),P={isActive:C,isPending:_,isTransitioning:v},L=C?r:void 0,j;typeof s=="function"?j=s(P):j=[s,C?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(P):a;return y.createElement(iR,Nu({},h,{"aria-current":L,className:j,ref:n,style:M,to:l,viewTransition:c}),typeof u=="function"?u(P):u)});var Rp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rp||(Rp={}));var vx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vx||(vx={}));function oR(t){let e=y.useContext(pd);return e||Xe(!1),e}function aR(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=vt(),c=vn(),u=gd(t,{relative:o});return y.useCallback(h=>{if(Gj(h,n)){h.preventDefault();let f=r!==void 0?r:Eu(c)===Eu(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function lR(t,e){e===void 0&&(e={});let n=y.useContext(Jj);n==null&&Xe(!1);let{basename:r}=oR(Rp.useViewTransitionState),i=gd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=ko(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ko(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Pp(i.pathname,o)!=null||Pp(i.pathname,s)!=null}const cR={},yx=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(cR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},uR=t=>t?yx(t):yx;var OS={exports:{}},DS={},$S={exports:{}},zS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=y;function dR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hR=typeof Object.is=="function"?Object.is:dR,fR=Co.useState,pR=Co.useEffect,mR=Co.useLayoutEffect,gR=Co.useDebugValue;function vR(t,e){var n=e(),r=fR({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return mR(function(){i.value=n,i.getSnapshot=e,$h(i)&&s({inst:i})},[t,n,e]),pR(function(){return $h(i)&&s({inst:i}),t(function(){$h(i)&&s({inst:i})})},[t]),gR(n),n}function $h(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hR(t,n)}catch{return!0}}function yR(t,e){return e()}var xR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yR:vR;zS.useSyncExternalStore=Co.useSyncExternalStore!==void 0?Co.useSyncExternalStore:xR;$S.exports=zS;var wR=$S.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=y,bR=wR;function SR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kR=typeof Object.is=="function"?Object.is:SR,CR=bR.useSyncExternalStore,ER=vd.useRef,NR=vd.useEffect,_R=vd.useMemo,TR=vd.useDebugValue;DS.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ER(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=_R(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return h=g}return h=p}if(g=h,kR(u,p))return g;var m=r(p);return i!==void 0&&i(g,m)?(u=p,g):(u=p,h=m)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=CR(t,s[0],s[1]);return NR(function(){o.hasValue=!0,o.value=a},[a]),TR(a),a};OS.exports=DS;var AR=OS.exports;const FS=pn(AR),BS={},{useDebugValue:PR}=Oe,{useSyncExternalStoreWithSelector:jR}=FS;let xx=!1;const RR=t=>t;function MR(t,e=RR,n){(BS?"production":void 0)!=="production"&&n&&!xx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),xx=!0);const r=jR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return PR(r),r}const wx=t=>{(BS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?uR(t):t,n=(r,i)=>MR(e,r,i);return Object.assign(n,e),n},pr=t=>t?wx(t):wx;var Te;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Te||(Te={}));var Mp;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Mp||(Mp={}));const re=Te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nr=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},Y=Te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),IR=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class cn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof cn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}cn.create=t=>new cn(t);const Eo=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Te.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${Te.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Te.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${Te.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Te.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,Te.assertNever(t)}return{message:n}};let VS=Eo;function LR(t){VS=t}function _u(){return VS}const Tu=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},OR=[];function te(t,e){const n=_u(),r=Tu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Eo?void 0:Eo].filter(i=>!!i)});t.common.issues.push(r)}class Pt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return me;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Pt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return me;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const me=Object.freeze({status:"aborted"}),qs=t=>({status:"dirty",value:t}),Lt=t=>({status:"valid",value:t}),Ip=t=>t.status==="aborted",Lp=t=>t.status==="dirty",ts=t=>t.status==="valid",sl=t=>typeof Promise<"u"&&t instanceof Promise;function Au(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function US(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(oe||(oe={}));var ma,ga;class cr{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bx=(t,e)=>{if(ts(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new cn(t.common.issues);return this._error=n,this._error}}};function we(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class Se{get description(){return this._def.description}_getType(e){return Nr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pt,ctx:{common:e.parent.common,data:e.data,parsedType:Nr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(sl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return bx(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nr(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return ts(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>ts(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nr(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(sl(i)?i:Promise.resolve(i));return bx(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Y.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fn({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return or.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Dn.create(this)}promise(){return _o.create(this,this._def)}or(e){return cl.create([this,e],this._def)}and(e){return ul.create(this,e,this._def)}transform(e){return new Fn({...we(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ml({...we(this._def),innerType:this,defaultValue:n,typeName:fe.ZodDefault})}brand(){return new _g({typeName:fe.ZodBranded,type:this,...we(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new gl({...we(this._def),innerType:this,catchValue:n,typeName:fe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Il.create(this,e)}readonly(){return vl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DR=/^c[^\s-]{8,}$/i,$R=/^[0-9a-z]+$/,zR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,FR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,BR=/^[a-z0-9_-]{21}$/i,VR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,UR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,HR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zh;const qR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,KR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,GR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ZR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,HS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",QR=new RegExp(`^${HS}$`);function WS(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function JR(t){return new RegExp(`^${WS(t)}$`)}function qS(t){let e=`${HS}T${WS(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function eM(t,e){return!!((e==="v4"||!e)&&qR.test(t)||(e==="v6"||!e)&&KR.test(t))}function tM(t,e){if(!VR.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function nM(t,e){return!!((e==="v4"||!e)&&YR.test(t)||(e==="v6"||!e)&&GR.test(t))}class In extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:re.string,received:s.parsedType}),me}const r=new Pt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?te(i,{code:Y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&te(i,{code:Y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")HR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"email",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")zh||(zh=new RegExp(WR,"u")),zh.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"emoji",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")FR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"uuid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")BR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"nanoid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")DR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cuid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")$R.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cuid2",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")zR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"ulid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),te(i,{validation:"url",code:Y.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"regex",code:Y.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?qS(s).test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?QR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?JR(s).test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?UR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"duration",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?eM(e.data,s.version)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"ip",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?tM(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"jwt",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?nM(e.data,s.version)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cidr",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?ZR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"base64",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?XR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"base64url",code:Y.invalid_string,message:s.message}),r.dirty()):Te.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Y.invalid_string,...oe.errToObj(r)})}_addCheck(e){return new In({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...oe.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...oe.errToObj(n)})}nonempty(e){return this.min(1,oe.errToObj(e))}trim(){return new In({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new In({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new In({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}In.create=t=>{var e;return new In({checks:[],typeName:fe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...we(t)})};function rM(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class wi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:re.number,received:s.parsedType}),me}let r;const i=new Pt;for(const s of this._def.checks)s.kind==="int"?Te.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Y.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?rM(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_finite,message:s.message}),i.dirty()):Te.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,i){return new wi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(i)}]})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Te.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}wi.create=t=>new wi({checks:[],typeName:fe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...we(t)});class bi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==re.bigint)return this._getInvalidInput(e);let r;const i=new Pt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Te.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return te(n,{code:Y.invalid_type,expected:re.bigint,received:n.parsedType}),me}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,i){return new bi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(i)}]})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bi.create=t=>{var e;return new bi({checks:[],typeName:fe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...we(t)})};class ol extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.boolean,received:r.parsedType}),me}return Lt(e.data)}}ol.create=t=>new ol({typeName:fe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...we(t)});class ns extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:re.date,received:s.parsedType}),me}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_date}),me}const r=new Pt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Te.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ns({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ns.create=t=>new ns({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:fe.ZodDate,...we(t)});class Pu extends Se{_parse(e){if(this._getType(e)!==re.symbol){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.symbol,received:r.parsedType}),me}return Lt(e.data)}}Pu.create=t=>new Pu({typeName:fe.ZodSymbol,...we(t)});class al extends Se{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.undefined,received:r.parsedType}),me}return Lt(e.data)}}al.create=t=>new al({typeName:fe.ZodUndefined,...we(t)});class ll extends Se{_parse(e){if(this._getType(e)!==re.null){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.null,received:r.parsedType}),me}return Lt(e.data)}}ll.create=t=>new ll({typeName:fe.ZodNull,...we(t)});class No extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return Lt(e.data)}}No.create=t=>new No({typeName:fe.ZodAny,...we(t)});class Yi extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Lt(e.data)}}Yi.create=t=>new Yi({typeName:fe.ZodUnknown,...we(t)});class Or extends Se{_parse(e){const n=this._getOrReturnCtx(e);return te(n,{code:Y.invalid_type,expected:re.never,received:n.parsedType}),me}}Or.create=t=>new Or({typeName:fe.ZodNever,...we(t)});class ju extends Se{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.void,received:r.parsedType}),me}return Lt(e.data)}}ju.create=t=>new ju({typeName:fe.ZodVoid,...we(t)});class Dn extends Se{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==re.array)return te(n,{code:Y.invalid_type,expected:re.array,received:n.parsedType}),me;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(te(n,{code:o?Y.too_big:Y.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(te(n,{code:Y.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(te(n,{code:Y.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new cr(n,o,n.path,a)))).then(o=>Pt.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new cr(n,o,n.path,a)));return Pt.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Dn({...this._def,minLength:{value:e,message:oe.toString(n)}})}max(e,n){return new Dn({...this._def,maxLength:{value:e,message:oe.toString(n)}})}length(e,n){return new Dn({...this._def,exactLength:{value:e,message:oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Dn.create=(t,e)=>new Dn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...we(e)});function js(t){if(t instanceof Ke){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=or.create(js(r))}return new Ke({...t._def,shape:()=>e})}else return t instanceof Dn?new Dn({...t._def,type:js(t.element)}):t instanceof or?or.create(js(t.unwrap())):t instanceof ki?ki.create(js(t.unwrap())):t instanceof ur?ur.create(t.items.map(e=>js(e))):t}class Ke extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Te.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==re.object){const c=this._getOrReturnCtx(e);return te(c,{code:Y.invalid_type,expected:re.object,received:c.parsedType}),me}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Or&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new cr(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Or){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(te(i,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new cr(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key,f=await u.value;c.push({key:h,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Pt.mergeObjectSync(r,c)):Pt.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return oe.errToObj,new Ke({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Ke({...this._def,unknownKeys:"strip"})}passthrough(){return new Ke({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ke({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ke({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ke({...this._def,catchall:e})}pick(e){const n={};return Te.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ke({...this._def,shape:()=>n})}omit(e){const n={};return Te.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ke({...this._def,shape:()=>n})}deepPartial(){return js(this)}partial(e){const n={};return Te.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ke({...this._def,shape:()=>n})}required(e){const n={};return Te.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof or;)s=s._def.innerType;n[r]=s}}),new Ke({...this._def,shape:()=>n})}keyof(){return YS(Te.objectKeys(this.shape))}}Ke.create=(t,e)=>new Ke({shape:()=>t,unknownKeys:"strip",catchall:Or.create(),typeName:fe.ZodObject,...we(e)});Ke.strictCreate=(t,e)=>new Ke({shape:()=>t,unknownKeys:"strict",catchall:Or.create(),typeName:fe.ZodObject,...we(e)});Ke.lazycreate=(t,e)=>new Ke({shape:t,unknownKeys:"strip",catchall:Or.create(),typeName:fe.ZodObject,...we(e)});class cl extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new cn(a.ctx.common.issues));return te(n,{code:Y.invalid_union,unionErrors:o}),me}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new cn(l));return te(n,{code:Y.invalid_union,unionErrors:a}),me}}get options(){return this._def.options}}cl.create=(t,e)=>new cl({options:t,typeName:fe.ZodUnion,...we(e)});const Sr=t=>t instanceof hl?Sr(t.schema):t instanceof Fn?Sr(t.innerType()):t instanceof fl?[t.value]:t instanceof Si?t.options:t instanceof pl?Te.objectValues(t.enum):t instanceof ml?Sr(t._def.innerType):t instanceof al?[void 0]:t instanceof ll?[null]:t instanceof or?[void 0,...Sr(t.unwrap())]:t instanceof ki?[null,...Sr(t.unwrap())]:t instanceof _g||t instanceof vl?Sr(t.unwrap()):t instanceof gl?Sr(t._def.innerType):[];class yd extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.object)return te(n,{code:Y.invalid_type,expected:re.object,received:n.parsedType}),me;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(te(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Sr(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new yd({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...we(r)})}}function Op(t,e){const n=Nr(t),r=Nr(e);if(t===e)return{valid:!0,data:t};if(n===re.object&&r===re.object){const i=Te.objectKeys(e),s=Te.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Op(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===re.array&&r===re.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Op(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===re.date&&r===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ul extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Ip(s)||Ip(o))return me;const a=Op(s.value,o.value);return a.valid?((Lp(s)||Lp(o))&&n.dirty(),{status:n.value,value:a.data}):(te(r,{code:Y.invalid_intersection_types}),me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ul.create=(t,e,n)=>new ul({left:t,right:e,typeName:fe.ZodIntersection,...we(n)});class ur extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.array)return te(r,{code:Y.invalid_type,expected:re.array,received:r.parsedType}),me;if(r.data.length<this._def.items.length)return te(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&r.data.length>this._def.items.length&&(te(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new cr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Pt.mergeArray(n,o)):Pt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ur({...this._def,rest:e})}}ur.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ur({items:t,typeName:fe.ZodTuple,rest:null,...we(e)})};class dl extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.object)return te(r,{code:Y.invalid_type,expected:re.object,received:r.parsedType}),me;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new cr(r,a,r.path,a)),value:o._parse(new cr(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Pt.mergeObjectAsync(n,i):Pt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Se?new dl({keyType:e,valueType:n,typeName:fe.ZodRecord,...we(r)}):new dl({keyType:In.create(),valueType:e,typeName:fe.ZodRecord,...we(n)})}}class Ru extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.map)return te(r,{code:Y.invalid_type,expected:re.map,received:r.parsedType}),me;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new cr(r,a,r.path,[c,"key"])),value:s._parse(new cr(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return me;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return me;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}Ru.create=(t,e,n)=>new Ru({valueType:e,keyType:t,typeName:fe.ZodMap,...we(n)});class rs extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.set)return te(r,{code:Y.invalid_type,expected:re.set,received:r.parsedType}),me;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(te(r,{code:Y.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(te(r,{code:Y.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return me;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new cr(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new rs({...this._def,minSize:{value:e,message:oe.toString(n)}})}max(e,n){return new rs({...this._def,maxSize:{value:e,message:oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}rs.create=(t,e)=>new rs({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...we(e)});class no extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.function)return te(n,{code:Y.invalid_type,expected:re.function,received:n.parsedType}),me;function r(a,l){return Tu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_u(),Eo].filter(c=>!!c),issueData:{code:Y.invalid_arguments,argumentsError:l}})}function i(a,l){return Tu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_u(),Eo].filter(c=>!!c),issueData:{code:Y.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof _o){const a=this;return Lt(async function(...l){const c=new cn([]),u=await a._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(r(l,p)),c}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})})}else{const a=this;return Lt(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new cn([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(u,s);if(!h.success)throw new cn([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new no({...this._def,args:ur.create(e).rest(Yi.create())})}returns(e){return new no({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new no({args:e||ur.create([]).rest(Yi.create()),returns:n||Yi.create(),typeName:fe.ZodFunction,...we(r)})}}class hl extends Se{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}hl.create=(t,e)=>new hl({getter:t,typeName:fe.ZodLazy,...we(e)});class fl extends Se{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return te(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}fl.create=(t,e)=>new fl({value:t,typeName:fe.ZodLiteral,...we(e)});function YS(t,e){return new Si({values:t,typeName:fe.ZodEnum,...we(e)})}class Si extends Se{constructor(){super(...arguments),ma.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return te(n,{expected:Te.joinValues(r),received:n.parsedType,code:Y.invalid_type}),me}if(Au(this,ma)||US(this,ma,new Set(this._def.values)),!Au(this,ma).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return te(n,{received:n.data,code:Y.invalid_enum_value,options:r}),me}return Lt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Si.create(e,{...this._def,...n})}exclude(e,n=this._def){return Si.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ma=new WeakMap;Si.create=YS;class pl extends Se{constructor(){super(...arguments),ga.set(this,void 0)}_parse(e){const n=Te.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==re.string&&r.parsedType!==re.number){const i=Te.objectValues(n);return te(r,{expected:Te.joinValues(i),received:r.parsedType,code:Y.invalid_type}),me}if(Au(this,ga)||US(this,ga,new Set(Te.getValidEnumValues(this._def.values))),!Au(this,ga).has(e.data)){const i=Te.objectValues(n);return te(r,{received:r.data,code:Y.invalid_enum_value,options:i}),me}return Lt(e.data)}get enum(){return this._def.values}}ga=new WeakMap;pl.create=(t,e)=>new pl({values:t,typeName:fe.ZodNativeEnum,...we(e)});class _o extends Se{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.promise&&n.common.async===!1)return te(n,{code:Y.invalid_type,expected:re.promise,received:n.parsedType}),me;const r=n.parsedType===re.promise?n.data:Promise.resolve(n.data);return Lt(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_o.create=(t,e)=>new _o({type:t,typeName:fe.ZodPromise,...we(e)});class Fn extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{te(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return me;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?me:l.status==="dirty"||n.value==="dirty"?qs(l.value):l});{if(n.value==="aborted")return me;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?me:a.status==="dirty"||n.value==="dirty"?qs(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?me:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?me:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ts(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ts(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Te.assertNever(i)}}Fn.create=(t,e,n)=>new Fn({schema:t,typeName:fe.ZodEffects,effect:e,...we(n)});Fn.createWithPreprocess=(t,e,n)=>new Fn({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...we(n)});class or extends Se{_parse(e){return this._getType(e)===re.undefined?Lt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}or.create=(t,e)=>new or({innerType:t,typeName:fe.ZodOptional,...we(e)});class ki extends Se{_parse(e){return this._getType(e)===re.null?Lt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ki.create=(t,e)=>new ki({innerType:t,typeName:fe.ZodNullable,...we(e)});class ml extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ml.create=(t,e)=>new ml({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...we(e)});class gl extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sl(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new cn(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new cn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}gl.create=(t,e)=>new gl({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...we(e)});class Mu extends Se{_parse(e){if(this._getType(e)!==re.nan){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:re.nan,received:r.parsedType}),me}return{status:"valid",value:e.data}}}Mu.create=t=>new Mu({typeName:fe.ZodNaN,...we(t)});const iM=Symbol("zod_brand");class _g extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Il extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?me:s.status==="dirty"?(n.dirty(),qs(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?me:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Il({in:e,out:n,typeName:fe.ZodPipeline})}}class vl extends Se{_parse(e){const n=this._def.innerType._parse(e),r=i=>(ts(i)&&(i.value=Object.freeze(i.value)),i);return sl(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}vl.create=(t,e)=>new vl({innerType:t,typeName:fe.ZodReadonly,...we(e)});function Sx(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function KS(t,e={},n){return t?No.create().superRefine((r,i)=>{var s,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const h=Sx(e,r),f=(u=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:f})}});if(!a){const l=Sx(e,r),c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):No.create()}const sM={object:Ke.lazycreate};var fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));const oM=(t,e={message:`Input not instance of ${t.name}`})=>KS(n=>n instanceof t,e),GS=In.create,ZS=wi.create,aM=Mu.create,lM=bi.create,XS=ol.create,cM=ns.create,uM=Pu.create,dM=al.create,hM=ll.create,fM=No.create,pM=Yi.create,mM=Or.create,gM=ju.create,vM=Dn.create,yM=Ke.create,xM=Ke.strictCreate,wM=cl.create,bM=yd.create,SM=ul.create,kM=ur.create,CM=dl.create,EM=Ru.create,NM=rs.create,_M=no.create,TM=hl.create,AM=fl.create,PM=Si.create,jM=pl.create,RM=_o.create,kx=Fn.create,MM=or.create,IM=ki.create,LM=Fn.createWithPreprocess,OM=Il.create,DM=()=>GS().optional(),$M=()=>ZS().optional(),zM=()=>XS().optional(),FM={string:t=>In.create({...t,coerce:!0}),number:t=>wi.create({...t,coerce:!0}),boolean:t=>ol.create({...t,coerce:!0}),bigint:t=>bi.create({...t,coerce:!0}),date:t=>ns.create({...t,coerce:!0})},BM=me;var ra=Object.freeze({__proto__:null,defaultErrorMap:Eo,setErrorMap:LR,getErrorMap:_u,makeIssue:Tu,EMPTY_PATH:OR,addIssueToContext:te,ParseStatus:Pt,INVALID:me,DIRTY:qs,OK:Lt,isAborted:Ip,isDirty:Lp,isValid:ts,isAsync:sl,get util(){return Te},get objectUtil(){return Mp},ZodParsedType:re,getParsedType:Nr,ZodType:Se,datetimeRegex:qS,ZodString:In,ZodNumber:wi,ZodBigInt:bi,ZodBoolean:ol,ZodDate:ns,ZodSymbol:Pu,ZodUndefined:al,ZodNull:ll,ZodAny:No,ZodUnknown:Yi,ZodNever:Or,ZodVoid:ju,ZodArray:Dn,ZodObject:Ke,ZodUnion:cl,ZodDiscriminatedUnion:yd,ZodIntersection:ul,ZodTuple:ur,ZodRecord:dl,ZodMap:Ru,ZodSet:rs,ZodFunction:no,ZodLazy:hl,ZodLiteral:fl,ZodEnum:Si,ZodNativeEnum:pl,ZodPromise:_o,ZodEffects:Fn,ZodTransformer:Fn,ZodOptional:or,ZodNullable:ki,ZodDefault:ml,ZodCatch:gl,ZodNaN:Mu,BRAND:iM,ZodBranded:_g,ZodPipeline:Il,ZodReadonly:vl,custom:KS,Schema:Se,ZodSchema:Se,late:sM,get ZodFirstPartyTypeKind(){return fe},coerce:FM,any:fM,array:vM,bigint:lM,boolean:XS,date:cM,discriminatedUnion:bM,effect:kx,enum:PM,function:_M,instanceof:oM,intersection:SM,lazy:TM,literal:AM,map:EM,nan:aM,nativeEnum:jM,never:mM,null:hM,nullable:IM,number:ZS,object:yM,oboolean:zM,onumber:$M,optional:MM,ostring:DM,pipeline:OM,preprocess:LM,promise:RM,record:CM,set:NM,strictObject:xM,string:GS,symbol:uM,transformer:kx,tuple:kM,undefined:dM,union:wM,unknown:pM,void:gM,NEVER:BM,ZodIssueCode:Y,quotelessJson:IR,ZodError:cn});const VM=ra.object({apiUrl:ra.string().url(),useMock:ra.boolean().default(!1),mockInitData:ra.string().optional().default(""),enableDebugLogging:ra.boolean().optional().default(!1)});let yl=null,Fh=null,Cx=!1;async function UM(){try{const t="config.json";console.log(`[Config] Fetching config from: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.json();console.log("[Config] Raw config data:",n);const r=VM.parse(n);return console.log("[Config] Parsed config:",r),r}catch(t){throw console.error("[Config] Error loading or parsing config.json:",t),new Error(`Application configuration is invalid or missing. Details: ${t instanceof Error?t.message:String(t)}`)}}function ys(){if(!yl)throw Cx||(console.warn("[Config] Warning: getConfig() called before configuration was fully initialized. This might happen during initial module loading but should resolve."),Cx=!0),new Error("Configuration not loaded");return yl}function HM(){return yl!==null}async function WM(){if(yl){console.warn("[Config] Already initialized.");return}Fh||(Fh=UM());try{yl=await Fh,console.log("[Config] Initialization complete.")}catch(t){throw t}}let Ys=null;const dc=()=>{if(Ys!==null)return Ys;if(!HM())return!1;try{return Ys=ys().enableDebugLogging,Ys??!1}catch(t){return console.error("[Logger] Error accessing config in shouldLogDetails even after isConfigLoaded check:",t),!1}},qM=t=>{Ys=t.enableDebugLogging,console.log(`[Logger Config Update] Detailed logging in production is now: ${Ys?"ENABLED":"DISABLED"}`)},k={log:(...t)=>{dc()&&console.log("[APP LOG]",...t)},warn:(...t)=>{dc()&&console.warn("[APP WARN]",...t)},error:(...t)=>{console.error("[APP ERROR]",...t)},info:(...t)=>{dc()&&console.info("[APP INFO]",...t)},debug:(...t)=>{dc()&&(console.debug||console.log)("[APP DEBUG]",...t)}};function QS(t,e){return function(){return t.apply(e,arguments)}}const{toString:YM}=Object.prototype,{getPrototypeOf:Tg}=Object,xd=(t=>e=>{const n=YM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=t=>(t=t.toLowerCase(),e=>xd(e)===t),wd=t=>e=>typeof e===t,{isArray:$o}=Array,xl=wd("undefined");function KM(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&un(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const JS=Hn("ArrayBuffer");function GM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&JS(t.buffer),e}const ZM=wd("string"),un=wd("function"),ek=wd("number"),bd=t=>t!==null&&typeof t=="object",XM=t=>t===!0||t===!1,Wc=t=>{if(xd(t)!=="object")return!1;const e=Tg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},QM=Hn("Date"),JM=Hn("File"),eI=Hn("Blob"),tI=Hn("FileList"),nI=t=>bd(t)&&un(t.pipe),rI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||un(t.append)&&((e=xd(t))==="formdata"||e==="object"&&un(t.toString)&&t.toString()==="[object FormData]"))},iI=Hn("URLSearchParams"),[sI,oI,aI,lI]=["ReadableStream","Request","Response","Headers"].map(Hn),cI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ll(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),$o(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function tk(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nk=t=>!xl(t)&&t!==Hi;function Dp(){const{caseless:t}=nk(this)&&this||{},e={},n=(r,i)=>{const s=t&&tk(e,i)||i;Wc(e[s])&&Wc(r)?e[s]=Dp(e[s],r):Wc(r)?e[s]=Dp({},r):$o(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ll(arguments[r],n);return e}const uI=(t,e,n,{allOwnKeys:r}={})=>(Ll(e,(i,s)=>{n&&un(i)?t[s]=QS(i,n):t[s]=i},{allOwnKeys:r}),t),dI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},fI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Tg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},mI=t=>{if(!t)return null;if($o(t))return t;let e=t.length;if(!ek(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},gI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Tg(Uint8Array)),vI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},yI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},xI=Hn("HTMLFormElement"),wI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Ex=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),bI=Hn("RegExp"),rk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ll(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},SI=t=>{rk(t,(e,n)=>{if(un(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(un(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return $o(t)?r(t):r(String(t).split(e)),n},CI=()=>{},EI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function NI(t){return!!(t&&un(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _I=t=>{const e=new Array(10),n=(r,i)=>{if(bd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=$o(r)?[]:{};return Ll(r,(o,a)=>{const l=n(o,i+1);!xl(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},TI=Hn("AsyncFunction"),AI=t=>t&&(bd(t)||un(t))&&un(t.then)&&un(t.catch),ik=((t,e)=>t?setImmediate:e?((n,r)=>(Hi.addEventListener("message",({source:i,data:s})=>{i===Hi&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Hi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",un(Hi.postMessage)),PI=typeof queueMicrotask<"u"?queueMicrotask.bind(Hi):typeof process<"u"&&process.nextTick||ik,V={isArray:$o,isArrayBuffer:JS,isBuffer:KM,isFormData:rI,isArrayBufferView:GM,isString:ZM,isNumber:ek,isBoolean:XM,isObject:bd,isPlainObject:Wc,isReadableStream:sI,isRequest:oI,isResponse:aI,isHeaders:lI,isUndefined:xl,isDate:QM,isFile:JM,isBlob:eI,isRegExp:bI,isFunction:un,isStream:nI,isURLSearchParams:iI,isTypedArray:gI,isFileList:tI,forEach:Ll,merge:Dp,extend:uI,trim:cI,stripBOM:dI,inherits:hI,toFlatObject:fI,kindOf:xd,kindOfTest:Hn,endsWith:pI,toArray:mI,forEachEntry:vI,matchAll:yI,isHTMLForm:xI,hasOwnProperty:Ex,hasOwnProp:Ex,reduceDescriptors:rk,freezeMethods:SI,toObjectSet:kI,toCamelCase:wI,noop:CI,toFiniteNumber:EI,findKey:tk,global:Hi,isContextDefined:nk,isSpecCompliantForm:NI,toJSONObject:_I,isAsyncFn:TI,isThenable:AI,setImmediate:ik,asap:PI};function xe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const sk=xe.prototype,ok={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ok[t]={value:t}});Object.defineProperties(xe,ok);Object.defineProperty(sk,"isAxiosError",{value:!0});xe.from=(t,e,n,r,i,s)=>{const o=Object.create(sk);return V.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const jI=null;function $p(t){return V.isPlainObject(t)||V.isArray(t)}function ak(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function Nx(t,e,n){return t?t.concat(e).map(function(i,s){return i=ak(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function RI(t){return V.isArray(t)&&!t.some($p)}const MI=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Sd(t,e,n){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!V.isUndefined(w[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(V.isDate(g))return g.toISOString();if(!l&&V.isBlob(g))throw new xe("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(g)||V.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,w){let v=g;if(g&&!w&&typeof g=="object"){if(V.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(V.isArray(g)&&RI(g)||(V.isFileList(g)||V.endsWith(m,"[]"))&&(v=V.toArray(g)))return m=ak(m),v.forEach(function(b,S){!(V.isUndefined(b)||b===null)&&e.append(o===!0?Nx([m],S,s):o===null?m:m+"[]",c(b))}),!1}return $p(g)?!0:(e.append(Nx(w,m,s),c(g)),!1)}const h=[],f=Object.assign(MI,{defaultVisitor:u,convertValue:c,isVisitable:$p});function p(g,m){if(!V.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),V.forEach(g,function(v,x){(!(V.isUndefined(v)||v===null)&&i.call(e,v,V.isString(x)?x.trim():x,m,f))===!0&&p(v,m?m.concat(x):[x])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return p(t),e}function _x(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ag(t,e){this._pairs=[],t&&Sd(t,this,e)}const lk=Ag.prototype;lk.append=function(e,n){this._pairs.push([e,n])};lk.toString=function(e){const n=e?function(r){return e.call(this,r,_x)}:_x;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function II(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ck(t,e,n){if(!e)return t;const r=n&&n.encode||II;V.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=V.isURLSearchParams(e)?e.toString():new Ag(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Tx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const uk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LI=typeof URLSearchParams<"u"?URLSearchParams:Ag,OI=typeof FormData<"u"?FormData:null,DI=typeof Blob<"u"?Blob:null,$I={isBrowser:!0,classes:{URLSearchParams:LI,FormData:OI,Blob:DI},protocols:["http","https","file","blob","url","data"]},Pg=typeof window<"u"&&typeof document<"u",zp=typeof navigator=="object"&&navigator||void 0,zI=Pg&&(!zp||["ReactNative","NativeScript","NS"].indexOf(zp.product)<0),FI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",BI=Pg&&window.location.href||"http://localhost",VI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pg,hasStandardBrowserEnv:zI,hasStandardBrowserWebWorkerEnv:FI,navigator:zp,origin:BI},Symbol.toStringTag,{value:"Module"})),Tt={...VI,...$I};function UI(t,e){return Sd(t,new Tt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Tt.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function HI(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function WI(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function dk(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&V.isArray(i[o])&&(i[o]=WI(i[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const n={};return V.forEachEntry(t,(r,i)=>{e(HI(r),i,n,0)}),n}return null}function qI(t,e,n){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ol={transitional:uk,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(dk(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return UI(e,this.formSerializer).toString();if((a=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Sd(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),qI(e)):e}],transformResponse:[function(e){const n=this.transitional||Ol.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tt.classes.FormData,Blob:Tt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Ol.headers[t]={}});const YI=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KI=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&YI[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Ax=Symbol("internals");function ia(t){return t&&String(t).trim().toLowerCase()}function qc(t){return t===!1||t==null?t:V.isArray(t)?t.map(qc):String(t)}function GI(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ZI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bh(t,e,n,r,i){if(V.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function XI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function QI(t,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Kt=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=ia(l);if(!u)throw new Error("header name must be a non-empty string");const h=V.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=qc(a))}const o=(a,l)=>V.forEach(a,(c,u)=>s(c,u,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(V.isString(e)&&(e=e.trim())&&!ZI(e))o(KI(e),n);else if(V.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=ia(e),e){const r=V.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return GI(i);if(V.isFunction(n))return n.call(this,i,r);if(V.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ia(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Bh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ia(o),o){const a=V.findKey(r,o);a&&(!n||Bh(r,r[a],a,n))&&(delete r[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Bh(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return V.forEach(this,(i,s)=>{const o=V.findKey(r,s);if(o){n[o]=qc(i),delete n[s];return}const a=e?XI(s):String(s).trim();a!==s&&delete n[s],n[a]=qc(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ax]=this[Ax]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ia(o);r[a]||(QI(i,o),r[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Kt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});V.freezeMethods(Kt);function Vh(t,e){const n=this||Ol,r=e||n,i=Kt.from(r.headers);let s=r.data;return V.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function hk(t){return!!(t&&t.__CANCEL__)}function zo(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(zo,xe,{__CANCEL__:!0});function fk(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function JI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eL(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function tL(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Iu=(t,e,n=3)=>{let r=0;const i=eL(50,250);return tL(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},Px=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},jx=t=>(...e)=>V.asap(()=>t(...e)),nL=Tt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Tt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Tt.origin),Tt.navigator&&/(msie|trident)/i.test(Tt.navigator.userAgent)):()=>!0,rL=Tt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];V.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),V.isString(r)&&o.push("path="+r),V.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function sL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pk(t,e,n){let r=!iL(e);return t&&(r||n==!1)?sL(t,e):e}const Rx=t=>t instanceof Kt?{...t}:t;function is(t,e){e=e||{};const n={};function r(c,u,h,f){return V.isPlainObject(c)&&V.isPlainObject(u)?V.merge.call({caseless:f},c,u):V.isPlainObject(u)?V.merge({},u):V.isArray(u)?u.slice():u}function i(c,u,h,f){if(V.isUndefined(u)){if(!V.isUndefined(c))return r(void 0,c,h,f)}else return r(c,u,h,f)}function s(c,u){if(!V.isUndefined(u))return r(void 0,u)}function o(c,u){if(V.isUndefined(u)){if(!V.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>i(Rx(c),Rx(u),h,!0)};return V.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||i,f=h(t[u],e[u],u);V.isUndefined(f)&&h!==a||(n[u]=f)}),n}const mk=t=>{const e=is({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Kt.from(o),e.url=ck(pk(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(V.isFormData(n)){if(Tt.hasStandardBrowserEnv||Tt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Tt.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&nL(e.url))){const c=i&&s&&rL.read(s);c&&o.set(i,c)}return e},oL=typeof XMLHttpRequest<"u",aL=oL&&function(t){return new Promise(function(n,r){const i=mk(t);let s=i.data;const o=Kt.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,f,p,g;function m(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function v(){if(!w)return;const b=Kt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:b,config:t,request:w};fk(function(_){n(_),m()},function(_){r(_),m()},E),w=null}"onloadend"in w?w.onloadend=v:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(v)},w.onabort=function(){w&&(r(new xe("Request aborted",xe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||uk;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new xe(S,E.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&V.forEach(o.toJSON(),function(S,E){w.setRequestHeader(E,S)}),V.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),a&&a!=="json"&&(w.responseType=i.responseType),c&&([f,g]=Iu(c,!0),w.addEventListener("progress",f)),l&&w.upload&&([h,p]=Iu(l),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=b=>{w&&(r(!b||b.type?new zo(null,t,w):b),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=JI(i.url);if(x&&Tt.protocols.indexOf(x)===-1){r(new xe("Unsupported protocol "+x+":",xe.ERR_BAD_REQUEST,t));return}w.send(s||null)})},lL=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof xe?u:new zo(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>V.asap(a),l}},cL=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},uL=async function*(t,e){for await(const n of dL(t))yield*cL(n,e)},dL=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Mx=(t,e,n,r)=>{const i=uL(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let f=s+=h;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},kd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gk=kd&&typeof ReadableStream=="function",hL=kd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),vk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fL=gk&&vk(()=>{let t=!1;const e=new Request(Tt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Ix=64*1024,Fp=gk&&vk(()=>V.isReadableStream(new Response("").body)),Lu={stream:Fp&&(t=>t.body)};kd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Lu[e]&&(Lu[e]=V.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,r)})})})(new Response);const pL=async t=>{if(t==null)return 0;if(V.isBlob(t))return t.size;if(V.isSpecCompliantForm(t))return(await new Request(Tt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(V.isArrayBufferView(t)||V.isArrayBuffer(t))return t.byteLength;if(V.isURLSearchParams(t)&&(t=t+""),V.isString(t))return(await hL(t)).byteLength},mL=async(t,e)=>{const n=V.toFiniteNumber(t.getContentLength());return n??pL(e)},gL=kd&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=mk(t);c=c?(c+"").toLowerCase():"text";let p=lL([i,s&&s.toAbortSignal()],o),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let w;try{if(l&&fL&&n!=="get"&&n!=="head"&&(w=await mL(u,r))!==0){let E=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(V.isFormData(r)&&(C=E.headers.get("content-type"))&&u.setContentType(C),E.body){const[_,P]=Px(w,Iu(jx(l)));r=Mx(E.body,Ix,_,P)}}V.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?h:void 0});let x=await fetch(g);const b=Fp&&(c==="stream"||c==="response");if(Fp&&(a||b&&m)){const E={};["status","statusText","headers"].forEach(L=>{E[L]=x[L]});const C=V.toFiniteNumber(x.headers.get("content-length")),[_,P]=a&&Px(C,Iu(jx(a),!0))||[];x=new Response(Mx(x.body,Ix,_,()=>{P&&P(),m&&m()}),E)}c=c||"text";let S=await Lu[V.findKey(Lu,c)||"text"](x,t);return!b&&m&&m(),await new Promise((E,C)=>{fk(E,C,{data:S,headers:Kt.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:g})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,t,g),{cause:v.cause||v}):xe.from(v,v&&v.code,t,g)}}),Bp={http:jI,xhr:aL,fetch:gL};V.forEach(Bp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Lx=t=>`- ${t}`,vL=t=>V.isFunction(t)||t===null||t===!1,yk={getAdapter:t=>{t=V.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!vL(n)&&(r=Bp[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Lx).join(`
`):" "+Lx(s[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Bp};function Uh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zo(null,t)}function Ox(t){return Uh(t),t.headers=Kt.from(t.headers),t.data=Vh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yk.getAdapter(t.adapter||Ol.adapter)(t).then(function(r){return Uh(t),r.data=Vh.call(t,t.transformResponse,r),r.headers=Kt.from(r.headers),r},function(r){return hk(r)||(Uh(t),r&&r.response&&(r.response.data=Vh.call(t,t.transformResponse,r.response),r.response.headers=Kt.from(r.response.headers))),Promise.reject(r)})}const xk="1.8.4",Cd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Cd[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Dx={};Cd.transitional=function(e,n,r){function i(s,o){return"[Axios v"+xk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new xe(i(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!Dx[o]&&(Dx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Cd.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function yL(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new xe("option "+s+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+s,xe.ERR_BAD_OPTION)}}const Yc={assertOptions:yL,validators:Cd},Gn=Yc.validators;let Ki=class{constructor(e){this.defaults=e,this.interceptors={request:new Tx,response:new Tx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=is(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Yc.assertOptions(r,{silentJSONParsing:Gn.transitional(Gn.boolean),forcedJSONParsing:Gn.transitional(Gn.boolean),clarifyTimeoutError:Gn.transitional(Gn.boolean)},!1),i!=null&&(V.isFunction(i)?n.paramsSerializer={serialize:i}:Yc.assertOptions(i,{encode:Gn.function,serialize:Gn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Yc.assertOptions(n,{baseUrl:Gn.spelling("baseURL"),withXsrfToken:Gn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[n.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=Kt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!l){const g=[Ox.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(n);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let p=n;for(h=0;h<f;){const g=a[h++],m=a[h++];try{p=g(p)}catch(w){m.call(this,w);break}}try{u=Ox.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=is(this.defaults,e);const n=pk(e.baseURL,e.url,e.allowAbsoluteUrls);return ck(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){Ki.prototype[e]=function(n,r){return this.request(is(r||{},{method:e,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(is(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ki.prototype[e]=n(),Ki.prototype[e+"Form"]=n(!0)});let xL=class wk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new zo(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new wk(function(i){e=i}),cancel:e}}};function wL(t){return function(n){return t.apply(null,n)}}function bL(t){return V.isObject(t)&&t.isAxiosError===!0}const Vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vp).forEach(([t,e])=>{Vp[e]=t});function bk(t){const e=new Ki(t),n=QS(Ki.prototype.request,e);return V.extend(n,Ki.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return bk(is(t,i))},n}const it=bk(Ol);it.Axios=Ki;it.CanceledError=zo;it.CancelToken=xL;it.isCancel=hk;it.VERSION=xk;it.toFormData=Sd;it.AxiosError=xe;it.Cancel=it.CanceledError;it.all=function(e){return Promise.all(e)};it.spread=wL;it.isAxiosError=bL;it.mergeConfig=is;it.AxiosHeaders=Kt;it.formToJSON=t=>dk(V.isHTMLForm(t)?new FormData(t):t);it.getAdapter=yk.getAdapter;it.HttpStatusCode=Vp;it.default=it;const{Axios:C8,AxiosError:E8,CanceledError:N8,isCancel:_8,CancelToken:T8,VERSION:A8,all:P8,Cancel:j8,isAxiosError:R8,spread:M8,toFormData:I8,AxiosHeaders:L8,HttpStatusCode:O8,formToJSON:D8,getAdapter:$8,mergeConfig:z8}=it,SL={};function xs(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const wl=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return wl(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return wl(r)(n)}}}},kL=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,v)=>({...v,...w}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...w)},r,i);const u=wl(s.serialize),h=()=>{const w=s.partialize({...r()});let v;const x=u({state:w,version:s.version}).then(b=>c.setItem(s.name,b)).catch(b=>{v=b});if(v)throw v;return x},f=i.setState;i.setState=(w,v)=>{f(w,v),h()};const p=t((...w)=>{n(...w),h()},r,i);let g;const m=()=>{var w;if(!c)return;o=!1,a.forEach(x=>x(r()));const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return wl(c.getItem.bind(c))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return g=s.merge(x,(b=r())!=null?b:p),n(g,!0),h()}).then(()=>{v==null||v(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(c=w.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:w=>(a.add(w),()=>{a.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},m(),g||p},CL=(t,e)=>(n,r,i)=>{let s={storage:xs(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=()=>{const m=s.partialize({...r()});return c.setItem(s.name,{state:m,version:s.version})},h=i.setState;i.setState=(m,w)=>{h(m,w),u()};const f=t((...m)=>{n(...m),u()},r,i);i.getInitialState=()=>f;let p;const g=()=>{var m,w;if(!c)return;o=!1,a.forEach(x=>{var b;return x((b=r())!=null?b:f)});const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(m=r())!=null?m:f))||void 0;return wl(c.getItem.bind(c))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[S,E]=x;if(p=s.merge(E,(b=r())!=null?b:f),n(p,!0),S)return u()}).then(()=>{v==null||v(p,void 0),p=r(),o=!0,l.forEach(x=>x(p))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},s.skipHydration||g(),p||f},EL=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((SL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),kL(t,e)):CL(t,e),Fo=EL;class va extends Error{}va.prototype.name="InvalidTokenError";function NL(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function _L(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return NL(e)}catch{return atob(e)}}function $x(t,e){if(typeof t!="string")throw new va("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new va(`Invalid token specified: missing part #${n+1}`);let i;try{i=_L(r)}catch(s){throw new va(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new va(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const er=pr()(Fo(t=>({isAdminAuthenticated:!1,isLoading:!0,login:()=>{k.log("[AdminAuthStore] Setting isAdminAuthenticated to true."),t({isAdminAuthenticated:!0,isLoading:!1})},logout:()=>{k.log("[AdminAuthStore] Setting isAdminAuthenticated to false."),t({isAdminAuthenticated:!1,isLoading:!1})}}),{name:"admin-auth-storage",storage:xs(()=>sessionStorage),onRehydrateStorage:()=>t=>{k.log("[AdminAuthStore] onRehydrateStorage: Hydration complete."),t?(t.isLoading=!1,k.log(`[AdminAuthStore] onRehydrateStorage: State initialized. isLoading: ${t.isLoading}, isAdminAuthenticated: ${t.isAdminAuthenticated}`)):(k.warn("[AdminAuthStore] onRehydrateStorage: Rehydrated state is null."),er.setState({isLoading:!1,isAdminAuthenticated:!1}))},partialize:t=>({isAdminAuthenticated:t.isAdminAuthenticated})})),lt=(t,e)=>{if(!t||typeof t.data>"u")return k.error("[API Helper handleApiResponse] Invalid/Undefined Response Structure:",t),{isSuccess:!1,errorMessage:e,resultObject:null};const n=t.data;if(n===null||typeof n.isSuccess!="boolean"){if(n===null&&t.status>=200&&t.status<300)return k.warn(`[API Helper handleApiResponse] Received null data with success status (${t.status}), assuming success with null result.`),{isSuccess:!0,errorMessage:null,resultObject:null};k.error("[API Helper handleApiResponse] Invalid Response Data Structure (missing isSuccess or data is null unexpectedly):",n);let r=e;return n&&typeof n=="object"?r=n.errorMessage||n.title||n.message||e:typeof n=="string"&&n.length>0&&n.length<200?r=n:t!=null&&t.statusText&&(r=t.statusText),{isSuccess:!1,errorMessage:r,resultObject:null}}return!n.isSuccess&&n.errorMessage===null&&(k.warn("[API Helper handleApiResponse] Response has isSuccess: false but errorMessage is null. Using default:",e),n.errorMessage=e),n.isSuccess&&typeof n.resultObject>"u"&&(k.warn("[API Helper handleApiResponse] Response has isSuccess: true but resultObject is undefined. Setting to null."),n.resultObject=null),n},ct=(t,e)=>{k.error(`[API Helper handleError] ${e}:`,t);let n=e;if((t==null?void 0:t.name)==="AbortError")return k.log("[API Helper handleError] Request aborted by client."),n="Запрос отменен.",{isSuccess:!1,errorMessage:n,resultObject:null};if(t!=null&&t.response){const r=t.response.status,i=t.response.data,s=t.response.statusText;if(k.warn(`[API Helper handleError] Server responded with status ${r}:`,i),i)if(i.errorMessage)n=i.errorMessage;else if(i.title)n=i.title;else if(i.message)n=i.message;else if(i.errors&&typeof i.errors=="object"){const o=Object.keys(i.errors)[0];o&&Array.isArray(i.errors[o])&&i.errors[o].length>0?n=i.errors[o][0]:n=`Ошибка валидации (статус ${r}).`}else typeof i=="string"&&i.length>0&&i.length<300?n=i:s?n=`Ошибка сервера (${r}): ${s}`:n=`Ошибка сервера (${r}).`;else s?n=`Ошибка сервера (${r}): ${s}`:n=`Ошибка сервера (${r}).`;r===401?n="Ошибка авторизации. Пожалуйста, войдите снова.":r===403?n="Доступ запрещен.":r===400&&n.toLowerCase().includes("недостаточно средств")?n="Недостаточно средств на счете.":r===400&&n.toLowerCase().includes("недостаточно активов")?n="Недостаточно активов для продажи.":r===500&&(n="Внутренняя ошибка сервера. Попробуйте позже.")}else t!=null&&t.request?(k.warn("[API Helper handleError] No response received (Network Error? Backend Down?):",t.request),n="Ошибка сети или сервер недоступен."):t instanceof Error?(k.warn("[API Helper handleError] Request setup or other JS error:",t.message),n=t.message||e):typeof t=="string"?n=t:t!=null&&t.errorMessage&&(n=t.errorMessage);return k.error(`[API Helper handleError] Final error message: ${n}`),{isSuccess:!1,errorMessage:n,resultObject:null}},TL=async t=>{var n,r,i;const e="Failed to fetch accounts.";k.log("[API/Portfolio] Fetching broker accounts...");try{const s=await et.get("/api/BrokerAccountUser/GetMyBrokerAccounts",{signal:t==null?void 0:t.signal});k.log("[API/Portfolio] Fetched accounts RAW response data:",s==null?void 0:s.data);let o=null;(n=s==null?void 0:s.data)!=null&&n.isSuccess&&s.data.resultObject?(o=s.data.resultObject.map(c=>{if(!c.portfolioItems)return{...c,portfolioItems:[]};const u=c.portfolioItems.map(h=>{if(h.asset&&typeof h.asset=="object"){const f=h.asset;let p;if(typeof f.outOfCirculationAt=="string"?p=f.outOfCirculationAt:typeof f.OutOfCirculationAt=="string"&&(p=f.OutOfCirculationAt,k.warn(`[API/Portfolio Normalization] Found 'OutOfCirculationAt' (uppercase O) for ${f.ticker}. Normalizing.`)),p!==void 0){const g={...h.asset,outOfCirculationAt:p};return delete g.OutOfCirculationAt,{...h,asset:g}}}return h});return{...c,portfolioItems:u}}),o&&o.forEach(c=>{var u;(u=c.portfolioItems)==null||u.forEach(h=>{var f;((f=h.asset)==null?void 0:f.ticker)==="SU26207RMFS9"&&k.warn(`[API/Portfolio NORMALIZED Check - TARGET] Ticker: ${h.asset.ticker}, Normalized outOfCirculationAt: ${h.asset.outOfCirculationAt} (Type: ${typeof h.asset.outOfCirculationAt})`,h.asset)})})):(r=s==null?void 0:s.data)!=null&&r.isSuccess&&s.data.resultObject===null&&(o=null);const a=s?{...s,data:s.data?{...s.data,resultObject:o}:null}:null,l=lt(a,e);return l.isSuccess&&l.resultObject===null?(k.warn("[API/Portfolio] GetMyBrokerAccounts returned success but resultObject is null. Normalizing to an empty array []."),l.resultObject=[]):l.isSuccess&&l.resultObject&&(l.resultObject=l.resultObject.map(c=>({...c,portfolioItems:c.portfolioItems||[]}))),k.log("[API/Portfolio] Processed accounts:",l.isSuccess?`Success, ${((i=l.resultObject)==null?void 0:i.length)??0} accounts`:`Error: ${l.errorMessage}`),l}catch(s){return ct(s,e)}},AL=async()=>{const t="Failed to create account.";k.log("[API/Portfolio] Attempting to create initial broker account...");try{const e=await et.post("/api/BrokerAccountUser/CreateMyInitialBrokerAccount");return k.log("[API/Portfolio] Create account raw response data:",e==null?void 0:e.data),lt(e,t)}catch(e){return ct(e,t)}},dr=pr((t,e)=>({accounts:null,isLoading:!1,error:null,isFetching:!1,hasAttemptedFetch:!1,fetchPortfolio:async(n=!1)=>{if(!n&&e().isFetching){k.log("[PortfolioStore] Fetch already in progress. Skipping.");return}k.log(`[PortfolioStore] Starting fetchPortfolio (force=${n})...`),t(o=>({isLoading:n||o.accounts===null,error:null,isFetching:!0,hasAttemptedFetch:!0}));const i=new AbortController().signal;let s=null;try{const o=await TL({signal:i});if(k.log("[PortfolioStore] Accounts API response received:",o==null?void 0:o.isSuccess),i.aborted){k.log("[PortfolioStore] Fetch aborted before state update."),t({isFetching:!1});return}if(!o||typeof o.isSuccess!="boolean")throw new Error("Invalid response structure from getMyBrokerAccounts API.");if(o.isSuccess){const a=o.resultObject||[];k.log("[PortfolioStore] Data before setting state:",a),a.forEach(l=>{var c;(c=l.portfolioItems)==null||c.forEach(u=>{var h;((h=u.asset)==null?void 0:h.ticker)==="SU26207RMFS9"&&k.log(`[PortfolioStore] Storing asset ${u.asset.ticker} with outOfCirculationAt: ${u.asset.outOfCirculationAt}`,u.asset)})}),t({accounts:a,error:null}),k.log(`[PortfolioStore] Accounts updated successfully: ${a.length} accounts.`)}else s=o.errorMessage||"Failed to load portfolio data.",t({accounts:null,error:s})}catch(o){if(o.name==="AbortError"){k.log("[PortfolioStore] Fetch exception: Aborted."),t({isFetching:!1,isLoading:e().accounts===null});return}s=o.message||"Unexpected error fetching portfolio.",k.error("[PortfolioStore] Fetch exception:",o),t({accounts:null,error:s})}finally{i.aborted||(t({isLoading:!1,isFetching:!1}),k.log(`[PortfolioStore] Fetch finished. isLoading: false, isFetching: false, error: ${e().error}`))}}})),Sk=async t=>{const e="Login failed.";if(typeof t!="string"||t.length===0)return k.error("[API/Auth] Invalid initDataString received:",t),{isSuccess:!1,errorMessage:"Invalid initData provided to API call",resultObject:null};const n=`tma ${t}`;k.log("[API/Auth] Sending request body (first 60 chars):",n.substring(0,60)+"...");try{const r=await et.post("/Account/LoginByTelegramUserInfo",n,{headers:{"Content-Type":"text/plain"}});return k.log("[API/Auth loginByTelegramUserInfo] Response received:",r==null?void 0:r.data),lt(r,e)}catch(r){return ct(r,e)}},PL=async(t,e)=>{const n="Admin login failed.",r={Login:t,Password:e};k.log("[API/Auth loginByLoginPassword] Attempting login with:",{login:t,password:"***"});try{const i=await et.post("/Account/LoginByLogPassPair",r);return k.log("[API/Auth loginByLoginPassword] Raw API Response:",i),lt(i,n)}catch(i){return ct(i,n)}},jL=1,Mt=pr()(Fo((t,e)=>({userId:null,jwt:null,initDataString:null,isAuthenticated:!1,isLoading:!0,refreshTimeoutId:null,_checkAdminRole:n=>{if(!n)return!1;try{const r=$x(n),i=r["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||r.role;if(i)return Array.isArray(i)?i.includes("Administrator"):i==="Administrator"}catch(r){k.error("[AuthStore _checkAdminRole] Failed to decode JWT:",r)}return!1},cancelTokenRefresh:()=>{const n=e().refreshTimeoutId;n&&(clearTimeout(n),t({refreshTimeoutId:null}),k.log("[AuthStore cancelTokenRefresh] Token refresh cancelled."))},scheduleTokenRefresh:n=>{e().cancelTokenRefresh();try{const i=$x(n).exp;if(!i){k.warn("[AuthStore scheduleTokenRefresh] JWT does not contain 'exp' claim. Cannot schedule refresh.");return}const s=Math.floor(Date.now()/1e3),o=i-s;let l=(i-jL*60-s)*1e3;if(l<=0)if(o>10)k.warn(`[AuthStore scheduleTokenRefresh] Refresh time already passed or too close (expires in ${o}s). Refreshing immediately.`),l=500;else{k.error(`[AuthStore scheduleTokenRefresh] Token already expired or expires in less than 10s (expires in ${o}s). Logging out.`),e().logout();return}k.log(`[AuthStore scheduleTokenRefresh] Scheduling token refresh in ${Math.round(l/1e3)}s. Token expires in ${o}s.`);const c=setTimeout(()=>{e().isAuthenticated?(k.log("[AuthStore Refresh Timeout] Timer fired. Calling refreshToken()."),e().refreshToken()):(k.log("[AuthStore Refresh Timeout] Timer fired but user is not authenticated. Cancelling."),e().cancelTokenRefresh())},l);t({refreshTimeoutId:c})}catch(r){k.error("[AuthStore scheduleTokenRefresh] Failed to decode JWT or schedule refresh:",r),e().logout()}},refreshToken:async()=>{var r;k.log("[AuthStore refreshToken] Attempting refresh via login endpoint...");const n=e().initDataString;if(!n){k.error("[AuthStore refreshToken] Cannot refresh token, initDataString is missing. Logging out."),e().logout();return}try{const i=await Sk(n);if(i.isSuccess&&((r=i.resultObject)!=null&&r.jwt)){const s=i.resultObject.jwt;k.log("[AuthStore refreshToken] Token refresh via login endpoint successful."),e()._setRefreshedToken(s)}else k.error("[AuthStore refreshToken] API refresh via login endpoint failed:",i.errorMessage),e().logout()}catch(i){k.error("[AuthStore refreshToken] Exception during refresh via login endpoint:",i),e().logout()}},_setRefreshedToken:n=>{if(k.log("[AuthStore _setRefreshedToken] Updating JWT and rescheduling refresh."),e().cancelTokenRefresh(),!e().userId){k.error("[AuthStore _setRefreshedToken] Cannot set refreshed token, current userId is null. Logging out."),e().logout();return}t({jwt:n,isAuthenticated:!0,isLoading:!1}),e().scheduleTokenRefresh(n);const i=e()._checkAdminRole(n),s=er.getState();i&&!s.isAdminAuthenticated?s.login():!i&&s.isAdminAuthenticated&&s.logout()},login:(n,r,i)=>{k.log("[AuthStore] Login action called."),e().cancelTokenRefresh();const s=e()._checkAdminRole(r);k.log(`[AuthStore] User ${n} logged in. Is admin: ${s}. Storing initData: ${i?"Yes":"No"}`),t({userId:n,jwt:r,initDataString:i,isAuthenticated:!0,isLoading:!1});const o=er.getState();s?o.isAdminAuthenticated||(k.log("[AuthStore login] Calling adminAuthStore.login()"),o.login()):o.isAdminAuthenticated&&(k.log("[AuthStore login] User is not admin, calling adminAuthStore.logout()"),o.logout()),dr.setState({hasAttemptedFetch:!1}),k.log("[AuthStore login] Reset portfolio hasAttemptedFetch flag."),e().scheduleTokenRefresh(r)},logout:()=>{k.log("[AuthStore] Logout action called."),e().cancelTokenRefresh(),t({userId:null,jwt:null,initDataString:null,isAuthenticated:!1,isLoading:!1,refreshTimeoutId:null});const n=er.getState();n.isAdminAuthenticated&&(k.log("[AuthStore logout] Calling adminAuthStore.logout()"),n.logout()),dr.setState({accounts:null,error:null,isFetching:!1,hasAttemptedFetch:!1,isLoading:!1}),k.log("[AuthStore logout] Reset portfolio state.")}}),{name:"auth-storage",storage:xs(()=>sessionStorage),onRehydrateStorage:()=>(t,e)=>{if(e){k.error("[AuthStore] onRehydrateStorage: Error during hydration:",e),t?t.isLoading=!1:Mt.setState({isLoading:!1,isAuthenticated:!1});return}if(k.log("[AuthStore] onRehydrateStorage: Hydration start."),t){if(t.jwt&&t.initDataString){const n=t._checkAdminRole(t.jwt);k.log(`[AuthStore] onRehydrateStorage: JWT and initData found. Is admin: ${n}`),t.isAuthenticated=!0;const r=er.getState();n?r.isAdminAuthenticated||(k.log("[AuthStore onRehydrate] Calling adminAuthStore.login()"),r.login()):r.isAdminAuthenticated&&(k.log("[AuthStore onRehydrate] User is not admin, calling adminAuthStore.logout()"),r.logout()),setTimeout(()=>{Mt.getState().jwt===t.jwt&&Mt.getState().scheduleTokenRefresh(t.jwt)},0)}else k.warn("[AuthStore] onRehydrateStorage: JWT or initDataString not found. Clearing auth state."),t.isAuthenticated=!1,t.userId=null,t.jwt=null,t.initDataString=null,er.getState().logout();t.isLoading=!1,k.log(`[AuthStore] onRehydrateStorage: Hydration finished. isLoading: ${t.isLoading}, isAuthenticated: ${t.isAuthenticated}`)}else k.warn("[AuthStore] onRehydrateStorage: State is undefined after hydration."),Mt.setState({isLoading:!1,isAuthenticated:!1})},partialize:t=>({userId:t.userId,jwt:t.jwt,initDataString:t.initDataString})})),RL=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Mt},Symbol.toStringTag,{value:"Module"})),et=it.create({});et.interceptors.request.use(t=>{if(!t.baseURL)try{const r=ys();t.baseURL=r.apiUrl}catch(r){return k.error("[API Interceptor] Failed to get config to set baseURL:",r),Promise.reject(new Error("Configuration not loaded, cannot set API base URL."))}const e=Mt.getState().jwt,n=t.url==="/Account/LoginByTelegramUserInfo"||t.url==="/Account/LoginByLogPassPair";return e&&!n?t.headers.Authorization=`Bearer ${e}`:!e&&!n&&k.warn(`[API Interceptor] No token found for protected URL: ${t.url}`),t.url==="/Account/LoginByTelegramUserInfo"&&typeof t.data=="string"&&(t.headers["Content-Type"]="text/plain"),t},t=>(k.error("[Axios Interceptor] Request Setup Error:",t),Promise.reject(t)));et.interceptors.response.use(t=>t,t=>{var e,n,r;if(t.response){if(k.error(`[Axios Interceptor] Response Error ${t.response.status} for ${(e=t.config)==null?void 0:e.url}:`,t.response.data),t.response.status===401)return k.error("[Axios Interceptor] Unauthorized (401). Logging out."),Mt.getState().logout(),Promise.reject(new Error("Unauthorized: Please log in again."));const i=((n=t.response.data)==null?void 0:n.errorMessage)||((r=t.response.data)==null?void 0:r.title)||(typeof t.response.data=="string"?t.response.data:null)||t.response.statusText||`Request failed with status ${t.response.status}`;return Promise.reject(new Error(i))}else return t.request?(k.error("[Axios Interceptor] No response received (Network Error? Backend Down?):",t.request),Promise.reject(new Error("Network error or backend unavailable."))):(k.error("[Axios Interceptor] Request setup error:",t.message),Promise.reject(new Error(t.message||"Request setup error")))});var kk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",f="quarter",p="year",g="date",m="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var $=["th","st","nd","rd"],D=I%100;return"["+I+($[(D-20)%10]||$[D]||$[0])+"]"}},b=function(I,$,D){var F=String(I);return!F||F.length>=$?I:""+Array($+1-F.length).join(D)+I},S={s:b,z:function(I){var $=-I.utcOffset(),D=Math.abs($),F=Math.floor(D/60),T=D%60;return($<=0?"+":"-")+b(F,2,"0")+":"+b(T,2,"0")},m:function I($,D){if($.date()<D.date())return-I(D,$);var F=12*(D.year()-$.year())+(D.month()-$.month()),T=$.clone().add(F,h),O=D-T<0,N=$.clone().add(F+(O?-1:1),h);return+(-(F+(D-T)/(O?T-N:N-T))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:h,y:p,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:f}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},E="en",C={};C[E]=x;var _="$isDayjsObject",P=function(I){return I instanceof z||!(!I||!I[_])},L=function I($,D,F){var T;if(!$)return E;if(typeof $=="string"){var O=$.toLowerCase();C[O]&&(T=O),D&&(C[O]=D,T=O);var N=$.split("-");if(!T&&N.length>1)return I(N[0])}else{var B=$.name;C[B]=$,T=B}return!F&&T&&(E=T),T||!F&&E},j=function(I,$){if(P(I))return I.clone();var D=typeof $=="object"?$:{};return D.date=I,D.args=arguments,new z(D)},M=S;M.l=L,M.i=P,M.w=function(I,$){return j(I,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var z=function(){function I(D){this.$L=L(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[_]=!0}var $=I.prototype;return $.parse=function(D){this.$d=function(F){var T=F.date,O=F.utc;if(T===null)return new Date(NaN);if(M.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var N=T.match(w);if(N){var B=N[2]-1||0,Q=(N[7]||"0").substring(0,3);return O?new Date(Date.UTC(N[1],B,N[3]||1,N[4]||0,N[5]||0,N[6]||0,Q)):new Date(N[1],B,N[3]||1,N[4]||0,N[5]||0,N[6]||0,Q)}}return new Date(T)}(D),this.init()},$.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},$.$utils=function(){return M},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(D,F){var T=j(D);return this.startOf(F)<=T&&T<=this.endOf(F)},$.isAfter=function(D,F){return j(D)<this.startOf(F)},$.isBefore=function(D,F){return this.endOf(F)<j(D)},$.$g=function(D,F,T){return M.u(D)?this[F]:this.set(T,D)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(D,F){var T=this,O=!!M.u(F)||F,N=M.p(D),B=function(H,q){var ne=M.w(T.$u?Date.UTC(T.$y,q,H):new Date(T.$y,q,H),T);return O?ne:ne.endOf(c)},Q=function(H,q){return M.w(T.toDate()[H].apply(T.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(q)),T)},A=this.$W,J=this.$M,le=this.$D,ce="set"+(this.$u?"UTC":"");switch(N){case p:return O?B(1,0):B(31,11);case h:return O?B(1,J):B(0,J+1);case u:var X=this.$locale().weekStart||0,se=(A<X?A+7:A)-X;return B(O?le-se:le+(6-se),J);case c:case g:return Q(ce+"Hours",0);case l:return Q(ce+"Minutes",1);case a:return Q(ce+"Seconds",2);case o:return Q(ce+"Milliseconds",3);default:return this.clone()}},$.endOf=function(D){return this.startOf(D,!1)},$.$set=function(D,F){var T,O=M.p(D),N="set"+(this.$u?"UTC":""),B=(T={},T[c]=N+"Date",T[g]=N+"Date",T[h]=N+"Month",T[p]=N+"FullYear",T[l]=N+"Hours",T[a]=N+"Minutes",T[o]=N+"Seconds",T[s]=N+"Milliseconds",T)[O],Q=O===c?this.$D+(F-this.$W):F;if(O===h||O===p){var A=this.clone().set(g,1);A.$d[B](Q),A.init(),this.$d=A.set(g,Math.min(this.$D,A.daysInMonth())).$d}else B&&this.$d[B](Q);return this.init(),this},$.set=function(D,F){return this.clone().$set(D,F)},$.get=function(D){return this[M.p(D)]()},$.add=function(D,F){var T,O=this;D=Number(D);var N=M.p(F),B=function(J){var le=j(O);return M.w(le.date(le.date()+Math.round(J*D)),O)};if(N===h)return this.set(h,this.$M+D);if(N===p)return this.set(p,this.$y+D);if(N===c)return B(1);if(N===u)return B(7);var Q=(T={},T[a]=r,T[l]=i,T[o]=n,T)[N]||1,A=this.$d.getTime()+D*Q;return M.w(A,this)},$.subtract=function(D,F){return this.add(-1*D,F)},$.format=function(D){var F=this,T=this.$locale();if(!this.isValid())return T.invalidDate||m;var O=D||"YYYY-MM-DDTHH:mm:ssZ",N=M.z(this),B=this.$H,Q=this.$m,A=this.$M,J=T.weekdays,le=T.months,ce=T.meridiem,X=function(q,ne,ae,Ce){return q&&(q[ne]||q(F,O))||ae[ne].slice(0,Ce)},se=function(q){return M.s(B%12||12,q,"0")},H=ce||function(q,ne,ae){var Ce=q<12?"AM":"PM";return ae?Ce.toLowerCase():Ce};return O.replace(v,function(q,ne){return ne||function(ae){switch(ae){case"YY":return String(F.$y).slice(-2);case"YYYY":return M.s(F.$y,4,"0");case"M":return A+1;case"MM":return M.s(A+1,2,"0");case"MMM":return X(T.monthsShort,A,le,3);case"MMMM":return X(le,A);case"D":return F.$D;case"DD":return M.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return X(T.weekdaysMin,F.$W,J,2);case"ddd":return X(T.weekdaysShort,F.$W,J,3);case"dddd":return J[F.$W];case"H":return String(B);case"HH":return M.s(B,2,"0");case"h":return se(1);case"hh":return se(2);case"a":return H(B,Q,!0);case"A":return H(B,Q,!1);case"m":return String(Q);case"mm":return M.s(Q,2,"0");case"s":return String(F.$s);case"ss":return M.s(F.$s,2,"0");case"SSS":return M.s(F.$ms,3,"0");case"Z":return N}return null}(q)||N.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(D,F,T){var O,N=this,B=M.p(F),Q=j(D),A=(Q.utcOffset()-this.utcOffset())*r,J=this-Q,le=function(){return M.m(N,Q)};switch(B){case p:O=le()/12;break;case h:O=le();break;case f:O=le()/3;break;case u:O=(J-A)/6048e5;break;case c:O=(J-A)/864e5;break;case l:O=J/i;break;case a:O=J/r;break;case o:O=J/n;break;default:O=J}return T?O:M.a(O)},$.daysInMonth=function(){return this.endOf(h).$D},$.$locale=function(){return C[this.$L]},$.locale=function(D,F){if(!D)return this.$L;var T=this.clone(),O=L(D,F,!0);return O&&(T.$L=O),T},$.clone=function(){return M.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},I}(),R=z.prototype;return j.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",p],["$D",g]].forEach(function(I){R[I[1]]=function($){return this.$g($,I[0],I[1])}}),j.extend=function(I,$){return I.$i||(I($,z,j),I.$i=!0),j},j.locale=L,j.isDayjs=P,j.unix=function(I){return j(1e3*I)},j.en=C[E],j.Ls=C,j.p={},j})})(kk);var Ck=kk.exports;const Me=pn(Ck);var Ek={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var w={date:m,utc:!0,args:arguments};return new o(w)},l.utc=function(m){var w=a(this.toDate(),{locale:this.$L,utc:!0});return m?w.add(this.utcOffset(),n):w},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),c.call(this,m)};var u=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else u.call(this)};var h=l.utcOffset;l.utcOffset=function(m,w){var v=this.$utils().u;if(v(m))return this.$u?0:v(this.$offset)?h.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var C=E.match(r);if(!C)return null;var _=(""+C[0]).match(i)||["-",0,0],P=_[0],L=60*+_[1]+ +_[2];return L===0?0:P==="+"?L:-L}(m),m===null))return this;var x=Math.abs(m)<=16?60*m:m,b=this;if(w)return b.$offset=x,b.$u=m===0,b;if(m!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(x+S,n)).$offset=x,b.$x.$localOffset=S}else b=this.utc();return b};var f=l.format;l.format=function(m){var w=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,w)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var p=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=l.diff;l.diff=function(m,w,v){if(m&&this.$u===m.$u)return g.call(this,m,w,v);var x=this.local(),b=a(m).local();return g.call(x,b,w,v)}}})})(Ek);var ML=Ek.exports;const Dl=pn(ML);var Nk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,p,g){g===void 0&&(g={});var m=new Date(f),w=function(v,x){x===void 0&&(x={});var b=x.timeZoneName||"short",S=v+"|"+b,E=r[S];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[S]=E),E}(p,g);return w.formatToParts(m)},c=function(f,p){for(var g=l(f,p),m=[],w=0;w<g.length;w+=1){var v=g[w],x=v.type,b=v.value,S=n[x];S>=0&&(m[S]=parseInt(b,10))}var E=m[3],C=E===24?0:E,_=m[0]+"-"+m[1]+"-"+m[2]+" "+C+":"+m[4]+":"+m[5]+":000",P=+f;return(o.utc(_).valueOf()-(P-=P%1e3))/6e4},u=s.prototype;u.tz=function(f,p){f===void 0&&(f=a);var g,m=this.utcOffset(),w=this.toDate(),v=w.toLocaleString("en-US",{timeZone:f}),x=Math.round((w-new Date(v))/1e3/60),b=15*-Math.round(w.getTimezoneOffset()/15)-x;if(!Number(b))g=this.utcOffset(0,p);else if(g=o(v,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),p){var S=g.utcOffset();g=g.add(m-S,"minute")}return g.$x.$timezone=f,g},u.offsetName=function(f){var p=this.$x.$timezone||o.tz.guess(),g=l(this.valueOf(),p,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return g&&g.value};var h=u.startOf;u.startOf=function(f,p){if(!this.$x||!this.$x.$timezone)return h.call(this,f,p);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(g,f,p).tz(this.$x.$timezone,!0)},o.tz=function(f,p,g){var m=g&&p,w=g||p||a,v=c(+o(),w);if(typeof f!="string")return o(f).tz(w);var x=function(C,_,P){var L=C-60*_*1e3,j=c(L,P);if(_===j)return[L,_];var M=c(L-=60*(j-_)*1e3,P);return j===M?[L,j]:[C-60*Math.min(j,M)*1e3,Math.max(j,M)]}(o.utc(f,m).valueOf(),v,w),b=x[0],S=x[1],E=o(b).utcOffset(S);return E.$x.$timezone=w,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(Nk);var IL=Nk.exports;const $l=pn(IL);var _k={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},c=function(w){return(w=+w)+(w>68?1900:2e3)},u=function(w){return function(v){this[w]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(w){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var x=v.match(/([+-]|\d\d)/g),b=60*x[1]+(+x[2]||0);return b===0?0:x[0]==="+"?-b:b}(w)}],f=function(w){var v=l[w];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(w,v){var x,b=l.meridiem;if(b){for(var S=1;S<=24;S+=1)if(w.indexOf(b(S,0,v))>-1){x=S>12;break}}else x=w===(v?"pm":"PM");return x},g={A:[a,function(w){this.afternoon=p(w,!1)}],a:[a,function(w){this.afternoon=p(w,!0)}],Q:[i,function(w){this.month=3*(w-1)+1}],S:[i,function(w){this.milliseconds=100*+w}],SS:[s,function(w){this.milliseconds=10*+w}],SSS:[/\d{3}/,function(w){this.milliseconds=+w}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[s,u("day")],Do:[a,function(w){var v=l.ordinal,x=w.match(/\d+/);if(this.day=x[0],v)for(var b=1;b<=31;b+=1)v(b).replace(/\[|\]/g,"")===w&&(this.day=b)}],w:[o,u("week")],ww:[s,u("week")],M:[o,u("month")],MM:[s,u("month")],MMM:[a,function(w){var v=f("months"),x=(f("monthsShort")||v.map(function(b){return b.slice(0,3)})).indexOf(w)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[a,function(w){var v=f("months").indexOf(w)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(w){this.year=c(w)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function m(w){var v,x;v=w,x=l&&l.formats;for(var b=(w=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,M,z){var R=z&&z.toUpperCase();return M||x[z]||n[z]||x[R].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(I,$,D){return $||D.slice(1)})})).match(r),S=b.length,E=0;E<S;E+=1){var C=b[E],_=g[C],P=_&&_[0],L=_&&_[1];b[E]=L?{regex:P,parser:L}:C.replace(/^\[|\]$/g,"")}return function(j){for(var M={},z=0,R=0;z<S;z+=1){var I=b[z];if(typeof I=="string")R+=I.length;else{var $=I.regex,D=I.parser,F=j.slice(R),T=$.exec(F)[0];D.call(M,T),j=j.replace(T,"")}}return function(O){var N=O.afternoon;if(N!==void 0){var B=O.hours;N?B<12&&(O.hours+=12):B===12&&(O.hours=0),delete O.afternoon}}(M),M}}return function(w,v,x){x.p.customParseFormat=!0,w&&w.parseTwoDigitYear&&(c=w.parseTwoDigitYear);var b=v.prototype,S=b.parse;b.parse=function(E){var C=E.date,_=E.utc,P=E.args;this.$u=_;var L=P[1];if(typeof L=="string"){var j=P[2]===!0,M=P[3]===!0,z=j||M,R=P[2];M&&(R=P[2]),l=this.$locale(),!j&&R&&(l=x.Ls[R]),this.$d=function(F,T,O,N){try{if(["x","X"].indexOf(T)>-1)return new Date((T==="X"?1e3:1)*F);var B=m(T)(F),Q=B.year,A=B.month,J=B.day,le=B.hours,ce=B.minutes,X=B.seconds,se=B.milliseconds,H=B.zone,q=B.week,ne=new Date,ae=J||(Q||A?1:ne.getDate()),Ce=Q||ne.getFullYear(),Be=0;Q&&!A||(Be=A>0?A-1:ne.getMonth());var pe,De=le||0,Ve=ce||0,Yn=X||0,Bt=se||0;return H?new Date(Date.UTC(Ce,Be,ae,De,Ve,Yn,Bt+60*H.offset*1e3)):O?new Date(Date.UTC(Ce,Be,ae,De,Ve,Yn,Bt)):(pe=new Date(Ce,Be,ae,De,Ve,Yn,Bt),q&&(pe=N(pe).week(q).toDate()),pe)}catch{return new Date("")}}(C,L,_,x),this.init(),R&&R!==!0&&(this.$L=this.locale(R).$L),z&&C!=this.format(L)&&(this.$d=new Date("")),l={}}else if(L instanceof Array)for(var I=L.length,$=1;$<=I;$+=1){P[1]=L[$-1];var D=x.apply(this,P);if(D.isValid()){this.$d=D.$d,this.$L=D.$L,this.init();break}$===I&&(this.$d=new Date(""))}else S.call(this,E)}}})})(_k);var LL=_k.exports;const OL=pn(LL);Me.extend(Dl);Me.extend($l);Me.extend(OL);const DL=async(t,e)=>{const n={pageNumber:t.pageNumber??1,pageItemsCount:t.pageItemsCount??30,searchString:t.searchString||null,assetTypes:t.assetTypes||null},r="Failed to search assets.";try{const i=await et.post("/api/BrokerAccountUser/SearchAssets",n,{signal:e==null?void 0:e.signal}),s=lt(i,r);return s.isSuccess&&(s.resultObject?s.resultObject.assets=s.resultObject.assets||[]:(k.warn("[API/Assets] searchAssets success but resultObject is null. Normalizing."),s.resultObject={searchAssetsParameters:n,foundCount:0,assets:[]})),s}catch(i){return ct(i,r)}},Tk=async(t,e)=>{const n=`Failed to get asset with ID ${t}.`;k.log(`[API/Assets] Fetching asset by ID: ${t}`);try{const r=await et.get(`/api/Assets/${t}`,{signal:e==null?void 0:e.signal});return lt(r,n)}catch(r){return ct(r,n)}},Ak=async t=>{const e="Failed to get asset types.";try{const n=await et.get("/api/BrokerAccountUser/GetAllAssetTypes",{signal:t==null?void 0:t.signal}),r=lt(n,e);return r.isSuccess&&r.resultObject===null&&(k.warn("[API/Assets] getAllAssetTypes success but resultObject is null. Normalizing to empty array."),r.resultObject=[]),r}catch(n){return ct(n,e)}},$L=async(t,e)=>{const n="Failed to get last prices.";if(!t||t.length===0)return k.log("[API/Assets] getLastPrices called with empty tickers, returning empty array."),{isSuccess:!0,errorMessage:null,resultObject:[]};try{const r=await et.get("/api/BrokerAccountUser/GetLastPrices",{params:{assetTickers:t.join(",")},signal:e==null?void 0:e.signal}),i=lt(r,n);return i.isSuccess&&i.resultObject===null&&(k.warn("[API/Assets] getLastPrices success but resultObject is null. Normalizing to empty array."),i.resultObject=[]),i}catch(r){return ct(r,n)}},Pk=async(t,e,n)=>{var u,h;const r=`Failed to get price history for asset ${t}, period ${e}.`;k.log(`[API/Assets] getPriceHistory called for asset ${t}, period ${e}. Requesting from backend...`);const i=Me();let s,o;switch(e){case"1D":s=i.startOf("day"),o=i.endOf("day");break;case"1W":s=i.subtract(1,"week").startOf("day"),o=i.endOf("day");break;case"1M":s=i.subtract(1,"month").startOf("day"),o=i.endOf("day");break;case"1Y":s=i.subtract(1,"year").startOf("day"),o=i.endOf("day");break;case"5Y":s=i.subtract(5,"year").startOf("day"),o=i.endOf("day");break;case"ALL":s=i.subtract(20,"year").startOf("day"),o=i.endOf("day");break;default:k.warn(`[API/Assets getPriceHistory] Unknown period: ${e}. Defaulting to 1M.`),s=i.subtract(1,"month").startOf("day"),o=i.endOf("day")}const a=s.format("YYYY-MM-DDTHH:mm:ss"),l=o.format("YYYY-MM-DDTHH:mm:ss");k.log(`[API/Assets getPriceHistory] Requesting backend with AssetId: ${t}, From: ${a}, Till: ${l}`);const c={AssetId:t,From:a,Till:l};try{const f=await et.post("/api/Assets/GetPriceDataForFrontChartFromMoex",c,{signal:n==null?void 0:n.signal}),p=lt(f,r);if(!p.isSuccess||!p.resultObject)return k.error("[API/Assets getPriceHistory] Backend request failed or returned null:",p.errorMessage),{isSuccess:!1,errorMessage:p.errorMessage||r,resultObject:null};const g=p.resultObject;if(!((u=g==null?void 0:g.candles)!=null&&u.columns)||!((h=g==null?void 0:g.candles)!=null&&h.data))return k.error("[API/Assets getPriceHistory] Invalid MOEX data structure:",g),{isSuccess:!1,errorMessage:"Invalid data structure received from server.",resultObject:null};const m=g.candles.columns,w=m.indexOf("begin"),v=m.indexOf("open"),x=m.indexOf("high"),b=m.indexOf("low"),S=m.indexOf("close");if(w===-1||v===-1||x===-1||b===-1||S===-1){const _=`Required columns missing in history data: ${["begin","open","high","low","close"].filter(P=>m.indexOf(P)===-1).join(", ")}`;return k.error(`[API/Assets getPriceHistory] ${_}`,m),{isSuccess:!1,errorMessage:_,resultObject:null}}const E=g.candles.data.map(C=>{const _=C[w];let P=C[v],L=C[x],j=C[b],M=C[S];if(!_||P===null||L===null||j===null||M===null||isNaN(P)||isNaN(L)||isNaN(j)||isNaN(M))return k.warn("[API/Assets getPriceHistory] Skipping row due to invalid data:",C),null;try{const R=Me.tz(_,"YYYY-MM-DD HH:mm:ss","Europe/Moscow");if(!R.isValid())return k.warn(`[API/Assets getPriceHistory] Skipping row due to invalid date string after dayjs TZ parsing: ${_}`),null;const $=R.unix(),D=Math.max(P,L,j,M),F=Math.min(P,L,j,M);return L=D,j=F,P=Math.max(j,Math.min(L,P)),M=Math.max(j,Math.min(L,M)),{time:$,open:P,high:L,low:j,close:M}}catch(z){return k.error(`[API/Assets getPriceHistory] Error converting row: ${C}`,z),null}}).filter(C=>C!==null).sort((C,_)=>C.time-_.time);return k.log(`[API/Assets getPriceHistory] Successfully processed ${E.length} history points.`),{isSuccess:!0,errorMessage:null,resultObject:E}}catch(f){return ct(f,r)}},zL=20,Ou="all",zx={searchTerm:"",activeTabValue:Ou,apiAssetTypes:null,currentPage:1,didPerformSearch:!1,marketTabs:[{value:Ou,label:"Все",apiTitles:null}],isTypesLoading:!1,typesError:null,searchResults:[],totalResults:0,isLoading:!1,error:null},kr=pr((t,e)=>({...zx,fetchMarketTabs:async(n=!1)=>{if(!n&&(e().marketTabs.length>1||e().isTypesLoading)){k.log("[MarketPageStore fetchMarketTabs] Skipped fetching tabs (already loaded or loading).");return}t({isTypesLoading:!0,typesError:null}),k.log("[MarketPageStore fetchMarketTabs] Fetching asset types...");try{const r=await Ak();if(r.isSuccess&&r.resultObject){const i=r.resultObject.filter(o=>!!o.title&&!!o.description).map(o=>({value:o.title,label:o.description,apiTitles:[o.title]})),s=[{value:Ou,label:"Все",apiTitles:null},...i];t({marketTabs:s,isTypesLoading:!1}),k.log("[MarketPageStore fetchMarketTabs] Tabs loaded successfully:",s)}else throw new Error(r.errorMessage||"Failed to load asset types.")}catch(r){k.error("[MarketPageStore fetchMarketTabs] Error:",r),t({typesError:r.message||"Error fetching types.",isTypesLoading:!1,marketTabs:[{value:Ou,label:"Все",apiTitles:null}]})}},setSearchTerm:n=>{t({searchTerm:n,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1)},setActiveTab:(n,r)=>{t({activeTabValue:n,apiAssetTypes:r,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1),k.log(`[MarketPageStore setActiveTab] Tab set to: ${n}, API types: ${JSON.stringify(r)}`)},fetchMarketAssets:async(n=!1)=>{var a;const{searchTerm:r,apiAssetTypes:i,currentPage:s}=e(),o=n?s+1:1;if(e().isLoading){k.log("[MarketPageStore fetchMarketAssets] Fetch skipped, already loading.");return}t({isLoading:!0,error:null,didPerformSearch:!0}),n||t({searchResults:[],totalResults:0}),k.log(`[MarketPageStore fetchMarketAssets] Fetching: term='${r}', types=${JSON.stringify(i)}, page=${o}, append=${n}`);try{const l={searchString:r.trim()||null,assetTypes:i,pageNumber:o,pageItemsCount:zL},c=await DL(l);if(c!=null&&c.isSuccess&&c.resultObject){const u=c.resultObject.assets||[];k.log("[MarketPageStore] Data before setting state:",u),u.forEach(h=>{(h==null?void 0:h.ticker)==="SU26207RMFS9"&&k.log(`[MarketPageStore] Asset ${h.ticker} in search results:`,h)}),t(h=>{var f;return{searchResults:n?[...h.searchResults,...u]:u,totalResults:((f=c.resultObject)==null?void 0:f.foundCount)??h.totalResults,currentPage:o,isLoading:!1,error:null}}),k.log(`[MarketPageStore fetchMarketAssets] Success. Fetched ${u.length}. New total: ${((a=c.resultObject)==null?void 0:a.foundCount)??"N/A"}. Current page: ${o}`)}else throw new Error((c==null?void 0:c.errorMessage)||"Ничего не найдено или произошла ошибка.")}catch(l){k.error("[MarketPageStore fetchMarketAssets] Fetch error:",l),t(c=>({error:l.message||"Ошибка загрузки активов.",isLoading:!1,searchResults:n?c.searchResults:[],totalResults:n?c.totalResults:0,currentPage:n?c.currentPage:1}))}},resetMarketState:()=>{k.log("[MarketPageStore] Resetting state."),t(zx)}}));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...BL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jk("lucide",i),...a},[...o.map(([c,u])=>y.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(VL,{ref:s,iconNode:e,className:jk(`lucide-${FL(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=he("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=he("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=he("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=he("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=he("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=he("CandlestickChart",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=he("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=he("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=he("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=he("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=he("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=he("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=he("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=he("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=he("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=he("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=he("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=he("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=he("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=he("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=he("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=he("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=he("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=he("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=he("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ee=({size:t="default"})=>{const e={sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8"};return d.jsx(rO,{className:`animate-spin text-primary ${e[t]}`})},gt=({message:t,className:e})=>d.jsxs("div",{className:`flex items-center text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10 ${e}`,children:[d.jsx(Rg,{className:"h-5 w-5 mr-2"}),d.jsx("span",{children:t||"ÐÑÐ¾Ð¸Ð·Ð¾ÑÐ»Ð° Ð½ÐµÐ¿ÑÐµÐ´Ð²Ð¸Ð´ÐµÐ½Ð½Ð°Ñ Ð¾ÑÐ¸Ð±ÐºÐ°."})]});function Wk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Wk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qk(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Wk(t))&&(r&&(r+=" "),r+=e);return r}const Mg="-",yO=t=>{const e=wO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Mg);return a[0]===""&&a.length!==1&&a.shift(),Yk(a,e)||xO(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Yk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Yk(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Mg);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},Vx=/^\[(.+)\]$/,xO=t=>{if(Vx.test(t)){const e=Vx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},wO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return SO(Object.entries(t.classGroups),n).forEach(([s,o])=>{Wp(o,r,s,e)}),r},Wp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Ux(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(bO(i)){Wp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Wp(o,Ux(e,s),n,r)})})},Ux=(t,e)=>{let n=t;return e.split(Mg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},bO=t=>t.isThemeGetter,SO=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,kO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},Kk="!",CO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===i&&(r||a.slice(w,w+s)===e)){l.push(a.slice(u,w)),u=w+s;continue}if(v==="/"){h=w;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(Kk),g=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},EO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},NO=t=>({cache:kO(t.cacheSize),parseClassName:CO(t),...yO(t)}),_O=/\s+/,TO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(_O);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let g=!!p,m=r(g?f.substring(0,p):f);if(!m){if(!g){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}g=!1}const w=EO(u).join(":"),v=h?w+Kk:w,x=v+m;if(s.includes(x))continue;s.push(x);const b=i(m,g);for(let S=0;S<b.length;++S){const E=b[S];s.push(v+E)}a=c+(a.length>0?" "+a:a)}return a};function AO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Gk(e))&&(r&&(r+=" "),r+=n);return r}const Gk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Gk(t[r]))&&(n&&(n+=" "),n+=e);return n};function PO(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=NO(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=TO(l,n);return i(l,u),u}return function(){return s(AO.apply(null,arguments))}}const Ue=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Zk=/^\[(?:([a-z-]+):)?(.+)\]$/i,jO=/^\d+\/\d+$/,RO=new Set(["px","full","screen"]),MO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xr=t=>ro(t)||RO.has(t)||jO.test(t),Yr=t=>Bo(t,"length",WO),ro=t=>!!t&&!Number.isNaN(Number(t)),Hh=t=>Bo(t,"number",ro),sa=t=>!!t&&Number.isInteger(Number(t)),$O=t=>t.endsWith("%")&&ro(t.slice(0,-1)),be=t=>Zk.test(t),Kr=t=>MO.test(t),zO=new Set(["length","size","percentage"]),FO=t=>Bo(t,zO,Xk),BO=t=>Bo(t,"position",Xk),VO=new Set(["image","url"]),UO=t=>Bo(t,VO,YO),HO=t=>Bo(t,"",qO),oa=()=>!0,Bo=(t,e,n)=>{const r=Zk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},WO=t=>IO.test(t)&&!LO.test(t),Xk=()=>!1,qO=t=>OO.test(t),YO=t=>DO.test(t),KO=()=>{const t=Ue("colors"),e=Ue("spacing"),n=Ue("blur"),r=Ue("brightness"),i=Ue("borderColor"),s=Ue("borderRadius"),o=Ue("borderSpacing"),a=Ue("borderWidth"),l=Ue("contrast"),c=Ue("grayscale"),u=Ue("hueRotate"),h=Ue("invert"),f=Ue("gap"),p=Ue("gradientColorStops"),g=Ue("gradientColorStopPositions"),m=Ue("inset"),w=Ue("margin"),v=Ue("opacity"),x=Ue("padding"),b=Ue("saturate"),S=Ue("scale"),E=Ue("sepia"),C=Ue("skew"),_=Ue("space"),P=Ue("translate"),L=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",be,e],z=()=>[be,e],R=()=>["",xr,Yr],I=()=>["auto",ro,be],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",be],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[ro,be];return{cacheSize:500,separator:":",theme:{colors:[oa],spacing:[xr,Yr],blur:["none","",Kr,be],brightness:B(),borderColor:[t],borderRadius:["none","","full",Kr,be],borderSpacing:z(),borderWidth:R(),contrast:B(),grayscale:O(),hueRotate:B(),invert:O(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[$O,Yr],inset:M(),margin:M(),opacity:B(),padding:z(),saturate:B(),scale:B(),sepia:O(),skew:B(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Kr]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),be]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sa,be]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",sa,be]}],"grid-cols":[{"grid-cols":[oa]}],"col-start-end":[{col:["auto",{span:["full",sa,be]},be]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[oa]}],"row-start-end":[{row:["auto",{span:[sa,be]},be]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Kr]},Kr]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Kr,Yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hh]}],"font-family":[{font:[oa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",ro,Hh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xr,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xr,Yr]}],"underline-offset":[{"underline-offset":["auto",xr,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),BO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:D()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[xr,be]}],"outline-w":[{outline:[xr,Yr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[xr,Yr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Kr,HO]}],"shadow-color":[{shadow:[oa]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Kr,be]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[sa,be]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[xr,Yr,Hh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},GO=PO(KO);function U(...t){return GO(qk(t))}const St=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));St.displayName="Card";const mr=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("flex flex-col space-y-1.5 p-4 md:p-6",t),...e}));mr.displayName="CardHeader";const Vr=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx("h3",{ref:r,className:U("text-lg font-semibold leading-none tracking-tight",t),...n,children:e}));Vr.displayName="CardTitle";const Nd=y.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Nd.displayName="CardDescription";const Xt=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("p-4 md:p-6 pt-0",t),...e}));Xt.displayName="CardContent";const ZO=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("flex items-center p-4 md:p-6 pt-0",t),...e}));ZO.displayName="CardFooter";const Qk=t=>new Intl.NumberFormat("ru-RU",t),oi=(t,e=2)=>{if(t===null||typeof t>"u"||isNaN(t))return"-";const n=Math.max(0,Math.min(e,20));return Qk({minimumFractionDigits:0,maximumFractionDigits:n}).format(t)},To=(t,e="₽",n=!0,r)=>{if(t===null||typeof t>"u"||isNaN(t))return"-";const i=t/100;let s=2;r!=null&&typeof r=="number"&&r>=0&&(s=Math.max(2,Math.min(r,20)));const a=Qk({minimumFractionDigits:2,maximumFractionDigits:s}).format(i);return n&&e?`${a} ${e}`:a};function hc(t){if(!t)return null;let e=t;e=e.replace(/\s*\(.*\)\s*/g," "),e=e.replace(/^["«“]|["»”]$/g,""),e=e.replace(/["«»”]/g,"");const n=["ORD SHS","ORD","SHS","гдр","ПАО","ОАО","ЗАО","ООО","АО","ап","PLC","GDR"];for(const i of n){const s=new RegExp(`\\s+${i}(?:\\b|$)`,"i");e=e.replace(s,"")}const r=["ГДР","МКПАО","i"];for(const i of r){const s=new RegExp(`^${i}(?:\\s+|(?=[A-ZА-ЯЁ]))`,"i");e=e.replace(s,"")}return e=e.trim().replace(/\s{2,}/g," "),!e||e.length<2||/^[^a-zA-Zа-яА-ЯёЁ0-9]+$/.test(e)?null:e}function Ao(t){var s;if(!t)return"N/A";if(t.displayName)return t.displayName;const e=(s=t.assetType)==null?void 0:s.title,n=t.title,r=t.shortName,i=t.ticker||"N/A";try{if(e==="currency_pair"){const l=/([A-Z]{3})\/([А-Я]{3})/i,c=(i==null?void 0:i.match(l))||(n==null?void 0:n.match(l));if(c&&c[0])return c[0].toUpperCase();const u=n==null?void 0:n.replace(/СВОП/i,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();return u&&u.includes("/")?u:i}if(e==="fund_share"){const l="БПИФ ",c="ОПИФ ";let u=n||r;return u!=null&&u.startsWith(l)?u.substring(l.length).trim():u!=null&&u.startsWith(c)?u.substring(c.length).trim():hc(n)||hc(r)||i}if(e==="currency")return n||r||i;const o=hc(r);if(o)return o;const a=hc(n);return a||i}catch(o){return k.error("Error formatting asset name:",t,o),i}}const pt=({value:t,currencySymbol:e="₽",showSign:n=!1,showColor:r=!1,includeSymbol:i=!0,className:s,valueClassName:o,signClassName:a,placeholder:l="—",asset:c,forceDecimalPlaces:u=null})=>{if(t===null||typeof t>"u"||isNaN(t))return d.jsx("span",{className:U("text-muted-foreground",s),children:l});let h=2;u!==null&&typeof u=="number"&&u>=0?(h=u,k.debug(`[PriceDisplay] Using forced decimal places: ${h} for value ${t}`)):c&&typeof c.decimals=="number"&&c.decimals>=0?(h=Math.max(2,c.decimals),k.debug(`[PriceDisplay] Using asset decimals: ${c.decimals} -> final: ${h} for value ${t}`)):(h=2,c?k.warn(`[PriceDisplay] Asset ${c.ticker} has invalid decimals: ${c.decimals}. Using default (2).`):k.debug(`[PriceDisplay] No asset or forced decimals. Using default (2) for value ${t}`));const f=To(t,null,!1,h);if(f==="-")return d.jsx("span",{className:U("text-muted-foreground",s),children:l});const p=t>0,g=t<0,m=n&&p?"+":"",w=r?p?"text-success":g?"text-destructive":"text-foreground":"";return d.jsxs("span",{className:U("inline-flex items-baseline tabular-nums-font",w,s),children:[m&&d.jsx("span",{className:U(a),children:m}),d.jsx("span",{className:U("font-medium",o),children:f}),i&&e&&d.jsx("span",{className:U("ml-0.5 text-xs align-baseline",r&&w?w:"text-muted-foreground"),children:e})]})};function io(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const XO=(t,e)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}},QO=3e4,JO=300,ya=new Map;let eD=0;const tD=()=>`price-sub-${eD++}`,Hx=()=>{const t=new Set;return ya.forEach(e=>{e.forEach(n=>t.add(n))}),t},Wh=pr((t,e)=>({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1,_debouncedFetchOnSubscriptionChange:XO(()=>{const{neededTickers:n,_fetchPricesInternal:r}=e(),i=Array.from(n);k.log(`[PriceStore _debouncedFetchOnSubscriptionChange] Triggered. Needed: ${i.length}`),i.length>0&&r(i,!1)},JO),subscribeTickers:(n,r)=>{const i=new Set(r.filter(o=>o&&o!=="RUB")),s=ya.get(n);if(!s||!io(s,i)){k.log(`[PriceStore subscribeTickers] Updating subscription for ${n} with ${i.size} tickers.`),ya.set(n,i);const o=Hx(),a=e().neededTickers;io(a,o)?(k.log("[PriceStore subscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:o}),e()._debouncedFetchOnSubscriptionChange(),e()._checkPollingStatus())}else k.log(`[PriceStore subscribeTickers] No change for ${n}, skipping update.`),e()._checkPollingStatus()},unsubscribeTickers:n=>{if(ya.delete(n)){k.log(`[PriceStore unsubscribeTickers] Removed subscription for ${n}.`);const r=Hx(),i=e().neededTickers;io(i,r)?(k.log("[PriceStore unsubscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:r}),e()._checkPollingStatus())}},_fetchPricesInternal:async(n,r=!1)=>{if(e().isLoading&&!r){k.log("[PriceStore _fetchPricesInternal] Non-poll fetch skipped, already loading.");return}if(!n||n.length===0){k.log("[PriceStore _fetchPricesInternal] No tickers provided to fetch."),e().isLoading&&!r&&t({isLoading:!1});return}r||t({isLoading:!0,error:null}),k.log(`[PriceStore _fetchPricesInternal] Fetching ${n.length} tickers... (isPoll: ${r})`);try{const i=await $L(n),s=Date.now();i.isSuccess&&i.resultObject?t(o=>{const a=new Map(o.prices);return i.resultObject.forEach(l=>a.set(l.ticker,l)),k.log(`[PriceStore _fetchPricesInternal] Success. Updated ${i.resultObject.length} prices. Total cached: ${a.size}`),{prices:a,isLoading:r?o.isLoading:!1,error:null,lastFetchTime:s}}):(k.warn("[PriceStore _fetchPricesInternal] Fetch failed:",i.errorMessage),t(o=>({error:i.errorMessage||"Failed to load prices",isLoading:r?o.isLoading:!1,lastFetchTime:s})))}catch(i){k.error("[PriceStore _fetchPricesInternal] Exception:",i),t(s=>({error:i.message||"Failed to fetch prices",isLoading:r?s.isLoading:!1,lastFetchTime:Date.now()}))}},_checkPollingStatus:()=>{const{neededTickers:n,fetchIntervalId:r,isPollingActive:i}=e(),s=n.size>0;if(s&&!i){k.log("[PriceStore _checkPollingStatus] Starting polling.");const o=setInterval(()=>{const a=e().neededTickers;a.size>0?e()._fetchPricesInternal(Array.from(a),!0):(k.warn("[PriceStore poll interval] No tickers needed, but interval still running. Stopping."),e()._checkPollingStatus())},QO);t({fetchIntervalId:o,isPollingActive:!0})}else!s&&i&&(k.log("[PriceStore _checkPollingStatus] Stopping polling."),r&&clearInterval(r),t({fetchIntervalId:null,isPollingActive:!1}))},clearAll:()=>{k.log("[PriceStore clearAll] Clearing all subscriptions and prices, stopping polling.");const{fetchIntervalId:n}=e();n&&clearInterval(n),ya.clear(),t({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1})}})),{useDebugValue:nD}=Oe,{useSyncExternalStoreWithSelector:rD}=FS,iD=t=>t;function sD(t,e=iD,n){const r=rD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return nD(r),r}const _d=t=>{const e=y.useRef(tD()).current,n=y.useMemo(()=>t.filter(c=>typeof c=="string"&&c!=="RUB"),[t]),r=Wh.getState().subscribeTickers,i=Wh.getState().unsubscribeTickers,{storePrices:s,isLoading:o,error:a}=sD(Wh,c=>({storePrices:c.prices,isLoading:c.isLoading,error:c.error}),io);return y.useEffect(()=>(k.log(`[useAssetPrices Effect ${e}] Running effect. Subscribing to:`,n),r(e,n),()=>{k.log(`[useAssetPrices Cleanup ${e}] Unsubscribing.`),i(e)}),[e,n,r,i]),{prices:y.useMemo(()=>{const c=new Map;return n.forEach(u=>{s.has(u)&&c.set(u,s.get(u))}),c},[n,s]),isLoading:o,error:a}},Jk=()=>{const{accounts:t}=dr(l=>({accounts:l.accounts})),e=y.useMemo(()=>{if(!t)return[];const l=new Set;return t.forEach(c=>{var u;(u=c.portfolioItems)==null||u.forEach(h=>{var m,w,v,x;const f=(m=h.asset)==null?void 0:m.outOfCirculationAt,p=f&&new Date(f)<new Date,g=((w=h.asset)==null?void 0:w.isTradingProhibited)===!0;(v=h.asset)!=null&&v.ticker&&h.asset.ticker!=="RUB"&&!p&&!g?l.add(h.asset.ticker):(x=h.asset)!=null&&x.ticker&&(p||g)&&k.debug(`[usePortfolioCalculations allTickers] Skipping price request for inactive/prohibited ticker: ${h.asset.ticker}`)})}),k.debug("[usePortfolioCalculations allTickers] Active/Allowed tickers for price fetching:",Array.from(l)),Array.from(l)},[t]),{prices:n,isLoading:r,error:i}=_d(e),s=y.useCallback((l,c)=>{let u=0,h=0,f=0;return Array.isArray(l)?(l.forEach(g=>{if(!(g!=null&&g.asset))return;const m=g.asset.outOfCirculationAt,w=m&&new Date(m)<new Date,v=g.asset.isTradingProhibited===!0;if(w||v){k.debug(`[usePortfolioCalculations calculateAccountTotals] Skipping calculation for inactive/prohibited asset: ${g.asset.ticker}`);return}const x=g.asset.ticker,b=g.quantity||0,S=g.averagePriceCopecks??0;if(x==="RUB")u=b;else{const E=c.get(x);if(E){const C=E.price*100,_=C*b;if(h+=_,S>0&&b>0){const P=(C-S)*b;f+=P}}else k.warn(`[usePortfolioCalculations calculateAccountTotals] Price not found for active/allowed ticker: ${x}. It won't be included in total value.`)}}),{totalValue:u+h,totalProfitLoss:f}):{totalValue:0,totalProfitLoss:0}},[]),o=y.useCallback(l=>{const c=t==null?void 0:t.find(u=>{var h;return((h=u.brokerAccount)==null?void 0:h.id)===l});return s(c==null?void 0:c.portfolioItems,n)},[t,n,s]),a=y.useMemo(()=>{if(!t)return 0;let l=0;return t.forEach(c=>{var u;if((u=c==null?void 0:c.brokerAccount)!=null&&u.id){const h=o(c.brokerAccount.id);l+=h.totalValue}}),l},[t,o]);return{prices:n,isPriceLoading:r,priceError:i,getAccountTotals:o,totalPortfolioValue:a}},oD="modulepreload",aD=function(t,e){return new URL(t,e).href},Wx={},lD=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=aD(c,r),c in Wx)return;Wx[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let g=o.length-1;g>=0;g--){const m=o[g];if(m.href===c&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":oD,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,m)=>{p.addEventListener("load",g),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},qx=async(t,e)=>{var r;const n="Failed to get notifications.";k.log("[API/Notifications] getMyNotifications called with params:",t);try{const i=await et.post("/api/UserNotifications/GetMyNotifications",t,{signal:e==null?void 0:e.signal});k.log("[API/Notifications] getMyNotifications response received:",(r=i==null?void 0:i.data)==null?void 0:r.isSuccess);const s=lt(i,n);return s.isSuccess&&(s.resultObject?s.resultObject.userNotifications=s.resultObject.userNotifications||[]:(k.warn("[API/Notifications] getMyNotifications success but resultObject is null. Normalizing."),s.resultObject={userNotificationSearchParams:t,foundCount:0,userNotifications:[]})),s}catch(i){return ct(i,n)}},cD=async(t,e)=>{var r;const n=`Failed to mark notification ${t.UserNotificationId} as read.`;k.log("[API/Notifications] markNotificationAsRead called with payload:",t);try{const i=await et.post("/api/UserNotifications/MarkMyNotificationAsRead",t,{signal:e==null?void 0:e.signal});return k.log("[API/Notifications] markNotificationAsRead response received:",(r=i==null?void 0:i.data)==null?void 0:r.isSuccess),lt(i,n)}catch(i){return ct(i,n)}},uD=async t=>{var n;const e="Failed to mark all notifications as read.";k.log("[API/Notifications] markAllNotificationsAsRead called");try{const r=await et.post("/api/UserNotifications/MarkAllMyNotificationsAsRead",null,{signal:t==null?void 0:t.signal});return k.log("[API/Notifications] markAllNotificationsAsRead response received:",(n=r==null?void 0:r.data)==null?void 0:n.isSuccess),lt(r,e)}catch(r){return ct(r,e)}},dD=20,Yx=6e4,Kx={notifications:[],unreadCount:0,totalCount:0,currentPage:1,filterReadStatus:null,isLoading:!1,isMarkingAsRead:new Set,error:null,hasFetchedInitialCount:!1,notificationsEnabled:!0,countPollingTimeoutId:null},Ci=pr()(Fo((t,e)=>({...Kx,_scheduleNextCountFetch:()=>{const{stopCountPolling:n,countPollingTimeoutId:r,notificationsEnabled:i}=e();if(r&&clearTimeout(r),i){k.log(`[NotificationStore _scheduleNextCountFetch] Scheduling next count fetch in ${Yx}ms`);const s=setTimeout(async()=>{(await lD(async()=>{const{useAuthStore:a}=await Promise.resolve().then(()=>RL);return{useAuthStore:a}},void 0,import.meta.url)).useAuthStore.getState().isAuthenticated&&e().notificationsEnabled?(k.log("[NotificationStore Polling Timeout] Fetching unread count..."),await e().fetchUnreadCount()):(k.log("[NotificationStore Polling Timeout] Not fetching (auth or enabled changed). Stopping polling."),n())},Yx);t({countPollingTimeoutId:s})}else k.log("[NotificationStore _scheduleNextCountFetch] Notifications disabled, not scheduling next fetch."),t({countPollingTimeoutId:null})},fetchUnreadCount:async(n=!1)=>{k.log(`[NotificationStore fetchUnreadCount] Fetching unread count (force=${n})...`);try{const i=await qx({PageNumber:1,PageItemsCount:0,MarkedAsRead:!1});if(i.isSuccess&&i.resultObject){const s=i.resultObject.foundCount;t({unreadCount:s,hasFetchedInitialCount:!0}),k.log(`[NotificationStore fetchUnreadCount] Success. Raw count: ${s}`)}else k.error("[NotificationStore fetchUnreadCount] Failed to fetch unread count:",i.errorMessage),e().hasFetchedInitialCount||t({hasFetchedInitialCount:!0})}catch(r){k.error("[NotificationStore fetchUnreadCount] Exception:",r),e().hasFetchedInitialCount||t({hasFetchedInitialCount:!0})}finally{e().countPollingTimeoutId!==null&&e()._scheduleNextCountFetch()}},fetchNotifications:async(n,r,i=!1)=>{var c;const{filterReadStatus:s,currentPage:o}=e(),a=n??(i?o+1:1),l=r!==void 0?r:s;if(e().isLoading){k.log("[NotificationStore fetchNotifications] Fetch skipped, already loading.");return}t({isLoading:!0,error:null}),i||t({notifications:[],totalCount:0}),k.log(`[NotificationStore fetchNotifications] Fetching: page=${a}, readStatus=${l}, append=${i}`);try{const h=await qx({PageNumber:a,PageItemsCount:dD,MarkedAsRead:l});if(h.isSuccess&&h.resultObject){const f=h.resultObject.userNotifications||[];t(p=>{var g;return{notifications:i?[...p.notifications,...f]:f,totalCount:((g=h.resultObject)==null?void 0:g.foundCount)??p.totalCount,currentPage:a,isLoading:!1,error:null}}),k.log(`[NotificationStore fetchNotifications] Success. Fetched ${f.length}. Total: ${((c=h.resultObject)==null?void 0:c.foundCount)??"N/A"}. Current page: ${a}`)}else throw new Error(h.errorMessage||"Не удалось загрузить уведомления.")}catch(u){k.error("[NotificationStore fetchNotifications] Fetch error:",u),t(h=>({error:u.message||"Ошибка загрузки уведомлений.",isLoading:!1,notifications:i?h.notifications:[],totalCount:i?h.totalCount:0,currentPage:i?h.currentPage:1}))}},markAsRead:async n=>{if(e().isMarkingAsRead.has(n))return k.log(`[NotificationStore markAsRead] Marking already in progress for ID: ${n}`),!1;t(i=>({isMarkingAsRead:new Set(i.isMarkingAsRead).add(n)})),k.log(`[NotificationStore markAsRead] Started marking ${n} as read.`);let r=!1;try{const i=await cD({UserNotificationId:n});if(i.isSuccess)k.log(`[NotificationStore markAsRead] API confirmation for ID: ${n}`),t(s=>({notifications:s.notifications.map(o=>o.id===n?{...o,readByUserAt:new Date().toISOString()}:o),unreadCount:Math.max(0,s.unreadCount-1)})),r=!0;else throw new Error(i.errorMessage||`Failed to mark notification ${n} as read.`)}catch(i){k.error(`[NotificationStore markAsRead] API error for ID ${n}:`,i),t({error:`Ошибка отметки уведомления #${n}: ${i.message}`}),r=!1}finally{t(i=>{const s=new Set(i.isMarkingAsRead);return s.delete(n),{isMarkingAsRead:s}}),k.log(`[NotificationStore markAsRead] Finished marking attempt for ${n}. Success: ${r}`)}return r},setFilter:n=>{e().filterReadStatus!==n?(k.log(`[NotificationStore setFilter] Setting filter to: ${n}`),t({filterReadStatus:n,currentPage:1}),e().fetchNotifications(1,n,!1)):k.log(`[NotificationStore setFilter] Filter already set to: ${n}. Skipping fetch.`)},goToPage:n=>{e().currentPage!==n&&!e().isLoading&&(k.log(`[NotificationStore goToPage] Going to page: ${n}`),t({currentPage:n}),e().fetchNotifications(n,e().filterReadStatus,!1))},startCountPolling:()=>{const{stopCountPolling:n,_scheduleNextCountFetch:r,notificationsEnabled:i}=e();i?(n(),k.log("[NotificationStore startCountPolling] Starting count polling."),r()):k.log("[NotificationStore startCountPolling] Skipped starting polling (notifications disabled).")},stopCountPolling:()=>{const{countPollingTimeoutId:n}=e();n&&(k.log("[NotificationStore stopCountPolling] Stopping count polling."),clearTimeout(n),t({countPollingTimeoutId:null}))},setNotificationsEnabled:n=>{k.log(`[NotificationStore setNotificationsEnabled] Setting enabled to: ${n}`);const r=e().notificationsEnabled;t({notificationsEnabled:n}),n?!r&&n&&k.log("[NotificationStore setNotificationsEnabled] Enabled notifications. Initial fetch/polling will be triggered by App component."):e().stopCountPolling()},resetNotifications:()=>{k.log("[NotificationStore resetNotifications] Resetting state and stopping polling."),e().stopCountPolling(),t(n=>({...Kx,notificationsEnabled:n.notificationsEnabled}))}}),{name:"notification-storage",storage:xs(()=>localStorage),partialize:t=>({notificationsEnabled:t.notificationsEnabled}),onRehydrateStorage:()=>t=>{k.log("[NotificationStore] Hydration finished."),t&&(t.notifications=[],t.unreadCount=0,t.totalCount=0,t.currentPage=1,t.filterReadStatus=null,t.isLoading=!1,t.isMarkingAsRead=new Set,t.error=null,t.hasFetchedInitialCount=!1,t.countPollingTimeoutId=null,k.log(`[NotificationStore] Rehydrated state. Enabled: ${t.notificationsEnabled}`))}})),eC=({count:t,className:e,positionClasses:n="absolute -top-1 -right-1"})=>{if(t<=0)return null;const r=t>9?"9+":t.toString();return d.jsx("span",{className:U("inline-flex items-center justify-center rounded-full bg-red-500 text-white","text-[10px] font-bold leading-none",r.length>1?"px-1 min-w-[18px] h-[18px]":"w-[18px] h-[18px]","ring-2 ring-background",n,e),"aria-label":`${t} непрочитанных уведомлений`,children:r})};function Gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tC(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Gx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Gx(t[i],null)}}}}function Pe(...t){return y.useCallback(tC(...t),t)}var ss=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),s=i.find(hD);if(s){const o=s.props.children,a=i.map(l=>l===s?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:l);return d.jsx(qp,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,a):null})}return d.jsx(qp,{...r,ref:e,children:n})});ss.displayName="Slot";var qp=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const i=pD(n),s=fD(r,n.props);return n.type!==y.Fragment&&(s.ref=e?tC(e,i):i),y.cloneElement(n,s)}return y.Children.count(n)>1?y.Children.only(null):null});qp.displayName="SlotClone";var nC=({children:t})=>d.jsx(d.Fragment,{children:t});function hD(t){return y.isValidElement(t)&&t.type===nC}function fD(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function pD(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Zx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Xx=qk,Td=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Xx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=Zx(u)||Zx(h);return i[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[m,w]=g;return Array.isArray(w)?w.includes({...s,...a}[m]):{...s,...a}[m]===w})?[...c,h,f]:c},[]);return Xx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},zl=Td("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",success:"bg-success text-success-foreground hover:bg-success/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ke=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?ss:"button";return d.jsx(o,{className:U(zl({variant:e,size:n,className:t})),ref:s,...i})});ke.displayName="Button";const Qx=()=>d.jsxs(St,{className:"rounded-xl border border-border/60 bg-card shadow-md animate-pulse",children:[" ",d.jsxs("div",{className:"p-5 space-y-5",children:[" ",d.jsxs("div",{className:"flex items-center justify-between",children:[" ",d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[" ",d.jsx("div",{className:"flex-shrink-0 h-9 w-9 bg-muted rounded-lg"})," ",d.jsx("div",{className:"h-5 bg-muted rounded w-3/5"})," "]})," ",d.jsx("div",{className:"flex-shrink-0 h-6 w-16 bg-muted rounded-md ml-2"})," "]})," ",d.jsxs("div",{className:"flex items-end justify-between gap-4 pt-1",children:[" ",d.jsxs("div",{className:"space-y-2",children:[" ",d.jsx("div",{className:"h-9 bg-muted rounded w-32"})," "]})," ",d.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[" ",d.jsx("div",{className:"h-6 bg-muted rounded w-24 mb-1"})," ",d.jsx("div",{className:"h-4 bg-muted rounded w-16"})," "]})," "]})," "]})," "]}),mD=()=>{const{accounts:t,isLoading:e,error:n,fetchPortfolio:r}=dr(),i=vt(),{getAccountTotals:s,isPriceLoading:o}=Jk(),{unreadCount:a,notificationsEnabled:l}=Ci(h=>({unreadCount:h.unreadCount,notificationsEnabled:h.notificationsEnabled}));k.log("[AccountsListPage] Rendering. notificationsEnabled:",l,"unreadCount:",a),y.useEffect(()=>{t===null&&!e&&!n&&r()},[t,e,n,r]);const c=h=>{typeof h=="number"&&i(`/portfolio/${h}`)},u=()=>{k.log("[AccountsListPage] Navigating to /notifications"),i("/notifications")};return e&&t===null?d.jsxs("div",{className:"p-4 space-y-5 pb-24",children:[" ",d.jsxs("div",{className:"flex justify-between items-center mb-5 px-1",children:[" ",d.jsx("h1",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Мои счета"})," ",d.jsx("div",{className:"h-9 w-9 bg-muted rounded-full animate-pulse"})," "]})," ",d.jsx(Qx,{})," ",d.jsx(Qx,{})," "]}):t===null&&n?d.jsx("div",{className:"p-6 pt-10",children:d.jsx(gt,{message:`Не удалось загрузить счета: ${n}`})}):!e&&(t==null?void 0:t.length)===0?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)] p-6 text-center",children:[" ",d.jsx(Bx,{className:"w-16 h-16 text-muted-foreground mb-4",strokeWidth:1})," ",d.jsx("p",{className:"text-muted-foreground mb-4",children:"У вас пока нет счетов."})," "]}):d.jsxs("div",{className:"p-4 space-y-4 pb-24",children:[d.jsxs("div",{className:"flex justify-between items-center mb-5 px-1",children:[d.jsx("h1",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Мои счета"}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"relative h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/50",onClick:u,"aria-label":`Уведомления (${l?a:0} непрочитанных)`,children:[d.jsx(Hp,{className:"h-5 w-5"}),l&&d.jsx(eC,{count:a,positionClasses:"absolute top-0 right-0"})]})]}),o&&t&&t.length>0&&d.jsx("div",{className:"fixed top-4 right-4 p-1 bg-card/80 rounded-full shadow z-20 animate-pulse backdrop-blur-sm",children:d.jsx(Ee,{size:"sm"})}),Array.isArray(t)&&t.map(h=>{var E;if(!((E=h==null?void 0:h.brokerAccount)!=null&&E.id))return null;const f=h.brokerAccount.id,{totalValue:p,totalProfitLoss:g}=s(f);let m=0;h.portfolioItems&&h.portfolioItems.forEach(C=>{var _;((_=C.asset)==null?void 0:_.ticker)!=="RUB"&&C.averagePriceCopecks&&C.averagePriceCopecks>0&&C.quantity&&C.quantity>0&&(m+=C.averagePriceCopecks*C.quantity)});const w=m>0?g/m*100:0,v=g>0,x=g<0,b=v?"text-success":x?"text-destructive":"text-muted-foreground",S=(h.brokerAccount.title||`Счет #${f}`).replace(/["«»]/g,"");return d.jsx("div",{onClick:()=>c(f),className:"cursor-pointer group",children:d.jsx(St,{className:U("rounded-xl border border-border/60 bg-card text-card-foreground shadow-md overflow-hidden","group-hover:border-primary/50 group-hover:shadow-md transition-all duration-200 group-active:scale-[0.98]"),children:d.jsxs(mr,{className:"p-5 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsxs("div",{className:"flex-shrink-0 grid place-items-center h-9 w-9 bg-primary/10 text-primary rounded-lg",children:[" ",t.length>1?d.jsx(Bx,{size:20,strokeWidth:1.75}):d.jsx(vO,{size:20,strokeWidth:1.75})," "]}),d.jsxs("div",{className:"min-w-0",children:[" ",d.jsx("h3",{className:"text-lg font-medium text-foreground truncate",children:S})," "]})]}),d.jsxs("span",{className:"flex-shrink-0 text-xs font-medium bg-muted/70 text-muted-foreground/90 px-2.5 py-1 rounded-md ml-2",children:[" ID:",f," "]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2 pt-1",children:[d.jsx("div",{className:"text-3xl text-foreground tracking-tight leading-none",children:d.jsx(pt,{value:p})}),d.jsxs("div",{className:U("text-right flex flex-col items-end flex-shrink-0",b),children:[d.jsx("div",{className:"text-base font-medium",children:g!==0?d.jsx(pt,{value:g,showSign:!0}):d.jsx("span",{children:"—"})}),d.jsxs("span",{className:"text-sm opacity-90 mt-0.5",children:[" (",oi(w,2),"%) "]})]})]})]})})},f)})]})},gD="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-landmark'%3e%3cline%20x1='3'%20x2='21'%20y1='22'%20y2='22'/%3e%3cline%20x1='6'%20x2='6'%20y1='18'%20y2='11'/%3e%3cline%20x1='10'%20x2='10'%20y1='18'%20y2='11'/%3e%3cline%20x1='14'%20x2='14'%20y1='18'%20y2='11'/%3e%3cline%20x1='18'%20x2='18'%20y1='18'%20y2='11'/%3e%3cpolygon%20points='12%202%2020%207%204%207'/%3e%3c/svg%3e",ks=new Map,aa=new Set,qh=5*60*1e3,vD=t=>{const e="Failed to fetch proxied image.";if(!t)return k.warn("[API/Proxy] fetchProxiedImageBase64 called with empty URL."),Promise.resolve({isSuccess:!1,errorMessage:"Image URL is required.",resultObject:null});if(aa.has(t))return k.log(`[API/Proxy Cache] URL known to fail, returning cached error: ${t}`),Promise.resolve({isSuccess:!1,errorMessage:e,resultObject:null});if(ks.has(t))return k.log(`[API/Proxy Cache] Returning cached promise for: ${t}`),ks.get(t);k.log(`[API/Proxy] Requesting Base64 for URL (no cache): ${t}`);const n={PictureUrl:t},r=et.post("/api/Proxy/DownloadPictureBase64",n).then(i=>{const s=lt(i,e);return k.log(`[API/Proxy] Response processed for ${t}: Success=${s.isSuccess}`),s.isSuccess?setTimeout(()=>{k.log(`[API/Proxy Cache] Removing successful promise from cache: ${t}`),ks.delete(t)},qh):(aa.add(t),setTimeout(()=>{k.log(`[API/Proxy Cache] Removing failed URL from cache (API error): ${t}`),aa.delete(t)},qh),ks.delete(t)),s}).catch(i=>{const s=ct(i,e);return k.error(`[API/Proxy] Network/Request error for ${t}:`,s.errorMessage),aa.add(t),setTimeout(()=>{k.log(`[API/Proxy Cache] Removing failed URL from cache (network/request error): ${t}`),aa.delete(t)},qh),ks.delete(t),s});return ks.set(t,r),r},Ad=({logoUrl:t,ticker:e,className:n="h-8 w-8 rounded-full"})=>{const[r,i]=y.useState(t||null),[s,o]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState(!1);y.useEffect(()=>{i(t||null),o(!1),l(null),u(!1),k.log(`[AssetIcon Effect] logoUrl changed for ${e}. Reset state. New URL: ${t}`)},[t,e]);const h=y.useCallback(()=>{if(k.log(`[AssetIcon handleError] Direct load failed for: ${t}`),c||s||!t){k.log(`[AssetIcon handleError] Aborting fallback: attemptedProxy=${c}, isLoadingProxy=${s}, no logoUrl=${!t}`),c&&!s&&(l(p=>p||"Direct load failed, proxy attempt already made or failed."),i(null));return}u(!0),o(!0),l(null),k.log(`[AssetIcon handleError] Attempting proxy load for: ${t}`),vD(t).then(p=>{if(p.isSuccess&&p.resultObject){k.log(`[AssetIcon handleError] Proxy load successful for: ${t}. Setting Data URL.`);const g=`data:image/png;base64,${p.resultObject}`;i(g),l(null)}else{const g=p.errorMessage||"Proxy fetch failed";k.warn(`[AssetIcon handleError] Proxy load failed for ${t}: ${g}`),l(g),i(null)}}).catch(p=>{const g=p.message||"Proxy network error";k.error(`[AssetIcon handleError] Proxy fetch exception for ${t}:`,p),l(g),i(null)}).finally(()=>{o(!1)})},[t,c,s]);if(s)return d.jsx("div",{className:U(n,"flex items-center justify-center bg-muted border border-border"),children:d.jsx(Ee,{size:"sm"})});if(r)return d.jsx("img",{src:r,alt:e?`${e} logo`:"Asset Logo",onError:r.startsWith("data:")?void 0:h,className:U(n,"object-cover"),loading:"lazy"},r.startsWith("data:")?"data-url":r);const f=a?`Не удалось загрузить логотип (${e||"N/A"}): ${a}`:e?`Логотип ${e}`:"Логотип актива";return d.jsx("img",{src:gD,alt:e?`Fallback icon for ${e}`:"Fallback Asset Icon",title:f,className:U(n,"object-contain p-1 bg-muted border border-border opacity-70")})},Ig=({asset:t,showLotSize:e=!0,className:n,nameClassName:r="text-sm font-medium",tickerClassName:i="text-xs",iconClassName:s="h-8 w-8 rounded-full flex-shrink-0"})=>{if(!t)return d.jsxs("div",{className:U("flex items-center space-x-2 animate-pulse",n),children:[d.jsx("div",{className:U("bg-muted",s)}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("div",{className:"h-3 w-24 rounded bg-muted"}),d.jsx("div",{className:"h-2.5 w-16 rounded bg-muted"})]})]});const o=Ao(t);return d.jsxs("div",{className:U("flex items-center space-x-2 min-w-0",n),children:[d.jsx(Ad,{logoUrl:t.logoUrl,ticker:t.ticker,className:s}),d.jsxs("div",{className:"overflow-hidden min-w-0",children:[d.jsx("p",{className:U("font-medium",r),title:t.title||t.shortName||t.ticker,children:o}),d.jsxs("p",{className:U("text-muted-foreground uppercase",i),children:[t.ticker,e&&t.lotSize>1&&d.jsxs("span",{className:"ml-1 normal-case opacity-70",children:["× ",oi(t.lotSize,0)]})]})]})]})},rC=Oe.memo(({item:t,currentPriceInfo:e})=>{const n=vt(),r=vn();if(!t||!t.asset)return d.jsx("div",{className:"p-4 text-muted-foreground",children:"Ошибка: Неверные данные элемента портфеля."});const{asset:i,quantity:s,averagePriceCopecks:o}=t,a=e?Math.round(e.price*100):null,l=a!==null?a*s:null,c=o!==null?o*s:null,u=l!==null&&c!==null&&c>0?l-c:null,h=c&&c>0&&u!==null?u/c*100:null,f=u!==null&&u>0,p=u!==null&&u<0,g=f?"text-success":p?"text-destructive":"text-muted-foreground",m=()=>{i.id&&n(`/asset/${i.id}`,{state:{from:r.pathname}})};return d.jsxs("div",{className:"flex items-start justify-between py-1.5 px-2 space-x-2 cursor-pointer hover:bg-muted/50 transition-colors",onClick:m,role:"button",tabIndex:0,onKeyDown:w=>(w.key==="Enter"||w.key===" ")&&m(),children:[d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsx(Ig,{asset:i,showLotSize:!1,className:"w-full",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:"text-sm font-medium",tickerClassName:"text-xs"}),o!==null&&o>0&&d.jsx("div",{className:"pl-10 -mt-1",children:d.jsxs("span",{className:"text-xs text-muted-foreground",children:["Средняя:",d.jsx(pt,{value:o,className:"font-normal",asset:i})]})})]}),d.jsxs("div",{className:"text-right flex-shrink-0 ml-2 min-w-[90px] pt-1",children:[l!==null?d.jsx(pt,{value:l,className:"text-sm font-medium tabular-nums-font",asset:i}):e===void 0?d.jsx(Ee,{size:"sm"}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"}),u!==null?d.jsxs("div",{className:U("text-xs tabular-nums-font mt-0.5",g),children:[d.jsx(pt,{value:u,showSign:!0,placeholder:To(0)}),h!==null&&h!==0&&d.jsxs("span",{className:"ml-1 opacity-80",children:["(",oi(h,1),"%)"]})]}):l!==null&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 tabular-nums-font",children:[To(0)," (0%)"]})]})]})});rC.displayName="AssetCard";function yD(t,e){const n=y.createContext(e),r=s=>{const{children:o,...a}=s,l=y.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Ft(t,e=[]){let n=[];function r(s,o){const a=y.createContext(o),l=n.length;n=[...n,o];const c=h=>{var v;const{scope:f,children:p,...g}=h,m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=y.useMemo(()=>g,Object.values(g));return d.jsx(m.Provider,{value:w,children:p})};c.displayName=s+"Provider";function u(h,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=y.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,xD(i,...e)]}function xD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Pd(t){const e=t+"CollectionProvider",[n,r]=Ft(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,w=Oe.useRef(null),v=Oe.useRef(new Map).current;return d.jsx(i,{scope:g,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=Oe.forwardRef((p,g)=>{const{scope:m,children:w}=p,v=s(a,m),x=Pe(g,v.collectionRef);return d.jsx(ss,{ref:x,children:w})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=Oe.forwardRef((p,g)=>{const{scope:m,children:w,...v}=p,x=Oe.useRef(null),b=Pe(g,x),S=s(c,m);return Oe.useEffect(()=>(S.itemMap.set(x,{ref:x,...v}),()=>void S.itemMap.delete(x))),d.jsx(ss,{[u]:"",ref:b,children:w})});h.displayName=c;function f(p){const g=s(t+"CollectionConsumer",p);return Oe.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,E)=>v.indexOf(S.ref.current)-v.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,r]}function de(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ot(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Nn({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=wD({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Ot(n),l=y.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function wD({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),s=Ot(e);return y.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var bD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ue=bD.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?ss:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function iC(t,e){t&&ms.flushSync(()=>t.dispatchEvent(e))}var ht=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{};function SD(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Ur=t=>{const{present:e,children:n}=t,r=kD(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=Pe(r.ref,CD(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:s}):null};Ur.displayName="Presence";function kD(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=SD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=fc(r.current);s.current=a==="mounted"?c:"none"},[a]),ht(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,p=fc(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),ht(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const m=fc(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(s.current=fc(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function fc(t){return(t==null?void 0:t.animationName)||"none"}function CD(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ED=Sb.useId||(()=>{}),ND=0;function ar(t){const[e,n]=y.useState(ED());return ht(()=>{n(r=>r??String(ND++))},[t]),e?`radix-${e}`:""}var Lg="Collapsible",[_D,sC]=Ft(Lg),[TD,Og]=_D(Lg),oC=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l=!1,c]=Nn({prop:r,defaultProp:i,onChange:o});return d.jsx(TD,{scope:n,disabled:s,contentId:ar(),open:l,onOpenToggle:y.useCallback(()=>c(u=>!u),[c]),children:d.jsx(ue.div,{"data-state":$g(l),"data-disabled":s?"":void 0,...a,ref:e})})});oC.displayName=Lg;var aC="CollapsibleTrigger",lC=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=Og(aC,n);return d.jsx(ue.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":$g(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:de(t.onClick,i.onOpenToggle)})});lC.displayName=aC;var Dg="CollapsibleContent",cC=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Og(Dg,t.__scopeCollapsible);return d.jsx(Ur,{present:n||i.open,children:({present:s})=>d.jsx(AD,{...r,ref:e,present:s})})});cC.displayName=Dg;var AD=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=Og(Dg,n),[a,l]=y.useState(r),c=y.useRef(null),u=Pe(e,c),h=y.useRef(0),f=h.current,p=y.useRef(0),g=p.current,m=o.open||a,w=y.useRef(m),v=y.useRef(void 0);return y.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),ht(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();h.current=b.height,p.current=b.width,w.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),l(r)}},[o.open,r]),d.jsx(ue.div,{"data-state":$g(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:m&&i})});function $g(t){return t?"open":"closed"}var PD=oC,jD=lC,RD=cC,MD=y.createContext(void 0);function Fl(t){const e=y.useContext(MD);return t||e||"ltr"}var Hr="Accordion",ID=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zg,LD,OD]=Pd(Hr),[jd,F8]=Ft(Hr,[OD,sC]),Fg=sC(),uC=Oe.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return d.jsx(zg.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?d.jsx(FD,{...s,ref:e}):d.jsx(zD,{...i,ref:e})})});uC.displayName=Hr;var[dC,DD]=jd(Hr),[hC,$D]=jd(Hr,{collapsible:!1}),zD=Oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[a,l]=Nn({prop:n,defaultProp:r,onChange:i});return d.jsx(dC,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:Oe.useCallback(()=>s&&l(""),[s,l]),children:d.jsx(hC,{scope:t.__scopeAccordion,collapsible:s,children:d.jsx(fC,{...o,ref:e})})})}),FD=Oe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],a]=Nn({prop:n,defaultProp:r,onChange:i}),l=Oe.useCallback(u=>a((h=[])=>[...h,u]),[a]),c=Oe.useCallback(u=>a((h=[])=>h.filter(f=>f!==u)),[a]);return d.jsx(dC,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:d.jsx(hC,{scope:t.__scopeAccordion,collapsible:!0,children:d.jsx(fC,{...s,ref:e})})})}),[BD,Rd]=jd(Hr),fC=Oe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,a=Oe.useRef(null),l=Pe(a,e),c=LD(n),h=Fl(i)==="ltr",f=de(t.onKeyDown,p=>{var P;if(!ID.includes(p.key))return;const g=p.target,m=c().filter(L=>{var j;return!((j=L.ref.current)!=null&&j.disabled)}),w=m.findIndex(L=>L.ref.current===g),v=m.length;if(w===-1)return;p.preventDefault();let x=w;const b=0,S=v-1,E=()=>{x=w+1,x>S&&(x=b)},C=()=>{x=w-1,x<b&&(x=S)};switch(p.key){case"Home":x=b;break;case"End":x=S;break;case"ArrowRight":s==="horizontal"&&(h?E():C());break;case"ArrowDown":s==="vertical"&&E();break;case"ArrowLeft":s==="horizontal"&&(h?C():E());break;case"ArrowUp":s==="vertical"&&C();break}const _=x%v;(P=m[_].ref.current)==null||P.focus()});return d.jsx(BD,{scope:n,disabled:r,direction:i,orientation:s,children:d.jsx(zg.Slot,{scope:n,children:d.jsx(ue.div,{...o,"data-orientation":s,ref:l,onKeyDown:r?void 0:f})})})}),zu="AccordionItem",[VD,Bg]=jd(zu),pC=Oe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=Rd(zu,n),o=DD(zu,n),a=Fg(n),l=ar(),c=r&&o.value.includes(r)||!1,u=s.disabled||t.disabled;return d.jsx(VD,{scope:n,open:c,disabled:u,triggerId:l,children:d.jsx(PD,{"data-orientation":s.orientation,"data-state":wC(c),...a,...i,ref:e,disabled:u,open:c,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});pC.displayName=zu;var mC="AccordionHeader",gC=Oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(mC,n);return d.jsx(ue.h3,{"data-orientation":i.orientation,"data-state":wC(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});gC.displayName=mC;var Yp="AccordionTrigger",vC=Oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(Yp,n),o=$D(Yp,n),a=Fg(n);return d.jsx(zg.ItemSlot,{scope:n,children:d.jsx(jD,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...a,...r,ref:e})})});vC.displayName=Yp;var yC="AccordionContent",xC=Oe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(yC,n),o=Fg(n);return d.jsx(RD,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});xC.displayName=yC;function wC(t){return t?"open":"closed"}var UD=uC,HD=pC,WD=gC,bC=vC,SC=xC;const qD=UD,kC=y.forwardRef(({className:t,...e},n)=>d.jsx(HD,{ref:n,className:U("",t),...e}));kC.displayName="AccordionItem";const CC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx(WD,{className:"flex",children:d.jsx(bC,{ref:r,className:U("flex flex-1 items-center justify-between font-medium transition-all",t),...n,children:e})}));CC.displayName=bC.displayName;const EC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(SC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:[d.jsx("div",{className:U("",t),children:e})," "]}));EC.displayName=SC.displayName;const xa="Валюта и металлы",YD="Акции",KD="Фонды",GD="Облигации",Jx="Прочее",ZD=(t,e,n)=>{const r={};t.forEach(l=>{if(!l.asset)return;const c=l.asset.assetTypeId,u=l.asset.ticker;let h=Jx;if(u==="RUB")h=xa;else if(c){const g=e.get(c);g&&(g.id===1||g.id===2||g.title==="currency"||g.title==="currency_pair"?h=xa:g.id===3||g.title==="stock"?h=YD:g.id===4||g.title==="fund_share"?h=KD:g.id===5||g.title==="bond"?h=GD:h=g.description||Jx)}r[h]||(r[h]={items:[],groupTotalValue:0}),r[h].items.push(l);const f=n.get(l.asset.ticker),p=l.quantity||0;if(u==="RUB")h===xa&&(r[h].groupTotalValue+=p);else if(f&&p>0){const m=f.price*100*p;r[h].groupTotalValue+=m}}),Object.keys(r).forEach(l=>{r[l].items.sort((c,u)=>{var p,g;if(c.asset.ticker==="RUB")return-1;if(u.asset.ticker==="RUB")return 1;const h=(((p=n.get(c.asset.ticker))==null?void 0:p.price)??0)*100*(c.quantity??0);return(((g=n.get(u.asset.ticker))==null?void 0:g.price)??0)*100*(u.quantity??0)-h})});const i=Object.entries(r);let s;const o=[];i.forEach(l=>{l[0]===xa?s=l:o.push(l)}),o.sort(([,l],[,c])=>c.groupTotalValue-l.groupTotalValue);const a=[];return s&&a.push(s),a.push(...o),a},XD=({portfolioItems:t,assetTypesMap:e,prices:n,isPriceLoading:r,priceError:i})=>{const s=y.useMemo(()=>ZD(t,e,n),[t,e,n]),o=t.length>0;return d.jsxs("div",{className:"space-y-3",children:[i&&d.jsx(gt,{message:`Ошибка загрузки цен: ${i}`,className:"mx-4 mb-3"}),!i&&!o&&!r&&d.jsx("p",{className:"p-4 pt-10 text-center text-muted-foreground",children:"На счете нет активов."}),!i&&s.length>0&&d.jsx(qD,{type:"multiple",defaultValue:s.map(([a])=>a),className:"w-full space-y-3",children:s.map(([a,l])=>{const{items:c,groupTotalValue:u}=l,h=a!==xa||c.some(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)!=="RUB"});return c.length===0?null:d.jsx(St,{className:"border border-border/60 rounded-lg shadow-sm overflow-hidden",children:d.jsxs(kC,{value:a,className:"border-none",children:[d.jsx(CC,{className:U("px-4 py-3 text-sm font-medium border-b cursor-pointer","hover:bg-muted/30 active:bg-muted/50","data-[state=open]:bg-muted/20"),children:d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"text-base font-medium",children:a}),h&&d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsx(pt,{value:u,className:"text-base font-medium"})})]})}),d.jsx(EC,{className:"p-0",children:d.jsx("div",{className:"divide-y divide-border",children:c.map(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)==="RUB"?d.jsxs("div",{className:"flex items-center justify-between p-2 space-x-3",children:[d.jsx(Ig,{asset:f.asset,showLotSize:!1,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:"text-sm font-medium",tickerClassName:"text-xs"}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:d.jsx(pt,{value:f.quantity,className:"text-base font-medium"})})]},f.id):f.asset&&d.jsx(rC,{item:f,currentPriceInfo:n.get(f.asset.ticker)},f.id)})})})]})},a)})}),r&&o&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ee,{size:"sm"})})]})};var db;const je=typeof window<"u"?(db=window.Telegram)==null?void 0:db.WebApp:void 0;function Qt(){var n,r;return{onClose:()=>{je==null||je.close()},onToggleButton:()=>{je!=null&&je.MainButton.isVisible?je==null||je.MainButton.hide():je==null||je.MainButton.show()},tg:je,user:(n=je==null?void 0:je.initDataUnsafe)==null?void 0:n.user,initDataUnsafe:je==null?void 0:je.initDataUnsafe,initData:je==null?void 0:je.initData,queryId:(r=je==null?void 0:je.initDataUnsafe)==null?void 0:r.query_id,themeParams:je==null?void 0:je.themeParams,colorScheme:je==null?void 0:je.colorScheme}}const QD=()=>{const{accountId:t}=vs(),e=Number(t),n=vt(),{accounts:r,isLoading:i,error:s}=dr(),{isPriceLoading:o,priceError:a,getAccountTotals:l,prices:c}=Jk(),[u,h]=y.useState(new Map),[f,p]=y.useState(!0),[g,m]=y.useState(null),{tg:w}=Qt(),v=y.useMemo(()=>{if(!(!r||!e))return r.find(j=>{var M;return((M=j.brokerAccount)==null?void 0:M.id)===e})},[r,e]),x=y.useMemo(()=>{const j=(v==null?void 0:v.portfolioItems)??[];k.log(`[AccountDetailPage activePortfolioItems] Filtering ${j.length} items for account ${e}...`);const M=j.filter(z=>{var F,T,O;const R=(F=z.asset)==null?void 0:F.ticker,I=(T=z.asset)==null?void 0:T.outOfCirculationAt,$=I&&new Date(I)<new Date,D=((O=z.asset)==null?void 0:O.isTradingProhibited)===!0;return R==="SU26207RMFS9"&&k.warn(`[AccountDetailPage Filter Check - TARGET] Ticker: ${R}, outOfCirculationAt: ${I}, IsInactive: ${$}, IsProhibited: ${D}`),$||D?(k.log(`[AccountDetailPage activePortfolioItems] Filtering out: ${R} (Inactive: ${$}, Prohibited: ${D})`),!1):!0});return k.log(`[AccountDetailPage activePortfolioItems] Result: ${M.length} active items.`),M},[v==null?void 0:v.portfolioItems,e]),{totalValue:b,totalProfitLoss:S}=y.useMemo(()=>!e||!l?{totalValue:0,totalProfitLoss:0}:l(e),[e,l]);if(y.useEffect(()=>{let j=!0;return p(!0),m(null),Ak().then(M=>{if(j)if(M.isSuccess&&M.resultObject){const z=new Map;M.resultObject.forEach(R=>z.set(R.id,R)),h(z)}else m(M.errorMessage||"Не удалось загрузить типы активов.")}).catch(M=>{j&&m(M.message||"Ошибка загрузки типов активов.")}).finally(()=>{j&&p(!1)}),()=>{j=!1}},[]),y.useEffect(()=>{const j=()=>n("/portfolio");return w&&(w.BackButton.show(),w.onEvent("backButtonClicked",j)),()=>{w&&(w.BackButton.hide(),w.offEvent("backButtonClicked",j))}},[w,n]),i||f)return d.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-10rem)]",children:d.jsx(Ee,{size:"lg"})});if(s)return d.jsx("div",{className:"p-4",children:d.jsx(gt,{message:`Ошибка загрузки данных портфеля: ${s}`})});if(g)return d.jsx("div",{className:"p-4",children:d.jsx(gt,{message:`Ошибка загрузки типов активов: ${g}`})});if(!(v!=null&&v.brokerAccount))return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(gt,{message:`Счёт с ID ${e} не найден.`})," "]});let C=0;x&&x.forEach(j=>{var M;((M=j.asset)==null?void 0:M.ticker)!=="RUB"&&j.averagePriceCopecks&&j.averagePriceCopecks>0&&j.quantity&&j.quantity>0&&(C+=j.averagePriceCopecks*j.quantity)});const _=C>0?S/C*100:0,P=S>0?"text-success":S<0?"text-destructive":"text-muted-foreground",L=(v.brokerAccount.title||`Счет #${e}`).replace(/["«»]/g,"");return d.jsxs("div",{className:"p-4 space-y-3 pb-10",children:[d.jsxs("div",{className:"bg-card p-4 rounded-lg shadow-sm space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"flex flex-col text-left",children:[" ",d.jsxs("h2",{className:"text-2xl font-semibold leading-tight",children:[" ",L," "]})," ",d.jsxs("span",{className:"text-base text-muted-foreground leading-snug",children:[" ",v.brokerAccount.telegramUserId||"ID не найден"," "]})," "]}),d.jsxs(ke,{variant:"outline",onClick:()=>n(`/portfolio/${e}/operations`),className:U("flex items-center gap-1.5 min-w-[100px] h-9 px-3 py-1.5","text-sm font-medium rounded-xl","border border-border bg-background hover:bg-muted/50 shadow-sm","flex-shrink-0"),children:[" ",d.jsx(nO,{className:"h-4 w-4"})," Операции "]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[d.jsxs("div",{className:"text-3xl tracking-tight leading-none",children:[" ",d.jsx(pt,{value:b})," "]}),d.jsxs("div",{className:U("text-right flex flex-col items-end",P),children:[d.jsxs("div",{className:"text-base font-medium",children:[" ",d.jsx(pt,{value:S,showSign:!0})," "]}),S!==0&&C>0&&d.jsxs("span",{className:"text-sm opacity-90",children:[" (",oi(_,2),"%) "]})]})]})]}),d.jsx(XD,{portfolioItems:x,assetTypesMap:u,prices:c,isPriceLoading:o,priceError:a})]})};var Et=(t=>(t[t.Buy=0]="Buy",t[t.Sell=1]="Sell",t[t.DividendPayment=2]="DividendPayment",t[t.CouponPayment=3]="CouponPayment",t[t.BondRedemption=4]="BondRedemption",t))(Et||{});const JD=async(t,e)=>{const n="Failed to search market operations history.";try{const r=await et.post("/api/BrokerAccountUser/SearchMarketOperationsHistory",t,{signal:e==null?void 0:e.signal}),i=lt(r,n);return i.isSuccess&&(i.resultObject?i.resultObject.marketOperations=i.resultObject.marketOperations||[]:(k.warn("[API/History] searchMarketOperationsHistory success but resultObject is null. Normalizing."),i.resultObject={marketOperationHistorySearchParameters:t,foundCount:0,marketOperations:[]})),i}catch(r){return ct(r,n)}},e$=20,e0={operations:[],selectedAccountIds:[],filterOperationType:null,totalCount:0,currentPage:1,isLoading:!1,error:null,isInitialLoad:!0},t$=pr((t,e)=>({...e0,setAccountFilter:n=>{const r=n===null?[]:[n];JSON.stringify(e().selectedAccountIds)!==JSON.stringify(r)&&(k.log(`[HistoryStore setAccountFilter] Setting account filter to: ${n===null?"All":n}`),t({selectedAccountIds:r,currentPage:1,isInitialLoad:!0}),e().fetchHistory(1,!1))},setOperationTypeFilter:n=>{e().filterOperationType!==n&&(k.log(`[HistoryStore setOperationTypeFilter] Setting type filter to: ${n===null?"All":Et[n]}`),t({filterOperationType:n,currentPage:1,isInitialLoad:!0}),e().fetchHistory(1,!1))},fetchHistory:async(n,r=!1)=>{var l;const{selectedAccountIds:i,filterOperationType:s,currentPage:o}=e(),a=n??(r?o+1:1);if(i.length===0&&e().isInitialLoad){k.log("[HistoryStore fetchHistory] No account selected, skipping initial fetch."),t({isLoading:!1,isInitialLoad:!1});return}if(e().isLoading){k.log("[HistoryStore fetchHistory] Fetch skipped, already loading.");return}t(c=>({isLoading:!0,error:null,isInitialLoad:c.isInitialLoad&&!r})),r||t({operations:[],totalCount:0}),k.log(`[HistoryStore fetchHistory] Fetching: accounts=${JSON.stringify(i)}, type=${s===null?"All":Et[s]}(${s}), page=${a}, append=${r}`);try{const c={BrokerAccountIds:i.length>0?i:null,MarketOperationType:s,PageNumber:a,PageItemsCount:e$},u=await JD(c);if(u.isSuccess&&u.resultObject){const h=u.resultObject.marketOperations||[];t(f=>{var p;return{operations:r?[...f.operations,...h]:h,totalCount:((p=u.resultObject)==null?void 0:p.foundCount)??f.totalCount,currentPage:a,isLoading:!1,error:null,isInitialLoad:!1}}),k.log(`[HistoryStore fetchHistory] Success. Fetched ${h.length}. Total: ${((l=u.resultObject)==null?void 0:l.foundCount)??"N/A"}. Current page: ${a}`)}else throw new Error(u.errorMessage||"Не удалось загрузить историю операций.")}catch(c){k.error("[HistoryStore fetchHistory] Fetch error:",c),t(u=>({error:c.message||"Ошибка загрузки истории.",isLoading:!1,operations:r?u.operations:[],totalCount:r?u.totalCount:0,currentPage:r?u.currentPage:1,isInitialLoad:!1}))}},goToPage:n=>{e().currentPage!==n&&!e().isLoading&&(k.log(`[HistoryStore goToPage] Going to page: ${n}`),t({currentPage:n}),e().fetchHistory(n,!1))},resetHistory:()=>{k.log("[HistoryStore resetHistory] Resetting state."),t(e0)}}));function t0(t,[e,n]){return Math.min(n,Math.max(e,t))}function n$(t,e=globalThis==null?void 0:globalThis.document){const n=Ot(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var r$="DismissableLayer",Kp="dismissableLayer.update",i$="dismissableLayer.pointerDownOutside",s$="dismissableLayer.focusOutside",n0,NC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Md=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=y.useContext(NC),[u,h]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),g=Pe(e,_=>h(_)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),x=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,E=a$(_=>{const P=_.target,L=[...c.branches].some(j=>j.contains(P));!S||L||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),C=l$(_=>{const P=_.target;[...c.branches].some(j=>j.contains(P))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return n$(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(n0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),r0(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=n0)}},[u,f,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),r0())},[u,c]),y.useEffect(()=>{const _=()=>p({});return document.addEventListener(Kp,_),()=>document.removeEventListener(Kp,_)},[]),d.jsx(ue.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:de(t.onFocusCapture,C.onFocusCapture),onBlurCapture:de(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:de(t.onPointerDownCapture,E.onPointerDownCapture)})});Md.displayName=r$;var o$="DismissableLayerBranch",_C=y.forwardRef((t,e)=>{const n=y.useContext(NC),r=y.useRef(null),i=Pe(e,r);return y.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(ue.div,{...t,ref:i})});_C.displayName=o$;function a$(t,e=globalThis==null?void 0:globalThis.document){const n=Ot(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){TC(i$,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function l$(t,e=globalThis==null?void 0:globalThis.document){const n=Ot(t),r=y.useRef(!1);return y.useEffect(()=>{const i=s=>{s.target&&!r.current&&TC(s$,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function r0(){const t=new CustomEvent(Kp);document.dispatchEvent(t)}function TC(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?iC(i,s):i.dispatchEvent(s)}var c$=Md,u$=_C,Yh=0;function AC(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??i0()),document.body.insertAdjacentElement("beforeend",t[1]??i0()),Yh++,()=>{Yh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Yh--}},[])}function i0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Kh="focusScope.autoFocusOnMount",Gh="focusScope.autoFocusOnUnmount",s0={bubbles:!1,cancelable:!0},d$="FocusScope",Vg=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=y.useState(null),c=Ot(i),u=Ot(s),h=y.useRef(null),f=Pe(e,m=>l(m)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?h.current=S:Xr(h.current,{select:!0})},w=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Xr(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const E of b)E.removedNodes.length>0&&Xr(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){a0.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Kh,s0);a.addEventListener(Kh,c),a.dispatchEvent(v),v.defaultPrevented||(h$(v$(PC(a)),{select:!0}),document.activeElement===m&&Xr(a))}return()=>{a.removeEventListener(Kh,c),setTimeout(()=>{const v=new CustomEvent(Gh,s0);a.addEventListener(Gh,u),a.dispatchEvent(v),v.defaultPrevented||Xr(m??document.body,{select:!0}),a.removeEventListener(Gh,u),a0.remove(p)},0)}}},[a,c,u,p]);const g=y.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[b,S]=f$(x);b&&S?!m.shiftKey&&v===S?(m.preventDefault(),n&&Xr(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&Xr(S,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return d.jsx(ue.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Vg.displayName=d$;function h$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Xr(r,{select:e}),document.activeElement!==n)return}function f$(t){const e=PC(t),n=o0(e,t),r=o0(e.reverse(),t);return[n,r]}function PC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function o0(t,e){for(const n of t)if(!p$(n,{upTo:e}))return n}function p$(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function m$(t){return t instanceof HTMLInputElement&&"select"in t}function Xr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&m$(t)&&e&&t.select()}}var a0=g$();function g$(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=l0(t,e),t.unshift(e)},remove(e){var n;t=l0(t,e),(n=t[0])==null||n.resume()}}}function l0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function v$(t){return t.filter(e=>e.tagName!=="A")}const y$=["top","right","bottom","left"],Ei=Math.min,rn=Math.max,Fu=Math.round,pc=Math.floor,lr=t=>({x:t,y:t}),x$={left:"right",right:"left",bottom:"top",top:"bottom"},w$={start:"end",end:"start"};function Gp(t,e,n){return rn(t,Ei(e,n))}function Dr(t,e){return typeof t=="function"?t(e):t}function $r(t){return t.split("-")[0]}function Vo(t){return t.split("-")[1]}function Ug(t){return t==="x"?"y":"x"}function Hg(t){return t==="y"?"height":"width"}function Ni(t){return["top","bottom"].includes($r(t))?"y":"x"}function Wg(t){return Ug(Ni(t))}function b$(t,e,n){n===void 0&&(n=!1);const r=Vo(t),i=Wg(t),s=Hg(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Bu(o)),[o,Bu(o)]}function S$(t){const e=Bu(t);return[Zp(t),e,Zp(e)]}function Zp(t){return t.replace(/start|end/g,e=>w$[e])}function k$(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function C$(t,e,n,r){const i=Vo(t);let s=k$($r(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Zp)))),s}function Bu(t){return t.replace(/left|right|bottom|top/g,e=>x$[e])}function E$(t){return{top:0,right:0,bottom:0,left:0,...t}}function jC(t){return typeof t!="number"?E$(t):{top:t,right:t,bottom:t,left:t}}function Vu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function c0(t,e,n){let{reference:r,floating:i}=t;const s=Ni(e),o=Wg(e),a=Hg(o),l=$r(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Vo(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const N$=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=c0(c,r,l),f=r,p={},g=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x,y:b,data:S,reset:E}=await v({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,h=b??h,p={...p,[w]:{...p[w],...S}},E&&g<=50&&(g++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:h}=c0(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function bl(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Dr(e,t),g=jC(p),w=a[f?h==="floating"?"reference":"floating":h],v=Vu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=Vu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-E.top+g.top)/S.y,bottom:(E.bottom-v.bottom+g.bottom)/S.y,left:(v.left-E.left+g.left)/S.x,right:(E.right-v.right+g.right)/S.x}}const _$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Dr(t,e)||{};if(c==null)return{};const h=jC(u),f={x:n,y:r},p=Wg(i),g=Hg(p),m=await o.getDimensions(c),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],E=f[p]-s.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=C?C[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(C)))&&(_=a.floating[b]||s.floating[g]);const P=S/2-E/2,L=_/2-m[g]/2-1,j=Ei(h[v],L),M=Ei(h[x],L),z=j,R=_-m[g]-M,I=_/2-m[g]/2+P,$=Gp(z,I,R),D=!l.arrow&&Vo(i)!=null&&I!==$&&s.reference[g]/2-(I<z?j:M)-m[g]/2<0,F=D?I<z?I-z:I-R:0;return{[p]:f[p]+F,data:{[p]:$,centerOffset:I-$-F,...D&&{alignmentOffset:F}},reset:D}}}),T$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=Dr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=$r(i),x=Ni(a),b=$r(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(b||!m?[Bu(a)]:S$(a)),C=g!=="none";!f&&C&&E.push(...C$(a,m,g,S));const _=[a,...E],P=await bl(e,w),L=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&L.push(P[v]),h){const I=b$(i,o,S);L.push(P[I[0]],P[I[1]])}if(j=[...j,{placement:i,overflows:L}],!L.every(I=>I<=0)){var M,z;const I=(((M=s.flip)==null?void 0:M.index)||0)+1,$=_[I];if($)return{data:{index:I,overflows:j},reset:{placement:$}};let D=(z=j.filter(F=>F.overflows[0]<=0).sort((F,T)=>F.overflows[1]-T.overflows[1])[0])==null?void 0:z.placement;if(!D)switch(p){case"bestFit":{var R;const F=(R=j.filter(T=>{if(C){const O=Ni(T.placement);return O===x||O==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(O=>O>0).reduce((O,N)=>O+N,0)]).sort((T,O)=>T[1]-O[1])[0])==null?void 0:R[0];F&&(D=F);break}case"initialPlacement":D=a;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function u0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function d0(t){return y$.some(e=>t[e]>=0)}const A$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Dr(t,e);switch(r){case"referenceHidden":{const s=await bl(e,{...i,elementContext:"reference"}),o=u0(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:d0(o)}}}case"escaped":{const s=await bl(e,{...i,altBoundary:!0}),o=u0(s,n.floating);return{data:{escapedOffsets:o,escaped:d0(o)}}}default:return{}}}}};async function P$(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=$r(n),a=Vo(n),l=Ni(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=Dr(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const j$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await P$(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},R$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=Dr(t,e),c={x:n,y:r},u=await bl(e,l),h=Ni($r(i)),f=Ug(h);let p=c[f],g=c[h];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[w],b=p-u[v];p=Gp(x,p,b)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=g+u[w],b=g-u[v];g=Gp(x,g,b)}const m=a.fn({...e,[f]:p,[h]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[h]:o}}}}}},M$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Dr(t,e),u={x:n,y:r},h=Ni(i),f=Ug(h);let p=u[f],g=u[h];const m=Dr(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",S=s.reference[f]-s.floating[b]+w.mainAxis,E=s.reference[f]+s.reference[b]-w.mainAxis;p<S?p=S:p>E&&(p=E)}if(c){var v,x;const b=f==="y"?"width":"height",S=["top","left"].includes($r(i)),E=s.reference[h]-s.floating[b]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),C=s.reference[h]+s.reference[b]+(S?0:((x=o.offset)==null?void 0:x[h])||0)-(S?w.crossAxis:0);g<E?g=E:g>C&&(g=C)}return{[f]:p,[h]:g}}}},I$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Dr(t,e),u=await bl(e,c),h=$r(i),f=Vo(i),p=Ni(i)==="y",{width:g,height:m}=s.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,w=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,b=g-u.left-u.right,S=Ei(m-u[w],x),E=Ei(g-u[v],b),C=!e.middlewareData.shift;let _=S,P=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),C&&!f){const j=rn(u.left,0),M=rn(u.right,0),z=rn(u.top,0),R=rn(u.bottom,0);p?P=g-2*(j!==0||M!==0?j+M:rn(u.left,u.right)):_=m-2*(z!==0||R!==0?z+R:rn(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:_});const L=await o.getDimensions(a.floating);return g!==L.width||m!==L.height?{reset:{rects:!0}}:{}}}};function Id(){return typeof window<"u"}function Uo(t){return RC(t)?(t.nodeName||"").toLowerCase():"#document"}function dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gr(t){var e;return(e=(RC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function RC(t){return Id()?t instanceof Node||t instanceof dn(t).Node:!1}function Bn(t){return Id()?t instanceof Element||t instanceof dn(t).Element:!1}function hr(t){return Id()?t instanceof HTMLElement||t instanceof dn(t).HTMLElement:!1}function h0(t){return!Id()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof dn(t).ShadowRoot}function Bl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Vn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function L$(t){return["table","td","th"].includes(Uo(t))}function Ld(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qg(t){const e=Yg(),n=Bn(t)?Vn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function O$(t){let e=_i(t);for(;hr(e)&&!Po(e);){if(qg(e))return e;if(Ld(e))return null;e=_i(e)}return null}function Yg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Po(t){return["html","body","#document"].includes(Uo(t))}function Vn(t){return dn(t).getComputedStyle(t)}function Od(t){return Bn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _i(t){if(Uo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||h0(t)&&t.host||gr(t);return h0(e)?e.host:e}function MC(t){const e=_i(t);return Po(e)?t.ownerDocument?t.ownerDocument.body:t.body:hr(e)&&Bl(e)?e:MC(e)}function Sl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=MC(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=dn(i);if(s){const a=Xp(o);return e.concat(o,o.visualViewport||[],Bl(i)?i:[],a&&n?Sl(a):[])}return e.concat(i,Sl(i,[],n))}function Xp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function IC(t){const e=Vn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=hr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Fu(n)!==s||Fu(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Kg(t){return Bn(t)?t:t.contextElement}function so(t){const e=Kg(t);if(!hr(e))return lr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=IC(e);let o=(s?Fu(n.width):n.width)/r,a=(s?Fu(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const D$=lr(0);function LC(t){const e=dn(t);return!Yg()||!e.visualViewport?D$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==dn(t)?!1:e}function os(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Kg(t);let o=lr(1);e&&(r?Bn(r)&&(o=so(r)):o=so(t));const a=$$(s,n,r)?LC(s):lr(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=dn(s),p=r&&Bn(r)?dn(r):r;let g=f,m=Xp(g);for(;m&&r&&p!==g;){const w=so(m),v=m.getBoundingClientRect(),x=Vn(m),b=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*w.x,S=v.top+(m.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=b,c+=S,g=dn(m),m=Xp(g)}}return Vu({width:u,height:h,x:l,y:c})}function Gg(t,e){const n=Od(t).scrollLeft;return e?e.left+n:os(gr(t)).left+n}function OC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Gg(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function z$(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=gr(r),a=e?Ld(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=lr(1);const u=lr(0),h=hr(r);if((h||!h&&!s)&&((Uo(r)!=="body"||Bl(o))&&(l=Od(r)),hr(r))){const p=os(r);c=so(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!s?OC(o,l,!0):lr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function F$(t){return Array.from(t.getClientRects())}function B$(t){const e=gr(t),n=Od(t),r=t.ownerDocument.body,i=rn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=rn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Gg(t);const a=-n.scrollTop;return Vn(r).direction==="rtl"&&(o+=rn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function V$(t,e){const n=dn(t),r=gr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Yg();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function U$(t,e){const n=os(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=hr(t)?so(t):lr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function f0(t,e,n){let r;if(e==="viewport")r=V$(t,n);else if(e==="document")r=B$(gr(t));else if(Bn(e))r=U$(e,n);else{const i=LC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Vu(r)}function DC(t,e){const n=_i(t);return n===e||!Bn(n)||Po(n)?!1:Vn(n).position==="fixed"||DC(n,e)}function H$(t,e){const n=e.get(t);if(n)return n;let r=Sl(t,[],!1).filter(a=>Bn(a)&&Uo(a)!=="body"),i=null;const s=Vn(t).position==="fixed";let o=s?_i(t):t;for(;Bn(o)&&!Po(o);){const a=Vn(o),l=qg(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Bl(o)&&!l&&DC(t,o))?r=r.filter(u=>u!==o):i=a,o=_i(o)}return e.set(t,r),r}function W$(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Ld(e)?[]:H$(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=f0(e,u,i);return c.top=rn(h.top,c.top),c.right=Ei(h.right,c.right),c.bottom=Ei(h.bottom,c.bottom),c.left=rn(h.left,c.left),c},f0(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function q$(t){const{width:e,height:n}=IC(t);return{width:e,height:n}}function Y$(t,e,n){const r=hr(e),i=gr(e),s=n==="fixed",o=os(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=lr(0);if(r||!r&&!s)if((Uo(e)!=="body"||Bl(i))&&(a=Od(e)),r){const f=os(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Gg(i));const c=i&&!r&&!s?OC(i,a):lr(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function Zh(t){return Vn(t).position==="static"}function p0(t,e){if(!hr(t)||Vn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gr(t)===n&&(n=n.ownerDocument.body),n}function $C(t,e){const n=dn(t);if(Ld(t))return n;if(!hr(t)){let i=_i(t);for(;i&&!Po(i);){if(Bn(i)&&!Zh(i))return i;i=_i(i)}return n}let r=p0(t,e);for(;r&&L$(r)&&Zh(r);)r=p0(r,e);return r&&Po(r)&&Zh(r)&&!qg(r)?n:r||O$(t)||n}const K$=async function(t){const e=this.getOffsetParent||$C,n=this.getDimensions,r=await n(t.floating);return{reference:Y$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function G$(t){return Vn(t).direction==="rtl"}const Z$={convertOffsetParentRelativeRectToViewportRelativeRect:z$,getDocumentElement:gr,getClippingRect:W$,getOffsetParent:$C,getElementRects:K$,getClientRects:F$,getDimensions:q$,getScale:so,isElement:Bn,isRTL:G$};function zC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function X$(t,e){let n=null,r;const i=gr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=pc(h),m=pc(i.clientWidth-(u+f)),w=pc(i.clientHeight-(h+p)),v=pc(u),b={rootMargin:-g+"px "+-m+"px "+-w+"px "+-v+"px",threshold:rn(0,Ei(1,l))||1};let S=!0;function E(C){const _=C[0].intersectionRatio;if(_!==l){if(!S)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!zC(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(t)}return o(!0),s}function Q$(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Kg(t),u=i||s?[...c?Sl(c):[],...Sl(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?X$(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?os(t):null;l&&w();function w(){const v=os(t);m&&!zC(m,v)&&n(),m=v,g=requestAnimationFrame(w)}return n(),()=>{var v;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const J$=j$,ez=R$,tz=T$,nz=I$,rz=A$,m0=_$,iz=M$,sz=(t,e,n)=>{const r=new Map,i={platform:Z$,...n},s={...i.platform,_c:r};return N$(t,e,{...i,platform:s})};var Kc=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Uu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Uu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Uu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function FC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function g0(t,e){const n=FC(t);return Math.round(e*n)/n}function Xh(t){const e=y.useRef(t);return Kc(()=>{e.current=t}),e}function oz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=y.useState(r);Uu(f,r)||p(r);const[g,m]=y.useState(null),[w,v]=y.useState(null),x=y.useCallback(T=>{T!==C.current&&(C.current=T,m(T))},[]),b=y.useCallback(T=>{T!==_.current&&(_.current=T,v(T))},[]),S=s||g,E=o||w,C=y.useRef(null),_=y.useRef(null),P=y.useRef(u),L=l!=null,j=Xh(l),M=Xh(i),z=Xh(c),R=y.useCallback(()=>{if(!C.current||!_.current)return;const T={placement:e,strategy:n,middleware:f};M.current&&(T.platform=M.current),sz(C.current,_.current,T).then(O=>{const N={...O,isPositioned:z.current!==!1};I.current&&!Uu(P.current,N)&&(P.current=N,ms.flushSync(()=>{h(N)}))})},[f,e,n,M,z]);Kc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[c]);const I=y.useRef(!1);Kc(()=>(I.current=!0,()=>{I.current=!1}),[]),Kc(()=>{if(S&&(C.current=S),E&&(_.current=E),S&&E){if(j.current)return j.current(S,E,R);R()}},[S,E,R,j,L]);const $=y.useMemo(()=>({reference:C,floating:_,setReference:x,setFloating:b}),[x,b]),D=y.useMemo(()=>({reference:S,floating:E}),[S,E]),F=y.useMemo(()=>{const T={position:n,left:0,top:0};if(!D.floating)return T;const O=g0(D.floating,u.x),N=g0(D.floating,u.y);return a?{...T,transform:"translate("+O+"px, "+N+"px)",...FC(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:N}},[n,a,D.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:R,refs:$,elements:D,floatingStyles:F}),[u,R,$,D,F])}const az=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?m0({element:r.current,padding:i}).fn(n):{}:r?m0({element:r,padding:i}).fn(n):{}}}},lz=(t,e)=>({...J$(t),options:[t,e]}),cz=(t,e)=>({...ez(t),options:[t,e]}),uz=(t,e)=>({...iz(t),options:[t,e]}),dz=(t,e)=>({...tz(t),options:[t,e]}),hz=(t,e)=>({...nz(t),options:[t,e]}),fz=(t,e)=>({...rz(t),options:[t,e]}),pz=(t,e)=>({...az(t),options:[t,e]});var mz="Arrow",BC=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return d.jsx(ue.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});BC.displayName=mz;var gz=BC;function Dd(t){const[e,n]=y.useState(void 0);return ht(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Zg="Popper",[VC,UC]=Ft(Zg),[vz,HC]=VC(Zg),WC=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return d.jsx(vz,{scope:e,anchor:r,onAnchorChange:i,children:n})};WC.displayName=Zg;var qC="PopperAnchor",YC=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=HC(qC,n),o=y.useRef(null),a=Pe(e,o);return y.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:d.jsx(ue.div,{...i,ref:a})});YC.displayName=qC;var Xg="PopperContent",[yz,xz]=VC(Xg),KC=y.forwardRef((t,e)=>{var X,se,H,q,ne,ae;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,w=HC(Xg,n),[v,x]=y.useState(null),b=Pe(e,Ce=>x(Ce)),[S,E]=y.useState(null),C=Dd(S),_=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,L=r+(s!=="center"?"-"+s:""),j=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},M=Array.isArray(c)?c:[c],z=M.length>0,R={padding:j,boundary:M.filter(bz),altBoundary:z},{refs:I,floatingStyles:$,placement:D,isPositioned:F,middlewareData:T}=oz({strategy:"fixed",placement:L,whileElementsMounted:(...Ce)=>Q$(...Ce,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[lz({mainAxis:i+P,alignmentAxis:o}),l&&cz({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?uz():void 0,...R}),l&&dz({...R}),hz({...R,apply:({elements:Ce,rects:Be,availableWidth:pe,availableHeight:De})=>{const{width:Ve,height:Yn}=Be.reference,Bt=Ce.floating.style;Bt.setProperty("--radix-popper-available-width",`${pe}px`),Bt.setProperty("--radix-popper-available-height",`${De}px`),Bt.setProperty("--radix-popper-anchor-width",`${Ve}px`),Bt.setProperty("--radix-popper-anchor-height",`${Yn}px`)}}),S&&pz({element:S,padding:a}),Sz({arrowWidth:_,arrowHeight:P}),f&&fz({strategy:"referenceHidden",...R})]}),[O,N]=XC(D),B=Ot(g);ht(()=>{F&&(B==null||B())},[F,B]);const Q=(X=T.arrow)==null?void 0:X.x,A=(se=T.arrow)==null?void 0:se.y,J=((H=T.arrow)==null?void 0:H.centerOffset)!==0,[le,ce]=y.useState();return ht(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),d.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:F?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(q=T.transformOrigin)==null?void 0:q.x,(ne=T.transformOrigin)==null?void 0:ne.y].join(" "),...((ae=T.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(yz,{scope:n,placedSide:O,onArrowChange:E,arrowX:Q,arrowY:A,shouldHideArrow:J,children:d.jsx(ue.div,{"data-side":O,"data-align":N,...m,ref:b,style:{...m.style,animation:F?void 0:"none"}})})})});KC.displayName=Xg;var GC="PopperArrow",wz={top:"bottom",right:"left",bottom:"top",left:"right"},ZC=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=xz(GC,r),o=wz[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(gz,{...i,ref:n,style:{...i.style,display:"block"}})})});ZC.displayName=GC;function bz(t){return t!==null}var Sz=t=>({name:"transformOrigin",options:t,fn(e){var w,v,x;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=XC(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?h:`${f}px`,m=`${-l}px`):c==="top"?(g=o?h:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?h:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,m=o?h:`${p}px`),{data:{x:g,y:m}}}});function XC(t){const[e,n="center"]=t.split("-");return[e,n]}var kz=WC,Cz=YC,Ez=KC,Nz=ZC,_z="Portal",$d=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=y.useState(!1);ht(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sj.createPortal(d.jsx(ue.div,{...r,ref:e}),o):null});$d.displayName=_z;function zd(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Tz="VisuallyHidden",Fd=y.forwardRef((t,e)=>d.jsx(ue.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Fd.displayName=Tz;var Az=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cs=new WeakMap,mc=new WeakMap,gc={},Qh=0,QC=function(t){return t&&(t.host||QC(t.parentNode))},Pz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=QC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jz=function(t,e,n,r){var i=Pz(e,Array.isArray(t)?t:[t]);gc[n]||(gc[n]=new WeakMap);var s=gc[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),g=p!==null&&p!=="false",m=(Cs.get(f)||0)+1,w=(s.get(f)||0)+1;Cs.set(f,m),s.set(f,w),o.push(f),m===1&&g&&mc.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),Qh++,function(){o.forEach(function(h){var f=Cs.get(h)-1,p=s.get(h)-1;Cs.set(h,f),s.set(h,p),f||(mc.has(h)||h.removeAttribute(r),mc.delete(h)),p||h.removeAttribute(n)}),Qh--,Qh||(Cs=new WeakMap,Cs=new WeakMap,mc=new WeakMap,gc={})}},JC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Az(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),jz(r,i,n,"aria-hidden")):function(){return null}},tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tr.apply(this,arguments)};function eE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Rz(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Gc="right-scroll-bar-position",Zc="width-before-scroll-bar",Mz="with-scroll-bars-hidden",Iz="--removed-body-scroll-bar-size";function Jh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Lz(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Oz=typeof window<"u"?y.useLayoutEffect:y.useEffect,v0=new WeakMap;function Dz(t,e){var n=Lz(null,function(r){return t.forEach(function(i){return Jh(i,r)})});return Oz(function(){var r=v0.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Jh(a,null)}),s.forEach(function(a){i.has(a)||Jh(a,o)})}v0.set(n,t)},[t]),n}function $z(t){return t}function zz(t,e){e===void 0&&(e=$z);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Fz(t){t===void 0&&(t={});var e=zz(null);return e.options=tr({async:!0,ssr:!1},t),e}var tE=function(t){var e=t.sideCar,n=eE(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,tr({},n))};tE.isSideCarExport=!0;function Bz(t,e){return t.useMedium(e),tE}var nE=Fz(),ef=function(){},Bd=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:ef,onWheelCapture:ef,onTouchMoveCapture:ef}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,x=t.gapMode,b=eE(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=Dz([n,e]),C=tr(tr({},b),i);return y.createElement(y.Fragment,null,u&&y.createElement(S,{sideCar:nE,removeScrollBar:c,shards:h,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:x}),o?y.cloneElement(y.Children.only(a),tr(tr({},C),{ref:E})):y.createElement(v,tr({},C,{className:l,ref:E}),a))});Bd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bd.classNames={fullWidth:Zc,zeroRight:Gc};var Vz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Uz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Vz();return e&&t.setAttribute("nonce",e),t}function Hz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Wz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Uz())&&(Hz(e,n),Wz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Yz=function(){var t=qz();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},rE=function(){var t=Yz(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Kz={left:0,top:0,right:0,gap:0},tf=function(t){return parseInt(t||"",10)||0},Gz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[tf(n),tf(r),tf(i)]},Zz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Kz;var e=Gz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Xz=rE(),oo="data-scroll-locked",Qz=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Mz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(oo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zc," .").concat(Zc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(oo,`] {
    `).concat(Iz,": ").concat(a,`px;
  }
`)},y0=function(){var t=parseInt(document.body.getAttribute(oo)||"0",10);return isFinite(t)?t:0},Jz=function(){y.useEffect(function(){return document.body.setAttribute(oo,(y0()+1).toString()),function(){var t=y0()-1;t<=0?document.body.removeAttribute(oo):document.body.setAttribute(oo,t.toString())}},[])},eF=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Jz();var s=y.useMemo(function(){return Zz(i)},[i]);return y.createElement(Xz,{styles:Qz(s,!e,i,n?"":"!important")})},Qp=!1;if(typeof window<"u")try{var vc=Object.defineProperty({},"passive",{get:function(){return Qp=!0,!0}});window.addEventListener("test",vc,vc),window.removeEventListener("test",vc,vc)}catch{Qp=!1}var Es=Qp?{passive:!1}:!1,tF=function(t){return t.tagName==="TEXTAREA"},iE=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!tF(t)&&n[e]==="visible")},nF=function(t){return iE(t,"overflowY")},rF=function(t){return iE(t,"overflowX")},x0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=sE(t,r);if(i){var s=oE(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iF=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},sF=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},sE=function(t,e){return t==="v"?nF(e):rF(e)},oE=function(t,e){return t==="v"?iF(e):sF(e)},oF=function(t,e){return t==="h"&&e==="rtl"?-1:1},aF=function(t,e,n,r,i){var s=oF(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=oE(t,a),g=p[0],m=p[1],w=p[2],v=m-w-s*g;(g||v)&&sE(t,a)&&(h+=v,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},yc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},w0=function(t){return[t.deltaX,t.deltaY]},b0=function(t){return t&&"current"in t?t.current:t},lF=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uF=0,Ns=[];function dF(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(uF++)[0],s=y.useState(rE)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Rz([t.lockRef.current],(t.shards||[]).map(b0),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=yc(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-v[0],S="deltaY"in m?m.deltaY:x[1]-v[1],E,C=m.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&_==="h"&&C.type==="range")return!1;var P=x0(_,C);if(!P)return!0;if(P?E=_:(E=_==="v"?"h":"v",P=x0(_,C)),!P)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=E),!E)return!0;var L=r.current||E;return aF(L,w,m,L==="h"?b:S)},[]),l=y.useCallback(function(m){var w=m;if(!(!Ns.length||Ns[Ns.length-1]!==s)){var v="deltaY"in w?w0(w):yc(w),x=e.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&lF(E.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(b0).filter(Boolean).filter(function(E){return E.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=y.useCallback(function(m,w,v,x){var b={name:m,delta:w,target:v,should:x,shadowParent:hF(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=y.useCallback(function(m){n.current=yc(m),r.current=void 0},[]),h=y.useCallback(function(m){c(m.type,w0(m),m.target,a(m,t.lockRef.current))},[]),f=y.useCallback(function(m){c(m.type,yc(m),m.target,a(m,t.lockRef.current))},[]);y.useEffect(function(){return Ns.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Es),document.addEventListener("touchmove",l,Es),document.addEventListener("touchstart",u,Es),function(){Ns=Ns.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Es),document.removeEventListener("touchmove",l,Es),document.removeEventListener("touchstart",u,Es)}},[]);var p=t.removeScrollBar,g=t.inert;return y.createElement(y.Fragment,null,g?y.createElement(s,{styles:cF(i)}):null,p?y.createElement(eF,{gapMode:t.gapMode}):null)}function hF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const fF=Bz(nE,dF);var Qg=y.forwardRef(function(t,e){return y.createElement(Bd,tr({},t,{ref:e,sideCar:fF}))});Qg.classNames=Bd.classNames;var pF=[" ","Enter","ArrowUp","ArrowDown"],mF=[" ","Enter"],Vl="Select",[Vd,Ud,gF]=Pd(Vl),[Ho,B8]=Ft(Vl,[gF,UC]),Hd=UC(),[vF,Ri]=Ho(Vl),[yF,xF]=Ho(Vl),aE=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p,form:g}=t,m=Hd(e),[w,v]=y.useState(null),[x,b]=y.useState(null),[S,E]=y.useState(!1),C=Fl(c),[_=!1,P]=Nn({prop:r,defaultProp:i,onChange:s}),[L,j]=Nn({prop:o,defaultProp:a,onChange:l}),M=y.useRef(null),z=w?g||!!w.closest("form"):!0,[R,I]=y.useState(new Set),$=Array.from(R).map(D=>D.props.value).join(";");return d.jsx(kz,{...m,children:d.jsxs(vF,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:ar(),value:L,onValueChange:j,open:_,onOpenChange:P,dir:C,triggerPointerDownPosRef:M,disabled:f,children:[d.jsx(Vd.Provider,{scope:e,children:d.jsx(yF,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(D=>{I(F=>new Set(F).add(D))},[]),onNativeOptionRemove:y.useCallback(D=>{I(F=>{const T=new Set(F);return T.delete(D),T})},[]),children:n})}),z?d.jsxs(RE,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:L,onChange:D=>j(D.target.value),disabled:f,form:g,children:[L===void 0?d.jsx("option",{value:""}):null,Array.from(R)]},$):null]})})};aE.displayName=Vl;var lE="SelectTrigger",cE=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Hd(n),o=Ri(lE,n),a=o.disabled||r,l=Pe(e,o.onTriggerChange),c=Ud(n),u=y.useRef("touch"),[h,f,p]=ME(m=>{const w=c().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),x=IE(w,m,v);x!==void 0&&o.onValueChange(x.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return d.jsx(Cz,{asChild:!0,...s,children:d.jsx(ue.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":jE(o.value)?"":void 0,...i,ref:l,onClick:de(i.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:de(i.onPointerDown,m=>{u.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:de(i.onKeyDown,m=>{const w=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&pF.includes(m.key)&&(g(),m.preventDefault())})})})});cE.displayName=lE;var uE="SelectValue",dE=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Ri(uE,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Pe(e,l.onValueNodeChange);return ht(()=>{c(u)},[c,u]),d.jsx(ue.span,{...a,ref:h,style:{pointerEvents:"none"},children:jE(l.value)?d.jsx(d.Fragment,{children:o}):s})});dE.displayName=uE;var wF="SelectIcon",hE=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(ue.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});hE.displayName=wF;var bF="SelectPortal",fE=t=>d.jsx($d,{asChild:!0,...t});fE.displayName=bF;var as="SelectContent",pE=y.forwardRef((t,e)=>{const n=Ri(as,t.__scopeSelect),[r,i]=y.useState();if(ht(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?ms.createPortal(d.jsx(mE,{scope:t.__scopeSelect,children:d.jsx(Vd.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(gE,{...t,ref:e})});pE.displayName=as;var Pn=10,[mE,Mi]=Ho(as),SF="SelectContentImpl",gE=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w,...v}=t,x=Ri(as,n),[b,S]=y.useState(null),[E,C]=y.useState(null),_=Pe(e,X=>S(X)),[P,L]=y.useState(null),[j,M]=y.useState(null),z=Ud(n),[R,I]=y.useState(!1),$=y.useRef(!1);y.useEffect(()=>{if(b)return JC(b)},[b]),AC();const D=y.useCallback(X=>{const[se,...H]=z().map(ae=>ae.ref.current),[q]=H.slice(-1),ne=document.activeElement;for(const ae of X)if(ae===ne||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===se&&E&&(E.scrollTop=0),ae===q&&E&&(E.scrollTop=E.scrollHeight),ae==null||ae.focus(),document.activeElement!==ne))return},[z,E]),F=y.useCallback(()=>D([P,b]),[D,P,b]);y.useEffect(()=>{R&&F()},[R,F]);const{onOpenChange:T,triggerPointerDownPosRef:O}=x;y.useEffect(()=>{if(b){let X={x:0,y:0};const se=q=>{var ne,ae;X={x:Math.abs(Math.round(q.pageX)-(((ne=O.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(q.pageY)-(((ae=O.current)==null?void 0:ae.y)??0))}},H=q=>{X.x<=10&&X.y<=10?q.preventDefault():b.contains(q.target)||T(!1),document.removeEventListener("pointermove",se),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",H,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",H,{capture:!0})}}},[b,T,O]),y.useEffect(()=>{const X=()=>T(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[T]);const[N,B]=ME(X=>{const se=z().filter(ne=>!ne.disabled),H=se.find(ne=>ne.ref.current===document.activeElement),q=IE(se,X,H);q&&setTimeout(()=>q.ref.current.focus())}),Q=y.useCallback((X,se,H)=>{const q=!$.current&&!H;(x.value!==void 0&&x.value===se||q)&&(L(X),q&&($.current=!0))},[x.value]),A=y.useCallback(()=>b==null?void 0:b.focus(),[b]),J=y.useCallback((X,se,H)=>{const q=!$.current&&!H;(x.value!==void 0&&x.value===se||q)&&M(X)},[x.value]),le=r==="popper"?Jp:vE,ce=le===Jp?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w}:{};return d.jsx(mE,{scope:n,content:b,viewport:E,onViewportChange:C,itemRefCallback:Q,selectedItem:P,onItemLeave:A,itemTextRefCallback:J,focusSelectedItem:F,selectedItemText:j,position:r,isPositioned:R,searchRef:N,children:d.jsx(Qg,{as:ss,allowPinchZoom:!0,children:d.jsx(Vg,{asChild:!0,trapped:x.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:de(i,X=>{var se;(se=x.trigger)==null||se.focus({preventScroll:!0}),X.preventDefault()}),children:d.jsx(Md,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:d.jsx(le,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:X=>X.preventDefault(),...v,...ce,onPlaced:()=>I(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:de(v.onKeyDown,X=>{const se=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!se&&X.key.length===1&&B(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let q=z().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(X.key)&&(q=q.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const ne=X.target,ae=q.indexOf(ne);q=q.slice(ae+1)}setTimeout(()=>D(q)),X.preventDefault()}})})})})})})});gE.displayName=SF;var kF="SelectItemAlignedPosition",vE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Ri(as,n),o=Mi(as,n),[a,l]=y.useState(null),[c,u]=y.useState(null),h=Pe(e,_=>u(_)),f=Ud(n),p=y.useRef(!1),g=y.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=o,b=y.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const _=s.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),L=s.valueNode.getBoundingClientRect(),j=v.getBoundingClientRect();if(s.dir!=="rtl"){const ne=j.left-P.left,ae=L.left-ne,Ce=_.left-ae,Be=_.width+Ce,pe=Math.max(Be,P.width),De=window.innerWidth-Pn,Ve=t0(ae,[Pn,Math.max(Pn,De-pe)]);a.style.minWidth=Be+"px",a.style.left=Ve+"px"}else{const ne=P.right-j.right,ae=window.innerWidth-L.right-ne,Ce=window.innerWidth-_.right-ae,Be=_.width+Ce,pe=Math.max(Be,P.width),De=window.innerWidth-Pn,Ve=t0(ae,[Pn,Math.max(Pn,De-pe)]);a.style.minWidth=Be+"px",a.style.right=Ve+"px"}const M=f(),z=window.innerHeight-Pn*2,R=m.scrollHeight,I=window.getComputedStyle(c),$=parseInt(I.borderTopWidth,10),D=parseInt(I.paddingTop,10),F=parseInt(I.borderBottomWidth,10),T=parseInt(I.paddingBottom,10),O=$+D+R+T+F,N=Math.min(w.offsetHeight*5,O),B=window.getComputedStyle(m),Q=parseInt(B.paddingTop,10),A=parseInt(B.paddingBottom,10),J=_.top+_.height/2-Pn,le=z-J,ce=w.offsetHeight/2,X=w.offsetTop+ce,se=$+D+X,H=O-se;if(se<=J){const ne=M.length>0&&w===M[M.length-1].ref.current;a.style.bottom="0px";const ae=c.clientHeight-m.offsetTop-m.offsetHeight,Ce=Math.max(le,ce+(ne?A:0)+ae+F),Be=se+Ce;a.style.height=Be+"px"}else{const ne=M.length>0&&w===M[0].ref.current;a.style.top="0px";const Ce=Math.max(J,$+m.offsetTop+(ne?Q:0)+ce)+H;a.style.height=Ce+"px",m.scrollTop=se-J+m.offsetTop}a.style.margin=`${Pn}px 0`,a.style.minHeight=N+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,r]);ht(()=>b(),[b]);const[S,E]=y.useState();ht(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const C=y.useCallback(_=>{_&&g.current===!0&&(b(),x==null||x(),g.current=!1)},[b,x]);return d.jsx(EF,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:d.jsx(ue.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});vE.displayName=kF;var CF="SelectPopperPosition",Jp=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Pn,...s}=t,o=Hd(n);return d.jsx(Ez,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jp.displayName=CF;var[EF,Jg]=Ho(as,{}),em="SelectViewport",yE=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Mi(em,n),o=Jg(em,n),a=Pe(e,s.onViewportChange),l=y.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(Vd.Slot,{scope:n,children:d.jsx(ue.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:de(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-Pn*2,m=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(m,w);if(v<g){const x=v+p,b=Math.min(g,x),S=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});yE.displayName=em;var xE="SelectGroup",[NF,_F]=Ho(xE),TF=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=ar();return d.jsx(NF,{scope:n,id:i,children:d.jsx(ue.div,{role:"group","aria-labelledby":i,...r,ref:e})})});TF.displayName=xE;var wE="SelectLabel",bE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=_F(wE,n);return d.jsx(ue.div,{id:i.id,...r,ref:e})});bE.displayName=wE;var Hu="SelectItem",[AF,SE]=Ho(Hu),kE=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Ri(Hu,n),l=Mi(Hu,n),c=a.value===r,[u,h]=y.useState(s??""),[f,p]=y.useState(!1),g=Pe(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,i)}),m=ar(),w=y.useRef("touch"),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(AF,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:y.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:d.jsx(Vd.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(ue.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:de(o.onFocus,()=>p(!0)),onBlur:de(o.onBlur,()=>p(!1)),onClick:de(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:de(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:de(o.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:de(o.onPointerMove,x=>{var b;w.current=x.pointerType,i?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:de(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(mF.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});kE.displayName=Hu;var wa="SelectItemText",CE=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Ri(wa,n),a=Mi(wa,n),l=SE(wa,n),c=xF(wa,n),[u,h]=y.useState(null),f=Pe(e,v=>h(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=y.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return ht(()=>(m(g),()=>w(g)),[m,w,g]),d.jsxs(d.Fragment,{children:[d.jsx(ue.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ms.createPortal(s.children,o.valueNode):null]})});CE.displayName=wa;var EE="SelectItemIndicator",NE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return SE(EE,n).isSelected?d.jsx(ue.span,{"aria-hidden":!0,...r,ref:e}):null});NE.displayName=EE;var tm="SelectScrollUpButton",_E=y.forwardRef((t,e)=>{const n=Mi(tm,t.__scopeSelect),r=Jg(tm,t.__scopeSelect),[i,s]=y.useState(!1),o=Pe(e,r.onScrollButtonChange);return ht(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(AE,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});_E.displayName=tm;var nm="SelectScrollDownButton",TE=y.forwardRef((t,e)=>{const n=Mi(nm,t.__scopeSelect),r=Jg(nm,t.__scopeSelect),[i,s]=y.useState(!1),o=Pe(e,r.onScrollButtonChange);return ht(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(AE,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});TE.displayName=nm;var AE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Mi("SelectScrollButton",n),o=y.useRef(null),a=Ud(n),l=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),ht(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),d.jsx(ue.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:de(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:de(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:de(i.onPointerLeave,()=>{l()})})}),PF="SelectSeparator",PE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(ue.div,{"aria-hidden":!0,...r,ref:e})});PE.displayName=PF;var rm="SelectArrow",jF=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Hd(n),s=Ri(rm,n),o=Mi(rm,n);return s.open&&o.position==="popper"?d.jsx(Nz,{...i,...r,ref:e}):null});jF.displayName=rm;function jE(t){return t===""||t===void 0}var RE=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=y.useRef(null),s=Pe(e,i),o=zd(n);return y.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(h)}},[o,n]),d.jsx(Fd,{asChild:!0,children:d.jsx("select",{...r,ref:s,defaultValue:n})})});RE.displayName="BubbleSelect";function ME(t){const e=Ot(t),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function IE(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=RF(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function RF(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var MF=aE,LE=cE,IF=dE,LF=hE,OF=fE,OE=pE,DF=yE,DE=bE,$E=kE,$F=CE,zF=NE,zE=_E,FE=TE,BE=PE;const im=MF,FF=IF,Wu=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(LE,{ref:r,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(LF,{asChild:!0,children:d.jsx(Ok,{className:"h-4 w-4 opacity-50"})})]}));Wu.displayName=LE.displayName;const VE=y.forwardRef(({className:t,...e},n)=>d.jsx(zE,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(YL,{className:"h-4 w-4"})}));VE.displayName=zE.displayName;const UE=y.forwardRef(({className:t,...e},n)=>d.jsx(FE,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(Ok,{className:"h-4 w-4"})}));UE.displayName=FE.displayName;const qu=y.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(OF,{children:d.jsxs(OE,{ref:i,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(VE,{}),d.jsx(DF,{className:U("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(UE,{})]})}));qu.displayName=OE.displayName;const BF=y.forwardRef(({className:t,...e},n)=>d.jsx(DE,{ref:n,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));BF.displayName=DE.displayName;const ni=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs($E,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(zF,{children:d.jsx(Du,{className:"h-4 w-4"})})}),d.jsx($F,{children:e})]}));ni.displayName=$E.displayName;const VF=y.forwardRef(({className:t,...e},n)=>d.jsx(BE,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));VF.displayName=BE.displayName;const UF=t=>{if(t===null||typeof t>"u"||isNaN(t))return d.jsx("span",{className:"text-muted-foreground",children:"- ₽"});const e=Math.abs(t),n=Math.floor(e/100),r=e%100,i=r>0,o=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0}).format(n);return d.jsxs(d.Fragment,{children:[d.jsx("span",{children:o}),i&&d.jsxs("span",{className:"opacity-70",children:[",",r.toString().padStart(2,"0")]}),d.jsx("span",{className:U("ml-0.5 align-baseline",i?"opacity-70":"opacity-90"),children:" ₽"})]})},HF=({operation:t,accountSubtitle:e,onItemClick:n})=>{const{asset:r,marketOperationType:i,totalAssetCostCopecks:s}=t;let o="Неизвестная операция",a=$u,l="",c="text-foreground";const u=r?Ao(r):null;switch(i){case Et.Buy:o=`Покупка ${u||"актива"}`,a=UL,l="-",c="text-foreground";break;case Et.Sell:o=`Продажа ${u||"актива"}`,a=HL,l="+",c="text-success";break;case Et.DividendPayment:o=u?`Дивиденды по ${u}`:"Выплата дивидендов",a=JL,l="+",c="text-success";break;case Et.CouponPayment:o=u?`Купон по ${u}`:"Выплата купона",a=lO,l="+",c="text-success";break;case Et.BondRedemption:o=u?`Погашение ${u}`:"Погашение облигации",a=mO,l="+",c="text-success";break;default:o=u?`Операция: ${u}`:"Операция по счету",a=$u,l="?",c="text-muted-foreground";break}const h=e||"Счёт не указан";return d.jsxs("button",{className:U("flex items-center px-4 py-3 space-x-3 w-full text-left","hover:bg-muted/30 active:bg-muted/50 transition-colors cursor-pointer","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-sm"),onClick:()=>n==null?void 0:n(t),"aria-label":`Операция: ${o}, Сумма: ${l}${s/100}`,children:[d.jsx("div",{className:"flex-shrink-0",children:r?d.jsx(Ad,{logoUrl:r.logoUrl,ticker:r.ticker,className:"h-9 w-9 rounded-full"}):d.jsx("div",{className:"h-9 w-9 rounded-full bg-muted flex items-center justify-center",children:d.jsx(a,{className:"h-4 w-4 text-muted-foreground"})})}),d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsx("p",{className:"text-sm font-medium break-words",title:o,children:o}),d.jsxs("p",{className:"text-xs text-muted-foreground truncate mt-0.5",title:h,children:[" ",h," "]})]}),d.jsxs("div",{className:U("text-right flex-shrink-0 ml-2 tabular-nums-font","text-sm font-medium",c),children:[d.jsx("span",{children:l}),d.jsx("span",{children:UF(s)})]})]})},WF=({dateString:t,className:e})=>d.jsx("div",{className:U("px-4 pt-3 pb-1.5 sticky top-0 z-10 bg-background/90 backdrop-blur-sm border-b border-border/50",e),children:d.jsx("h3",{className:"text-sm font-semibold text-foreground tracking-wide",children:t})});var qF={exports:{}};(function(t,e){(function(n,r){t.exports=r(Ck)})(hn,function(n){function r(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var i=r(n),s="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),a="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),l="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),c=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function u(g,m,w){var v,x;return w==="m"?m?"минута":"минуту":g+" "+(v=+g,x={mm:m?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[w].split("_"),v%10==1&&v%100!=11?x[0]:v%10>=2&&v%10<=4&&(v%100<10||v%100>=20)?x[1]:x[2])}var h=function(g,m){return c.test(m)?s[g.month()]:o[g.month()]};h.s=o,h.f=s;var f=function(g,m){return c.test(m)?a[g.month()]:l[g.month()]};f.s=l,f.f=a;var p={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:h,monthsShort:f,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:u,mm:u,h:"час",hh:u,d:"день",dd:u,M:"месяц",MM:u,y:"год",yy:u},ordinal:function(g){return g},meridiem:function(g){return g<4?"ночи":g<12?"утра":g<17?"дня":"вечера"}};return i.default.locale(p,null,!0),p})})(qF);var HE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){return function(n,r,i){n=n||{};var s=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(c,u,h,f){return s.fromToBase(c,u,h,f)}i.en.relativeTime=o,s.fromToBase=function(c,u,h,f,p){for(var g,m,w,v=h.$locale().relativeTime||o,x=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=x.length,S=0;S<b;S+=1){var E=x[S];E.d&&(g=f?i(c).diff(h,E.d,!0):h.diff(c,E.d,!0));var C=(n.rounding||Math.round)(Math.abs(g));if(w=g>0,C<=E.r||!E.r){C<=1&&S>0&&(E=x[S-1]);var _=v[E.l];p&&(C=p(""+C)),m=typeof _=="string"?_.replace("%d",C):_(C,u,E.l,w);break}}if(u)return m;var P=w?v.future:v.past;return typeof P=="function"?P(m):P.replace("%s",m)},s.to=function(c,u){return a(c,u,this,!0)},s.from=function(c,u){return a(c,u,this)};var l=function(c){return c.$u?i.utc():i()};s.toNow=function(c){return this.to(l(this),c)},s.fromNow=function(c){return this.from(l(this),c)}}})})(HE);var YF=HE.exports;const KF=pn(YF);var WE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){return function(n,r,i){r.prototype.isToday=function(){var s="YYYY-MM-DD",o=i();return this.format(s)===o.format(s)}}})})(WE);var GF=WE.exports;const ZF=pn(GF);var qE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){return function(n,r,i){r.prototype.isYesterday=function(){var s="YYYY-MM-DD",o=i().subtract(1,"day");return this.format(s)===o.format(s)}}})})(qE);var XF=qE.exports;const QF=pn(XF);var ev="Dialog",[YE,KE]=Ft(ev),[JF,Wn]=YE(ev),GE=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=Nn({prop:r,defaultProp:i,onChange:s});return d.jsx(JF,{scope:e,triggerRef:a,contentRef:l,contentId:ar(),titleId:ar(),descriptionId:ar(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};GE.displayName=ev;var ZE="DialogTrigger",XE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wn(ZE,n),s=Pe(e,i.triggerRef);return d.jsx(ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":rv(i.open),...r,ref:s,onClick:de(t.onClick,i.onOpenToggle)})});XE.displayName=ZE;var tv="DialogPortal",[e4,QE]=YE(tv,{forceMount:void 0}),JE=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Wn(tv,e);return d.jsx(e4,{scope:e,forceMount:n,children:y.Children.map(r,o=>d.jsx(Ur,{present:n||s.open,children:d.jsx($d,{asChild:!0,container:i,children:o})}))})};JE.displayName=tv;var Yu="DialogOverlay",eN=y.forwardRef((t,e)=>{const n=QE(Yu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wn(Yu,t.__scopeDialog);return s.modal?d.jsx(Ur,{present:r||s.open,children:d.jsx(t4,{...i,ref:e})}):null});eN.displayName=Yu;var t4=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wn(Yu,n);return d.jsx(Qg,{as:ss,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(ue.div,{"data-state":rv(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ls="DialogContent",tN=y.forwardRef((t,e)=>{const n=QE(ls,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Wn(ls,t.__scopeDialog);return d.jsx(Ur,{present:r||s.open,children:s.modal?d.jsx(n4,{...i,ref:e}):d.jsx(r4,{...i,ref:e})})});tN.displayName=ls;var n4=y.forwardRef((t,e)=>{const n=Wn(ls,t.__scopeDialog),r=y.useRef(null),i=Pe(e,n.contentRef,r);return y.useEffect(()=>{const s=r.current;if(s)return JC(s)},[]),d.jsx(nN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:de(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:de(t.onFocusOutside,s=>s.preventDefault())})}),r4=y.forwardRef((t,e)=>{const n=Wn(ls,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return d.jsx(nN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),nN=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Wn(ls,n),l=y.useRef(null),c=Pe(e,l);return AC(),d.jsxs(d.Fragment,{children:[d.jsx(Vg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(Md,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":rv(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(s4,{titleId:a.titleId}),d.jsx(a4,{contentRef:l,descriptionId:a.descriptionId})]})]})}),nv="DialogTitle",rN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wn(nv,n);return d.jsx(ue.h2,{id:i.titleId,...r,ref:e})});rN.displayName=nv;var iN="DialogDescription",sN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wn(iN,n);return d.jsx(ue.p,{id:i.descriptionId,...r,ref:e})});sN.displayName=iN;var oN="DialogClose",aN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Wn(oN,n);return d.jsx(ue.button,{type:"button",...r,ref:e,onClick:de(t.onClick,()=>i.onOpenChange(!1))})});aN.displayName=oN;function rv(t){return t?"open":"closed"}var lN="DialogTitleWarning",[i4,cN]=yD(lN,{contentName:ls,titleName:nv,docsSlug:"dialog"}),s4=({titleId:t})=>{const e=cN(lN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},o4="DialogDescriptionWarning",a4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cN(o4).contentName}}.`;return y.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},uN=GE,l4=XE,dN=JE,iv=eN,sv=tN,ov=rN,av=sN,Wd=aN;const Pa=uN,c4=dN,hN=Wd,fN=y.forwardRef(({className:t,...e},n)=>d.jsx(iv,{ref:n,className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));fN.displayName=iv.displayName;const ao=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(c4,{children:[d.jsx(fN,{}),d.jsxs(sv,{ref:r,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,d.jsxs(Wd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Ed,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ao.displayName=sv.displayName;const lo=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});lo.displayName="DialogHeader";const lv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});lv.displayName="DialogFooter";const co=y.forwardRef(({className:t,...e},n)=>d.jsx(ov,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",t),...e}));co.displayName=ov.displayName;const ja=y.forwardRef(({className:t,...e},n)=>d.jsx(av,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));ja.displayName=av.displayName;var pN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var o=i.prototype,a=o.format;s.en.formats=n,o.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,g,m){var w=m&&m.toUpperCase();return g||f[m]||n[m]||f[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,x,b){return x||b.slice(1)})})}(l,c===void 0?{}:c);return a.call(this,u)}}})})(pN);var u4=pN.exports;const cv=pn(u4);Me.extend(Dl);Me.extend($l);Me.extend(cv);Me.locale("ru");const d4=({isOpen:t,onClose:e,operation:n,accountSubtitle:r})=>{if(!t||!n)return null;const{asset:i,marketOperationType:s,totalAssetCostCopecks:o,createdAt:a,commissionCopecks:l}=n,c=s===0,u=i?c?`Покупка ${Ao(i)}`:`Продажа ${Ao(i)}`:c?"Покупка":"Продажа",h=c?"text-foreground":"text-success",f=c?"-":"+",p=Me.utc(a).local().format("D MMMM YYYY [г], HH:mm"),g=r||"Счёт не указан",m=To(l);return d.jsx(Pa,{open:t,onOpenChange:e,children:d.jsxs(ao,{className:"sm:max-w-md p-0 bg-background text-foreground overflow-hidden rounded-2xl",children:[d.jsx(lo,{className:"p-4 flex flex-row items-center justify-between border-b",children:d.jsx(co,{className:"text-sm font-normal text-muted-foreground",children:p})}),d.jsxs("div",{className:"p-6 flex flex-col items-center text-center space-y-1.5",children:[i&&d.jsx(Ad,{logoUrl:i.logoUrl,ticker:i.ticker,className:"h-16 w-16 rounded-full border mb-2"}),d.jsx("h3",{className:"text-xl font-semibold",children:u}),(i==null?void 0:i.ticker)&&d.jsx("p",{className:"text-sm text-muted-foreground uppercase",children:i.ticker}),d.jsxs("div",{className:U("text-4xl font-bold tracking-tight pt-2",h),children:[f,d.jsx(pt,{value:o,includeSymbol:!1}),d.jsx("span",{className:"text-3xl ml-1",children:"₽"})]}),d.jsx("p",{className:"text-base text-muted-foreground pt-1",children:g}),l>0&&d.jsxs("p",{className:"text-sm text-muted-foreground pt-0.5",children:["Комиссия: ",m]})]})]})})},h4=500,f4=15,p4=1300,mN=()=>{const[t,e]=y.useState(!1),n=y.useRef(0),r=y.useRef(null),i=y.useCallback(()=>{const o=window.scrollY,l=n.current-o>f4,c=o>h4;l&&c&&(r.current&&clearTimeout(r.current),e(h=>h!==!0?!0:h),r.current=setTimeout(()=>{e(!1),r.current=null},p4)),n.current=o<=0?0:o},[]);y.useEffect(()=>{const o=window;k.log("[ScrollToTopButton Effect] Adding scroll listener to window");const a=()=>{requestAnimationFrame(i)};return o.addEventListener("scroll",a,{passive:!0}),()=>{k.log("[ScrollToTopButton Effect] Removing scroll listener from window"),o.removeEventListener("scroll",a),r.current&&(clearTimeout(r.current),r.current=null,k.log("[ScrollToTopButton Effect Cleanup] Cleared hide timeout."))}},[i]);const s=y.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);return d.jsx(ke,{variant:"secondary",size:"icon",className:U("fixed bottom-24 right-4 z-[60] h-11 w-11 rounded-full shadow-lg","bg-background/80 backdrop-blur-sm border border-border/50 hover:bg-muted","transition-opacity duration-300 ease-in-out",t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:s,"aria-label":"Прокрутить наверх","aria-hidden":!t,tabIndex:t?0:-1,children:d.jsx(WL,{className:"h-5 w-5"})})};var m4="Label",gN=y.forwardRef((t,e)=>d.jsx(ue.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gN.displayName=m4;var vN=gN;const g4=Td("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),at=y.forwardRef(({className:t,...e},n)=>d.jsx(vN,{ref:n,className:U(g4(),t),...e}));at.displayName=vN.displayName;Me.locale("ru");Me.extend(KF);Me.extend(Dl);Me.extend($l);Me.extend(ZF);Me.extend(QF);const v4=({index:t})=>d.jsxs("div",{className:U("flex items-center px-4 py-3 space-x-3 animate-pulse",t%2===0?"bg-muted/30":"bg-card"),children:[d.jsx("div",{className:"h-9 w-9 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"flex-grow min-w-0 space-y-1.5",children:[" ",d.jsx("div",{className:"h-3 w-3/5 rounded bg-muted"})," ",d.jsx("div",{className:"h-2.5 w-2/5 rounded bg-muted"})," "]}),d.jsx("div",{className:"h-4 w-16 rounded bg-muted flex-shrink-0 ml-2"})]}),y4=t=>{const e={};return t.forEach(n=>{const r=Me.utc(n.createdAt).local().startOf("day").toISOString();e[r]||(e[r]=[]),e[r].push(n)}),e},x4=t=>{const e=Me(t);if(e.isToday())return"Сегодня";if(e.isYesterday())return"Вчера";const n=Me().year();return e.year()===n?e.format("D MMMM"):e.format("D MMMM YYYY")},w4=()=>{var F;const{accountId:t}=vs(),e=Number(t),n=vt(),{accounts:r}=dr(),{tg:i}=Qt(),{operations:s,selectedAccountIds:o,filterOperationType:a,totalCount:l,isLoading:c,error:u,isInitialLoad:h,setAccountFilter:f,setOperationTypeFilter:p,fetchHistory:g,resetHistory:m}=t$(),w=y.useRef(null),[v,x]=y.useState(null),[b,S]=y.useState(!1);y.useEffect(()=>(e&&!isNaN(e)?f(e):(k.error("Invalid account ID in URL:",t),f(null)),()=>{m()}),[e,f,m]);const E=y.useMemo(()=>{var O;const T=o[0];return!T||!r?null:((O=r.find(N=>{var B;return((B=N.brokerAccount)==null?void 0:B.id)===T}))==null?void 0:O.brokerAccount)??null},[o,r]),C=y.useMemo(()=>E?E.telegramUserId?`Счёт ${E.telegramUserId}`:`Счёт ${E.id}`:"Счёт",[E]),_=y.useMemo(()=>{const T=o[0];if(!T||!r)return"Счёт...";const O=r.find(B=>{var Q;return((Q=B.brokerAccount)==null?void 0:Q.id)===T}),N=O==null?void 0:O.brokerAccount;return N?N.telegramUserId?`Счёт ${N.telegramUserId}`:N.title.replace(/["«»]/g,""):`Счёт #${T}`},[o,r]),P=y.useCallback(T=>{const O=T==="all"?null:Number(T);f(O)},[f]),L=y.useCallback(T=>{let O=null;T===Et.Buy.toString()?O=Et.Buy:T===Et.Sell.toString()&&(O=Et.Sell),p(O)},[p]),j=y.useCallback(()=>{!c&&s.length<l&&g(void 0,!0)},[c,s.length,l,g]);y.useEffect(()=>{const T=()=>n(`/portfolio/${e}`);return i&&(i.BackButton.show(),i.onEvent("backButtonClicked",T)),()=>{i&&(i.BackButton.hide(),i.offEvent("backButtonClicked",T))}},[i,n,e]),y.useEffect(()=>{const T=w.current;if(!T)return;const O=new IntersectionObserver(([N])=>{N.isIntersecting&&!c&&s.length<l&&(k.log("Intersection observer triggered load more history"),j())},{threshold:.1});return O.observe(T),()=>{T&&O.unobserve(T)}},[c,s.length,l,j]);const M=y.useMemo(()=>y4(s),[s]),z=y.useMemo(()=>Object.keys(M).sort((T,O)=>Me(O).valueOf()-Me(T).valueOf()),[M]),R=()=>a===Et.Buy?"Нет операций покупки.":a===Et.Sell?"Нет операций продажи.":"Операций не найдено.",I=y.useCallback(T=>{x(T),S(!0)},[]),$=y.useCallback(()=>{S(!1),setTimeout(()=>x(null),300)},[]),D=a===null?"all":a.toString();return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs(St,{className:"flex-shrink-0 shadow-sm border rounded-lg",children:[d.jsxs(mr,{className:"pb-2 pt-4",children:[" ",d.jsxs("div",{className:"relative flex justify-center items-center h-8",children:[" ",d.jsx("div",{className:"absolute left-0 h-8 w-8"})," ",d.jsxs("div",{className:"flex flex-col items-center",children:[" ",d.jsx(Vr,{className:"text-lg font-semibold",children:"История операций"})," "]})," "]})," "]}),d.jsx(Xt,{className:"pt-2 pb-4",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 space-y-1",children:[d.jsx(at,{htmlFor:"accountSelector",className:"block text-xs font-medium text-muted-foreground",children:"Счет"}),d.jsxs(im,{value:((F=o[0])==null?void 0:F.toString())??"all",onValueChange:P,disabled:c||!r||r.length===0,children:[d.jsxs(Wu,{id:"accountSelector",className:"h-9 text-sm w-full",children:[" ",d.jsx("span",{className:"truncate",children:_})," "]}),d.jsxs(qu,{children:[" ",r==null?void 0:r.map(T=>{const O=T.brokerAccount;if(!O)return null;const N=O.telegramUserId?`Счёт ${O.telegramUserId}`:O.title.replace(/["«»]/g,"");return d.jsxs(ni,{value:O.id.toString(),children:[" ",N," "]},O.id)})," ",(!r||r.length===0)&&d.jsx(ni,{value:"-",disabled:!0,children:"Нет счетов"})," "]})]})]}),d.jsxs("div",{className:"flex-1 space-y-1",children:[d.jsx(at,{htmlFor:"operationType",className:"block text-xs font-medium text-muted-foreground",children:"Тип операции"}),d.jsxs(im,{value:D,onValueChange:L,disabled:c,children:[d.jsxs(Wu,{id:"operationType",className:"h-9 text-sm w-full",children:[" ",d.jsx(FF,{placeholder:"Все типы"})," "]}),d.jsxs(qu,{children:[" ",d.jsx(ni,{value:"all",children:"Все типы"})," ",d.jsx(ni,{value:Et.Buy.toString(),children:"Покупка"})," ",d.jsx(ni,{value:Et.Sell.toString(),children:"Продажа"})," "]})]})]})]})})]}),d.jsx(St,{className:"shadow-sm border rounded-lg overflow-hidden flex flex-col flex-grow",children:d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar min-h-0",children:h?d.jsxs("div",{className:"divide-y divide-border/60",children:[" ",Array.from({length:7}).map((T,O)=>d.jsx(v4,{index:O},O))," "]}):u?d.jsxs("div",{className:"p-6 flex items-center justify-center min-h-[200px]",children:[" ",d.jsx(gt,{message:u})," "]}):s.length>0?d.jsxs("div",{className:"relative",children:[z.map(T=>d.jsxs("div",{children:[d.jsx(WF,{dateString:x4(T)}),d.jsx("div",{className:"divide-y divide-border/60",children:M[T].map(O=>d.jsx(HF,{operation:O,onItemClick:I,accountSubtitle:C},O.id))})]},T)),d.jsx("div",{ref:w,style:{height:"1px"},"aria-hidden":"true"}),c&&s.length>0&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ee,{size:"sm"})})]}):d.jsxs("div",{className:"flex justify-center items-center min-h-[200px] text-muted-foreground text-center p-4",children:[" ",R()," "]})})}),d.jsx(d4,{isOpen:b,onClose:$,operation:v,accountSubtitle:C}),d.jsx(mN,{})]})};var uv="Avatar",[b4,V8]=Ft(uv),[S4,yN]=b4(uv),xN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=y.useState("idle");return d.jsx(S4,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:d.jsx(ue.span,{...r,ref:e})})});xN.displayName=uv;var wN="AvatarImage",bN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=yN(wN,n),a=k4(r,s.referrerPolicy),l=Ot(c=>{i(c),o.onImageLoadingStatusChange(c)});return ht(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?d.jsx(ue.img,{...s,ref:e,src:r}):null});bN.displayName=wN;var SN="AvatarFallback",kN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=yN(SN,n),[o,a]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?d.jsx(ue.span,{...i,ref:e}):null});kN.displayName=SN;function k4(t,e){const[n,r]=y.useState("idle");return ht(()=>{if(!t){r("error");return}let i=!0;const s=new window.Image,o=a=>()=>{i&&r(a)};return r("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var CN=xN,EN=bN,NN=kN;const qd=y.forwardRef(({className:t,...e},n)=>d.jsx(CN,{ref:n,className:U("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));qd.displayName=CN.displayName;const Yd=y.forwardRef(({className:t,...e},n)=>d.jsx(EN,{ref:n,className:U("aspect-square h-full w-full",t),...e}));Yd.displayName=EN.displayName;const Kd=y.forwardRef(({className:t,...e},n)=>d.jsx(NN,{ref:n,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted uppercase",t),...e}));Kd.displayName=NN.displayName;const C4=5e3;let nf=0;function E4(){return nf=(nf+1)%Number.MAX_VALUE,nf.toString()}const Rs=new Map,N4=(t,e)=>{switch(e.type){case"ADD_TOAST":{const{toasts:n}=t,r={...e.toast,open:!0};return Rs.forEach((i,s)=>{clearTimeout(i),Rs.delete(s)}),{...t,toasts:[r]}}case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"REMOVE_TOAST":{const{toastId:n}=e;return n&&Rs.has(n)&&(clearTimeout(Rs.get(n)),Rs.delete(n)),{...t,toasts:n===void 0?[]:t.toasts.filter(r=>r.id!==n)}}default:return t}},Xc=[];let Ra={toasts:[]};function uo(t){Ra=N4(Ra,t),Xc.forEach(e=>{e(Ra)})}function _4(t){const e=E4(),n=()=>{uo({type:"UPDATE_TOAST",toast:{id:e,open:!1}}),setTimeout(()=>{r(e)},1e3)},r=s=>{uo({type:"REMOVE_TOAST",toastId:s})};uo({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}});const i=t.duration??C4;if(i!==1/0){const s=setTimeout(n,i);Rs.set(e,s)}return{id:e,dismiss:n}}function _n(){const[t,e]=y.useState(Ra);return y.useEffect(()=>(Xc.push(e),()=>{const n=Xc.indexOf(e);n>-1&&Xc.splice(n,1)}),[t]),{...t,toast:_4,dismiss:n=>{n?Ra.toasts.find(i=>i.id===n)&&(uo({type:"UPDATE_TOAST",toast:{id:n,open:!1}}),setTimeout(()=>{uo({type:"REMOVE_TOAST",toastId:n})},1e3)):uo({type:"REMOVE_TOAST"})}}}var rf="rovingFocusGroup.onEntryFocus",T4={bubbles:!1,cancelable:!0},Gd="RovingFocusGroup",[sm,_N,A4]=Pd(Gd),[P4,Zd]=Ft(Gd,[A4]),[j4,R4]=P4(Gd),TN=y.forwardRef((t,e)=>d.jsx(sm.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(sm.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(M4,{...t,ref:e})})}));TN.displayName=Gd;var M4=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,f=y.useRef(null),p=Pe(e,f),g=Fl(s),[m=null,w]=Nn({prop:o,defaultProp:a,onChange:l}),[v,x]=y.useState(!1),b=Ot(c),S=_N(n),E=y.useRef(!1),[C,_]=y.useState(0);return y.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(rf,b),()=>P.removeEventListener(rf,b)},[b]),d.jsx(j4,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:m,onItemFocus:y.useCallback(P=>w(P),[w]),onItemShiftTab:y.useCallback(()=>x(!0),[]),onFocusableItemAdd:y.useCallback(()=>_(P=>P+1),[]),onFocusableItemRemove:y.useCallback(()=>_(P=>P-1),[]),children:d.jsx(ue.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:de(t.onMouseDown,()=>{E.current=!0}),onFocus:de(t.onFocus,P=>{const L=!E.current;if(P.target===P.currentTarget&&L&&!v){const j=new CustomEvent(rf,T4);if(P.currentTarget.dispatchEvent(j),!j.defaultPrevented){const M=S().filter(D=>D.focusable),z=M.find(D=>D.active),R=M.find(D=>D.id===m),$=[z,R,...M].filter(Boolean).map(D=>D.ref.current);jN($,u)}}E.current=!1}),onBlur:de(t.onBlur,()=>x(!1))})})}),AN="RovingFocusGroupItem",PN=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=ar(),l=s||a,c=R4(AN,n),u=c.currentTabStopId===l,h=_N(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),d.jsx(sm.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:d.jsx(ue.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:de(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:de(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:de(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=O4(g,c.orientation,c.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=h().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=c.loop?D4(v,x+1):v.slice(x+1)}setTimeout(()=>jN(v))}})})})});PN.displayName=AN;var I4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function L4(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function O4(t,e,n){const r=L4(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return I4[r]}function jN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function D4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var RN=TN,MN=PN,dv="Radio",[$4,IN]=Ft(dv),[z4,F4]=$4(dv),LN=y.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[h,f]=y.useState(null),p=Pe(e,w=>f(w)),g=y.useRef(!1),m=h?c||!!h.closest("form"):!0;return d.jsxs(z4,{scope:n,checked:i,disabled:o,children:[d.jsx(ue.button,{type:"button",role:"radio","aria-checked":i,"data-state":$N(i),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:de(t.onClick,w=>{i||l==null||l(),m&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),m&&d.jsx(B4,{control:h,bubbles:!g.current,name:r,value:a,checked:i,required:s,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});LN.displayName=dv;var ON="RadioIndicator",DN=y.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=F4(ON,n);return d.jsx(Ur,{present:r||s.checked,children:d.jsx(ue.span,{"data-state":$N(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});DN.displayName=ON;var B4=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=zd(n),a=Dd(e);return y.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $N(t){return t?"checked":"unchecked"}var V4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hv="RadioGroup",[U4,U8]=Ft(hv,[Zd,IN]),zN=Zd(),FN=IN(),[H4,W4]=U4(hv),BN=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:h,...f}=t,p=zN(n),g=Fl(c),[m,w]=Nn({prop:s,defaultProp:i,onChange:h});return d.jsx(H4,{scope:n,name:r,required:o,disabled:a,value:m,onValueChange:w,children:d.jsx(RN,{asChild:!0,...p,orientation:l,dir:g,loop:u,children:d.jsx(ue.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:g,...f,ref:e})})})});BN.displayName=hv;var VN="RadioGroupItem",UN=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=W4(VN,n),o=s.disabled||r,a=zN(n),l=FN(n),c=y.useRef(null),u=Pe(e,c),h=s.value===i.value,f=y.useRef(!1);return y.useEffect(()=>{const p=m=>{V4.includes(m.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),d.jsx(MN,{asChild:!0,...a,focusable:!o,active:h,children:d.jsx(LN,{disabled:o,required:s.required,checked:h,...l,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:de(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:de(i.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});UN.displayName=VN;var q4="RadioGroupIndicator",HN=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=FN(n);return d.jsx(DN,{...i,...r,ref:e})});HN.displayName=q4;var WN=BN,qN=UN,Y4=HN;const om=y.forwardRef(({className:t,...e},n)=>d.jsx(WN,{className:U("grid gap-2",t),...e,ref:n}));om.displayName=WN.displayName;const Ms=y.forwardRef(({className:t,...e},n)=>d.jsx(qN,{ref:n,className:U("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:d.jsx(Y4,{className:"flex items-center justify-center",children:d.jsx(ZL,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ms.displayName=qN.displayName;const am="themePreference",K4=()=>{try{const t=localStorage.getItem(am);if(t==="light"||t==="dark"||t==="system")return t}catch(t){k.error("Error reading initial theme preference:",t)}return"system"},jo=pr()(Fo(t=>({preference:K4(),setPreference:e=>{k.log(`[ThemeStore] Setting preference to: ${e}`),t({preference:e});try{localStorage.setItem(am,e)}catch(n){k.error("Error saving theme preference to localStorage:",n)}}}),{name:am,storage:xs(()=>localStorage)})),G4="https://t.me/CounterCulturalConversation",YN="app-dynamic-config",Z4=()=>{var t;try{const e=localStorage.getItem(YN);if(e){const n=JSON.parse(e);if((t=n==null?void 0:n.state)!=null&&t.chatLink&&typeof n.state.chatLink=="string")return n.state.chatLink}}catch(e){k.error("Error reading initial chat link:",e)}return G4},X4=pr()(Fo(t=>({chatLink:Z4(),setChatLink:e=>{k.log(`[ConfigStore] Setting chatLink to: ${e}`),t({chatLink:e})}}),{name:YN,storage:xs(()=>localStorage),partialize:t=>({chatLink:t.chatLink})})),Q4=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){k.error("Failed to parse mock user data:",e)}return null},_s=({label:t,onClick:e,disabled:n=!1,currentValue:r,Icon:i,children:s})=>{const{toast:o}=_n(),a=()=>{n?o({title:"В разработке",description:"Этот раздел скоро появится.",duration:2e3}):e&&e()};return d.jsxs("button",{onClick:a,disabled:n,className:U("flex items-center w-full text-left p-4 transition-colors relative",n?"text-muted-foreground cursor-not-allowed opacity-60":"hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[i&&d.jsx(i,{className:"h-5 w-5 mr-3 text-muted-foreground flex-shrink-0"}),d.jsx("span",{className:"text-base flex-grow",children:t}),r&&d.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:r}),s,d.jsx(Dk,{className:U("h-5 w-5 flex-shrink-0",n?"text-muted-foreground/50":"text-muted-foreground")})]})},J4=()=>{k.log("[ProfilePage] Rendering...");const{tg:t,user:e}=Qt(),n=Mt(B=>B.logout),{isAdminAuthenticated:r}=er(),{toast:i}=_n(),[s,o]=y.useState(!1),a=jo(B=>B.preference),l=jo(B=>B.setPreference),[c,u]=y.useState(!1),[h,f]=y.useState(!1),[p,g]=y.useState(!1),m=X4(B=>B.chatLink),w=vt(),{notificationsEnabled:v,setNotificationsEnabled:x}=Ci(),b=y.useMemo(()=>ys(),[]),S=Oe.useMemo(()=>{k.log("[ProfilePage useMemo] Calculating displayUser...",{telegramUserSDK:e,isMock:b.useMock});const B=e;if(B&&typeof B.id=="number")return k.log("[ProfilePage useMemo] Using real Telegram user data."),{userId:B.id,firstName:B.first_name||null,lastName:B.last_name||null,username:B.username||null,photoUrl:B.photo_url||null,isBot:B.is_bot||!1};const Q=b.useMock,A=b.mockInitData;if(Q&&A){k.log("[ProfilePage useMemo] Using mock data.");const J=Q4(A);return k.log("[ProfilePage useMemo] Parsed mock user:",J),J}return k.warn("[ProfilePage useMemo] No real user and no mock data, returning null."),null},[e,b.useMock,b.mockInitData]);k.log("[ProfilePage] displayUser value:",S),y.useEffect(()=>{o(!1)},[S==null?void 0:S.userId]);const E=(S==null?void 0:S.firstName)||"User",C=(S==null?void 0:S.lastName)||"",_=S==null?void 0:S.username,P=S==null?void 0:S.photoUrl,L=S==null?void 0:S.userId,j=[E==null?void 0:E[0],C==null?void 0:C[0]].filter(Boolean).map(B=>B==null?void 0:B.toUpperCase()).join("")||"?",M=()=>{n()},z=()=>{s||o(!0)},R=B=>{l(B),f(!1)},I=()=>{u(!0)},$=()=>{t!=null&&t.openTelegramLink?t.openTelegramLink(m):(window.open(m,"_blank"),i({title:"Открытие ссылки",description:"Попытка открыть ссылку на чат.",duration:2e3})),u(!1)},D=()=>{switch(a){case"light":return"Светлая";case"dark":return"Темная";case"system":default:return"Как в Telegram"}},F=()=>{w("/faq")},T=()=>{w("/admin/panel",{state:{fromProfile:!0}})},O=()=>{g(!0)},N=B=>{x(B==="true"),g(!1)};return S?(k.log("[ProfilePage] Rendering main content..."),d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsx(St,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsxs("div",{className:"divide-y divide-border/60",children:[d.jsxs("div",{className:"flex items-center p-4 space-x-4",children:[d.jsx(qd,{className:"w-12 h-12 flex-shrink-0 border",children:!s&&P?d.jsx(Yd,{src:P,alt:_||"User",onError:z}):d.jsx(Kd,{className:"text-xl",children:j})}),d.jsxs("div",{className:"overflow-hidden flex-grow",children:[d.jsxs("p",{className:"text-base font-semibold truncate",children:[E," ",C]}),_&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",_]}),L&&d.jsxs("p",{className:"text-xs text-muted-foreground/70 mt-0.5",children:["Telegram ID: ",L]})]}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"flex-shrink-0 text-destructive",onClick:M,children:[d.jsx(Fk,{className:"h-5 w-5"})," ",d.jsx("span",{className:"sr-only",children:"Выйти"})]})]}),d.jsx(_s,{label:"Уведомления",onClick:O,Icon:v?Hp:Up,currentValue:v?"Включены":"Выключены"}),d.jsx(_s,{label:"Ответы на часто задаваемые вопросы",onClick:F,Icon:$u}),d.jsx(_s,{label:"Связаться со службой поддержки",disabled:!0,Icon:sO}),d.jsx(_s,{label:"Тема оформления",onClick:()=>f(!0),Icon:Fx,currentValue:D()}),d.jsx(_s,{label:"Пригласи друга получи подарочные акции",disabled:!0,Icon:tO}),d.jsx(_s,{label:"Наш телеграмм чат",onClick:I,Icon:dO})]})})}),r&&d.jsx("div",{className:"mt-4 flex-shrink-0",children:d.jsxs(ke,{variant:"secondary",className:"w-full h-12 text-base font-medium flex items-center justify-center gap-2 shadow-sm",onClick:T,children:[d.jsx(Vk,{className:"h-5 w-5"})," Админ-панель"]})}),d.jsx(Pa,{open:c,onOpenChange:u,children:d.jsxs(ao,{children:[d.jsxs(lo,{children:[d.jsxs(co,{className:"flex items-center gap-2",children:[" ",d.jsx(eO,{className:"h-5 w-5 text-muted-foreground"})," Переход в Телеграмм "]}),d.jsxs(ja,{className:"pt-2 text-left",children:[" Вы собираетесь открыть наш чат в Телеграмм: ",d.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"block text-primary hover:underline truncate mt-1 text-sm",onClick:B=>B.preventDefault(),children:[" ",m," "]})," "]})]}),d.jsxs(lv,{className:"mt-4",children:[d.jsx(hN,{asChild:!0,children:d.jsx(ke,{type:"button",variant:"outline",children:d.jsx("span",{children:"Отмена"})})}),d.jsx(ke,{type:"button",onClick:$,children:" Перейти "})]})]})}),d.jsx(Pa,{open:h,onOpenChange:f,children:d.jsxs(ao,{className:"sm:max-w-[425px]",children:[" ",d.jsxs(lo,{children:[" ",d.jsx(co,{children:"Выбор темы оформления"})," ",d.jsx(ja,{children:" Выберите, как должно выглядеть приложение. "})," "]})," ",d.jsxs(om,{value:a,onValueChange:B=>R(B),className:"grid gap-4 py-4",children:[" ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"light",id:"theme-light"})," ",d.jsxs(at,{htmlFor:"theme-light",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(fO,{className:"h-4 w-4"})," Светлая "]})," "]})," ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"dark",id:"theme-dark"})," ",d.jsxs(at,{htmlFor:"theme-dark",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(aO,{className:"h-4 w-4"})," Темная "]})," "]})," ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"system",id:"theme-system"})," ",d.jsxs(at,{htmlFor:"theme-system",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(Fx,{className:"h-4 w-4"})," Как в Telegram "]})," "]})," "]})," "]})}),d.jsx(Pa,{open:p,onOpenChange:g,children:d.jsxs(ao,{className:"sm:max-w-[425px]",children:[d.jsxs(lo,{children:[d.jsx(co,{children:"Настройки уведомлений"}),d.jsx(ja,{children:"Включите или выключите получение уведомлений от приложения."})]}),d.jsxs(om,{value:v?"true":"false",onValueChange:N,className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(Ms,{value:"true",id:"notif-enabled"}),d.jsxs(at,{htmlFor:"notif-enabled",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(Hp,{className:"h-4 w-4"})," Включены"]})]}),d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(Ms,{value:"false",id:"notif-disabled"}),d.jsxs(at,{htmlFor:"notif-disabled",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(Up,{className:"h-4 w-4"})," Выключены"]})]})]})]})})]})):(k.error("[ProfilePage] displayUser is null or undefined, rendering error message."),d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:" Не удалось загрузить данные пользователя. Попробуйте перезайти. "}))};var fv="Checkbox",[e3,H8]=Ft(fv),[t3,n3]=e3(fv),KN=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Pe(e,S=>p(S)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Nn({prop:i,defaultProp:s,onChange:c}),b=y.useRef(v);return y.useEffect(()=>{const S=f==null?void 0:f.form;if(S){const E=()=>x(b.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[f,x]),d.jsxs(t3,{scope:n,state:v,disabled:a,children:[d.jsx(ue.button,{type:"button",role:"checkbox","aria-checked":vi(v)?"mixed":v,"aria-required":o,"data-state":XN(v),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onKeyDown:de(t.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:de(t.onClick,S=>{x(E=>vi(E)?!0:!E),w&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),w&&d.jsx(r3,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:vi(s)?!1:s})]})});KN.displayName=fv;var GN="CheckboxIndicator",ZN=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=n3(GN,n);return d.jsx(Ur,{present:r||vi(s.state)||s.state===!0,children:d.jsx(ue.span,{"data-state":XN(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});ZN.displayName=GN;var r3=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...s}=t,o=y.useRef(null),a=zd(n),l=Dd(e);y.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==n&&p){const g=new Event("click",{bubbles:r});u.indeterminate=vi(n),p.call(u,vi(n)?!1:n),u.dispatchEvent(g)}},[a,n,r]);const c=y.useRef(vi(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...s,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function vi(t){return t==="indeterminate"}function XN(t){return vi(t)?"indeterminate":t?"checked":"unchecked"}var QN=KN,i3=ZN;const JN=y.forwardRef(({className:t,...e},n)=>d.jsx(QN,{ref:n,className:U("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:d.jsx(i3,{className:U("flex items-center justify-center text-current"),children:d.jsx(Du,{className:"h-4 w-4"})})}));JN.displayName=QN.displayName;const s3=()=>{const{fetchPortfolio:t}=dr(),{toast:e}=_n(),[n,r]=y.useState(!1),[i,s]=y.useState(!1),o=async()=>{if(!i){e({title:"Требуется подтверждение",description:"Пожалуйста, подтвердите, что вы понимаете, что это обучающее приложение.",variant:"destructive"});return}if(!n){r(!0),k.log("[RegisterInitialPage] Calling createInitialBrokerAccount API...");try{const a=await AL();k.log("[RegisterInitialPage] API Response:",a),a.isSuccess?(e({title:"Счет создан!",description:"Ваш первый брокерский счет готов.",variant:"success"}),await t(!0)):(e({title:"Ошибка создания",description:a.errorMessage||"Не удалось создать счет.",variant:"destructive"}),k.error("[RegisterInitialPage] Account creation failed:",a.errorMessage))}catch(a){k.error("[RegisterInitialPage] Unexpected error in handleCreateAccount:",a),e({title:"Ошибка клиента",description:(a==null?void 0:a.message)||"Произошла непредвиденная ошибка.",variant:"destructive"})}finally{r(!1)}}};return d.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ВНИМАНИЕ!"})}),d.jsxs("div",{className:"space-y-3 text-sm text-center text-gray-600",children:[d.jsxs("p",{children:["Данное приложение является ",d.jsx("strong",{className:"font-semibold",children:"обучающим"}),"."]}),d.jsxs("p",{children:["Эти заработанные или потерянные деньги - ",d.jsx("strong",{className:"font-semibold text-red-600",children:"не настоящие"}),"."]})]}),d.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 border border-blue-200 rounded",children:[d.jsx(JN,{id:"confirmation",checked:i,onCheckedChange:a=>s(!!a),"aria-label":"Confirm understanding"}),d.jsx(at,{htmlFor:"confirmation",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-gray-700",children:"Да, я понимаю, что это не настоящее инвестиционное приложение с ненастоящими деньгами."})]}),d.jsx(ke,{onClick:o,disabled:n||!i,className:"w-full",children:n?d.jsx(Ee,{size:"sm"}):"Открыть первый брокерский счет"})]})})},o3=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){k.error("Failed to parse mock user data:",e)}return null},a3=()=>{k.log("--- RENDERING LoginPage ---");const{user:t,initData:e}=Qt(),{login:n,isAuthenticated:r,isLoading:i}=Mt(),[s,o]=y.useState(!1),{toast:a}=_n(),l=vt(),{IS_MOCK_MODE:c,MOCK_INIT_DATA_STRING:u}=y.useMemo(()=>{const E=ys();return{IS_MOCK_MODE:E.useMock,MOCK_INIT_DATA_STRING:E.mockInitData||""}},[]),h=y.useMemo(()=>{const E=t;return E&&typeof E.id=="number"?{userId:E.id,firstName:E.first_name||null,lastName:E.last_name||null,username:E.username||null,photoUrl:E.photo_url||null,isBot:E.is_bot||!1}:c&&u?o3(u):null},[t,c,u]),f=y.useMemo(()=>(c?u:e)||null,[e,c,u]);if(i)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx(Ee,{size:"lg"})});if(r)return k.log("[LoginPage] Already authenticated, redirecting..."),d.jsx(gi,{to:"/",replace:!0});const p=async()=>{var E;if(k.log("[LoginPage] Login button clicked."),!f){a({title:"Ошибка",description:"Необходимые данные для входа недоступны.",variant:"destructive"}),k.error("[LoginPage] Login button clicked but loginDataString is null or empty.",{isMock:c});return}o(!0),k.log("[LoginPage] Calling loginByTelegramUserInfo...");try{const C=await Sk(f);if(k.log("[LoginPage] Manual Login API Response Raw:",C),C.isSuccess&&((E=C.resultObject)!=null&&E.jwt))n(C.resultObject.userId,C.resultObject.jwt,f),a({title:"Вход выполнен",variant:"success",duration:2e3});else throw new Error(C.errorMessage||"Не удалось войти через API.")}catch(C){k.error("[LoginPage] Manual Login Exception/Error:",C),a({title:"Ошибка входа",description:(C==null?void 0:C.message)||"Неизвестная ошибка.",variant:"destructive"})}finally{o(!1)}},g=()=>{l("/admin/login")},m=!f||s,w=(h==null?void 0:h.firstName)||"Welcome",v=(h==null?void 0:h.lastName)||"",x=h==null?void 0:h.username,b=h==null?void 0:h.photoUrl,S=[w==null?void 0:w[0],v==null?void 0:v[0]].filter(Boolean).map(E=>E.toUpperCase()).join("")||"?";return k.log("[LoginPage - Before Render]",{IS_MOCK_MODE:c,loginDataStringExists:!!f,displayUserExists:!!h,displayUserValue:h,isAuthLoading:i,isAuthenticated:r}),d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900/30",children:d.jsxs(St,{className:"w-full max-w-sm shadow-xl rounded-xl",children:[d.jsxs(mr,{className:"items-center text-center pt-8 pb-6",children:[d.jsx(qd,{className:"w-24 h-24 mb-4 border-4 border-background shadow-md",children:b?d.jsx(Yd,{src:b,alt:x||"User",className:"object-cover"}):d.jsx(Kd,{className:"text-4xl font-light text-muted-foreground bg-gradient-to-br from-slate-200 to-slate-300 dark:from-gray-600 dark:to-gray-700",children:S!=="?"?S:""})}),d.jsx(Vr,{className:"text-xl font-semibold",children:w==="Welcome"?"Добро пожаловать!":`${w}${v?` ${v}`:""}`}),x&&d.jsxs(Nd,{children:["@",x]})]}),d.jsxs(Xt,{className:"flex flex-col items-center space-y-5 px-6 pb-8",children:[d.jsxs(ke,{className:"w-full h-12 text-base font-semibold shadow hover:shadow-md transition-shadow",onClick:p,disabled:m,children:[s&&d.jsx(Ee,{size:"sm"}),"Войти с помощью Telegram"]}),d.jsxs("div",{className:"relative w-full max-w-[200px]",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("span",{className:"w-full border-t"})}),d.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:d.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"или"})})]}),d.jsx(ke,{variant:"link",className:"text-muted-foreground hover:text-primary h-9 px-1",onClick:g,children:"Войти по логину и паролю"})]})]})})},e_=Oe.memo(({asset:t})=>d.jsx(Ad,{logoUrl:t.logoUrl,ticker:t.ticker,className:"h-10 w-10 rounded-full border"}));e_.displayName="AssetHeader";const l3=async t=>{const e="Buy operation failed.";k.log("[API/Trade] buyAssets payload:",t);try{const n=await et.post("/api/BrokerAccountUser/BuyAssets",t);return k.log("[API/Trade] buyAssets response:",n==null?void 0:n.data),lt(n,e)}catch(n){return ct(n,e)}},c3=async t=>{const e="Sell operation failed.";k.log("[API/Trade] sellAssets payload:",t);try{const n=await et.post("/api/BrokerAccountUser/SellAssets",t);return k.log("[API/Trade] sellAssets response:",n==null?void 0:n.data),lt(n,e)}catch(n){return ct(n,e)}},$n=y.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));$n.displayName="Input";var u3="Separator",S0="horizontal",d3=["horizontal","vertical"],t_=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=S0,...i}=t,s=h3(r)?r:S0,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return d.jsx(ue.div,{"data-orientation":s,...a,...i,ref:e})});t_.displayName=u3;function h3(t){return d3.includes(t)}var n_=t_;const r_=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>d.jsx(n_,{ref:i,decorative:n,orientation:e,className:U("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));r_.displayName=n_.displayName;const f3=(t,e)=>{if(t===null||typeof t>"u"||isNaN(t))return"---";const n=Math.max(2,Math.min(e,20));return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:n}).format(t)},i_=Oe.memo(({asset:t,accounts:e,isTradingProhibited:n=!1,isOutOfCirculation:r=!1})=>{var ne,ae,Ce,Be;const{toast:i}=_n(),{fetchPortfolio:s}=dr(),o=Ci(pe=>pe.fetchUnreadCount),[a,l]=y.useState(""),[c,u]=y.useState(1),[h,f]=y.useState(!1),{prices:p,isLoading:g,error:m}=_d(t?[t.ticker]:[]),w=t?p.get(t.ticker):null,v=y.useMemo(()=>(e==null?void 0:e.map(pe=>pe.brokerAccount).filter(pe=>!!pe))??[],[e]),x=y.useMemo(()=>e==null?void 0:e.find(pe=>{var De;return((De=pe.brokerAccount)==null?void 0:De.id.toString())===a}),[e,a]),b=y.useMemo(()=>x==null?void 0:x.portfolioItems.find(pe=>pe.assetId===(t==null?void 0:t.id)),[x,t==null?void 0:t.id]),S=y.useMemo(()=>(b==null?void 0:b.quantity)??0,[b]),E=y.useMemo(()=>{var pe;return((pe=x==null?void 0:x.portfolioItems.find(De=>{var Ve;return((Ve=De.asset)==null?void 0:Ve.ticker)==="RUB"}))==null?void 0:pe.quantity)??0},[x]),C=y.useMemo(()=>Math.max(1,(t==null?void 0:t.lotSize)||1),[t]),_=y.useMemo(()=>c*C,[c,C]),P=y.useMemo(()=>w?w.price:null,[w]),L=y.useMemo(()=>(t==null?void 0:t.price)??null,[t]),j=P??L,M=y.useMemo(()=>j!==null?Math.round(j*_*100):0,[j,_]),z=y.useMemo(()=>(w==null?void 0:w.commissionFeePercent)??(t==null?void 0:t.commissionFeePercent)??0,[w,t]),R=y.useMemo(()=>Math.round(M*(z/100)),[M,z]),I=y.useMemo(()=>M+R,[M,R]),$=y.useMemo(()=>M-R,[M,R]),D=y.useMemo(()=>!g&&j!==null,[g,j]),F=S>0;y.useEffect(()=>{!a&&v.length>0&&l(v[0].id.toString())},[v,a]),y.useEffect(()=>{u(1)},[a]);const T=y.useCallback(pe=>{const De=pe.target.value;if(De===""){u(0);return}let Ve=parseInt(De,10);Ve=Math.max(1,isNaN(Ve)||Ve<1?1:Ve),u(Ve)},[]),O=y.useCallback(pe=>{if(n)return"Торговля запрещена";if(r)return"Актив вышел из обращения";if(h)return"Обработка...";if(!t)return"Актив не загружен";if(!D)return"Ожидание цены...";if(!a)return"Выберите счет";if(c<=0)return"Кол-во лотов > 0";if(pe==="buy"&&I>E)return"Недостаточно средств";if(pe==="sell"){if(!F)return"Нет актива для продажи";if(_>S)return"Недостаточно активов"}return null},[n,r,h,t,D,c,a,I,E,F,_,S]),N=O("buy"),B=N!==null,Q=O("sell"),A=!F||Q!==null,J=F?Q:"Нет актива для продажи",le=y.useCallback(async pe=>{if(n){i({title:"Торговля запрещена",description:"Операции с этим активом временно недоступны.",variant:"destructive"});return}if(r){i({title:"Торговля недоступна",description:"Актив вышел из обращения.",variant:"destructive"});return}const De=pe==="buy"?N:J;if(!a){i({title:"Счет не выбран",variant:"destructive"});return}if(De){i({title:pe==="buy"?"Покупка недоступна":"Продажа недоступна",description:De,variant:"destructive"});return}if(!t||!t.id||j===null||c<=0){i({title:"Ошибка данных",description:"Недостаточно данных для совершения сделки.",variant:"destructive"});return}f(!0);const Ve={BrokerAccountId:parseInt(a,10),AssetId:t.id,Quantity:_};try{const Bt=await(pe==="buy"?l3:c3)(Ve);if(Bt.isSuccess)i({title:"Заявка создана",description:`${pe==="buy"?"Покупка":"Продажа"} ${c} лот(ов) ${t.ticker}`,variant:"success"}),s(!0),o(!0),k.log("[AssetTradeForm] Trade successful, triggered portfolio and unread count fetch."),u(1);else throw new Error(Bt.errorMessage||"Операция не удалась.")}catch(Yn){i({title:"Ошибка заявки",description:Yn.message||"Неизвестная ошибка.",variant:"destructive"})}finally{f(!1)}},[n,r,t,a,c,C,_,j,N,J,i,s,o]),ce=y.useCallback(pe=>pe?d.jsxs(ni,{value:pe.id.toString(),children:[" ",d.jsxs("div",{className:"flex justify-between w-full items-center",children:[" ",d.jsx("span",{children:pe.title.replace(/["«»]/g,"")})," ",d.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[" ",pe.telegramUserId||"N/A"," "]})," "]})," "]},pe.id):null,[]);if(!t)return d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Актив не найден."});let X=2;t&&typeof t.decimals=="number"&&t.decimals>=0?X=t.decimals:t&&k.warn(`[AssetTradeForm] Asset ${t.ticker} has invalid decimals: ${t.decimals}. Using default (2) for input formatting.`);const se=j!==null&&!isNaN(j)?f3(j,X):g?"Загрузка...":"---",H=n||r,q=n?"Торговля запрещена":r?"Актив вышел из обращения":"";return d.jsxs("div",{className:U("space-y-5 relative",H&&"opacity-60 pointer-events-none"),children:[H&&d.jsx("div",{className:"absolute inset-0 bg-background/30 backdrop-blur-sm z-10 flex items-center justify-center rounded-md",children:d.jsxs("div",{className:U("flex items-center gap-2 p-3 rounded-lg shadow border",n?"bg-destructive/10 border-destructive/30 text-destructive":"bg-amber-500/10 border-amber-500/30 text-amber-700 dark:text-amber-300"),children:[d.jsx(Mk,{size:16}),d.jsx("span",{className:"text-sm font-medium",children:q})]})}),d.jsxs("div",{children:[d.jsx(at,{htmlFor:"trade-account",className:"text-xs text-muted-foreground mb-1 block",children:"На счет"}),d.jsxs(im,{value:a,onValueChange:l,disabled:H||v.length<=0||h,children:[d.jsx(Wu,{id:"trade-account",className:"h-auto py-2.5 px-3 justify-start text-left",children:x&&e?d.jsxs("div",{className:"flex items-center gap-3",children:[" ",d.jsxs("span",{className:"flex items-center justify-center h-7 w-7 bg-muted rounded text-xs font-mono text-muted-foreground flex-shrink-0",children:[" ",((ae=(ne=x.brokerAccount)==null?void 0:ne.type)==null?void 0:ae.substring(0,3).toUpperCase())||"ACC"," "]})," ",d.jsxs("div",{className:"min-w-0",children:[" ",d.jsxs("p",{className:"text-sm font-medium leading-tight truncate",children:[" ",(Ce=x.brokerAccount)==null?void 0:Ce.title.replace(/["«»]/g,"")," "]})," ",d.jsxs("p",{className:"text-xs leading-tight text-muted-foreground",children:[" ",((Be=x.brokerAccount)==null?void 0:Be.telegramUserId)||"N/A"," "]})," "]})," "]}):d.jsx("span",{className:"text-muted-foreground text-sm",children:v.length>0?"Выберите счет...":"Нет доступных счетов"})}),d.jsxs(qu,{children:[" ",v.map(pe=>ce(pe))," ",v.length===0&&d.jsx(ni,{value:"-",disabled:!0,children:"Нет доступных счетов"})," "]})]}),x&&d.jsxs("div",{className:"text-xs text-muted-foreground mt-1.5 px-1 flex justify-between",children:[" ",d.jsxs("span",{children:["Доступно: ",To(E)]})," ",S>0&&d.jsxs("span",{children:["В портфеле: ",oi(S,0)," шт."]})," "]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[" ",d.jsx(at,{htmlFor:"quantityLots",className:"text-sm font-medium",children:"Количество лотов"})," ",d.jsxs("span",{className:"text-xs text-muted-foreground",children:[oi(C,0)," шт. в лоте"]})," "]}),d.jsx($n,{id:"quantityLots",type:"number",value:c===0?"":c.toString(),onChange:T,min:1,step:1,className:U("h-11 text-base"),disabled:H||h})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[" ",d.jsx(at,{className:"text-sm font-medium",children:"Цена"})," ",d.jsx("span",{className:"text-xs text-muted-foreground",children:"за 1 шт."})," "]}),d.jsxs("div",{className:"relative",children:[d.jsx($n,{type:"text",value:se,readOnly:!0,className:U("h-11 text-base pr-10 cursor-default","bg-muted/60 border-muted/80 text-muted-foreground","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-muted/80",H&&"opacity-70")}),d.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₽"})]}),m&&d.jsxs("p",{className:"text-xs text-destructive mt-1.5 px-1 flex items-center gap-1",children:[d.jsx(KL,{size:14})," Ошибка загрузки цены"]}),!m&&d.jsx("p",{className:"text-xs text-muted-foreground mt-1.5 px-1",children:"Рыночная заявка по лучшей доступной цене."})]}),d.jsxs("div",{className:U("space-y-1.5 text-sm bg-card p-3 rounded-md border",H&&"opacity-60"),children:[d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[" ",d.jsxs("span",{children:["Стоимость (",oi(_,0)," шт.)"]})," ",d.jsx("span",{children:j===null?"-":d.jsx(pt,{value:M,includeSymbol:!1,asset:t})})," "]}),d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[" ",d.jsxs("span",{children:["Комиссия ≈ ",oi(z,2),"%"]})," ",d.jsx("span",{children:j===null?"-":d.jsx(pt,{value:R,includeSymbol:!1,asset:t})})," "]}),d.jsx(r_,{className:"my-2 bg-border/50"}),d.jsxs("div",{className:U("flex justify-between font-medium text-sm pt-1 text-success transition-opacity duration-200"),children:[" ",d.jsx("span",{children:"Итог (покупка)"})," ",j===null?"-":d.jsx(pt,{value:I,asset:t})," "]}),F&&d.jsxs("div",{className:U("flex justify-between font-medium text-sm text-destructive transition-opacity duration-200"),children:[" ",d.jsx("span",{children:"Итог (продажа)"})," ",j===null?"-":d.jsx(pt,{value:$,asset:t})," "]})]}),t.ticker!=="RUB"&&!H&&d.jsx("div",{className:U("fixed bottom-0 left-0 right-0 z-50 p-3 bg-background/95 backdrop-blur-sm border-t border-border/50","pb-[calc(0.75rem+env(safe-area-inset-bottom,0px))]"),children:d.jsxs("div",{className:"flex gap-3",children:[d.jsxs(ke,{variant:"destructive",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>le("sell"),disabled:A,title:J||"",children:[" ",h&&c>0?d.jsx(Ee,{size:"sm"}):"Продать"," "]}),d.jsxs(ke,{variant:"success",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>le("buy"),disabled:B,title:N||"",children:[" ",h&&c>0?d.jsx(Ee,{size:"sm"}):"Купить"," "]})]})})]})});i_.displayName="AssetTradeForm";function We(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Gi(t,e){return t.width===e.width&&t.height===e.height}var p3=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(i){return i!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function m3(t){return new p3(t)}var g3=function(){function t(e,n,r){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=We({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(s){return s},this._allowResizeObserver=(i=r==null?void 0:r.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return We({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=We(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Gi(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=We(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Gi(this.bitmapSize,r)?null:r;n===null&&i===null||n!==null&&i!==null&&Gi(n,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(n,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}y3().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=k0(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=m3(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=k0(this._canvasElement);if(r!==null){var i=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?x3(s[0],i):We({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(o){return o.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var i=r.devicePixelContentBoxSize[0],s=We({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function v3(t,e){return new g3(t,e.transform,e.options)}function k0(t){return t.ownerDocument.defaultView}function y3(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function x3(t,e){return We({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var w3=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function cs(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new w3(i,n,r)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const b3={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},S3={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},k3={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},C3={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},E3={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},N3={color:"#26a69a",base:0},s_={color:"#2196f3"},o_={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var C0,E0;function us(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function a_(t,e,n,r){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(n,e+i),t.lineTo(r,e+i),t.stroke()}function Ti(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Dt(t){if(t===void 0)throw new Error("Value is undefined");return t}function K(t){if(t===null)throw new Error("Value is null");return t}function Ks(t){return K(Dt(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(C0||(C0={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(E0||(E0={}));const N0={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function yn(t){return t<0?0:t>255?255:Math.round(t)||0}function l_(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const _3=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,T3=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,A3=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,P3=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function kl(t){(t=t.toLowerCase())in N0&&(t=N0[t]);{const e=P3.exec(t)||A3.exec(t);if(e)return[yn(parseInt(e[1],10)),yn(parseInt(e[2],10)),yn(parseInt(e[3],10)),l_(e.length<5?1:parseFloat(e[4]))]}{const e=T3.exec(t);if(e)return[yn(parseInt(e[1],16)),yn(parseInt(e[2],16)),yn(parseInt(e[3],16)),1]}{const e=_3.exec(t);if(e)return[yn(17*parseInt(e[1],16)),yn(17*parseInt(e[2],16)),yn(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function c_(t){return .199*t[0]+.687*t[1]+.114*t[2]}function Xd(t){const e=kl(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:c_(e)>160?"black":"white"}}class rt{constructor(){this.h=[]}l(e,n,r){const i={o:e,_:n,u:r===!0};this.h.push(i)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const i=[...this.h];this.h=this.h.filter(s=>!s.u),i.forEach(s=>s.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function Un(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:Un(t[r],n[r]));return t}function rr(t){return typeof t=="number"&&isFinite(t)}function Cl(t){return typeof t=="number"&&t%1==0}function Ul(t){return typeof t=="string"}function xc(t){return typeof t=="boolean"}function Ar(t){const e=t;if(!e||typeof e!="object")return e;let n,r,i;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(i=e[r],n[r]=i&&typeof i=="object"?Ar(i):i);return n}function j3(t){return t!==null}function El(t){return t===null?void 0:t}const pv="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Ro(t,e,n){return e===void 0&&(e=pv),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class R3{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=Ro(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class mv{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(i=>{i.X(e,n,r)})}}class qn{X(e,n,r){e.useBitmapCoordinateSpace(i=>this.K(i,n,r))}}class M3 extends qn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,s=this.G,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=i.to-1;c>=i.from;--c){const u=s.it[c],h=Math.round(u.nt*n)+o,f=u.st*r,p=l*r+o;e.moveTo(h,f),e.arc(h,f,p,0,2*Math.PI)}e.fill()};s.et>0&&(e.fillStyle=s.rt,a(s.ht+s.et)),e.fillStyle=s.lt,a(s.ht)}}function I3(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const L3={from:0,to:1};class O3{constructor(e,n){this.ut=new mv,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(I3),this.ct=this.dt.map(r=>{const i=new M3;return i.J(r),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),i=this.F.St();n.forEach((s,o)=>{var a;const l=this.dt[o],c=s.kt(r);if(e||c===null||!s.yt())return void(l.tt=null);const u=K(s.Ct());l.lt=c.Tt,l.ht=c.ht,l.et=c.Pt,l.it[0]._t=c._t,l.it[0].st=s.Dt().Rt(c._t,u.Vt),l.rt=(a=c.Ot)!==null&&a!==void 0?a:this.F.Bt(l.it[0].st/s.Dt().At()),l.it[0].ot=r,l.it[0].nt=i.It(r),l.tt=L3})}}class D3 extends qn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=this.zt.Lt.yt,o=this.zt.Et.yt;if(!s&&!o)return;const a=Math.round(this.zt.nt*r),l=Math.round(this.zt.st*i);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,us(e,this.zt.Lt.Nt),function(c,u,h,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,h),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,us(e,this.zt.Et.Nt),a_(e,l,0,n.width))}}class $3{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new D3(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=K(this.jt.Ht()),r=n.$t().W().crosshair,i=this.Ft;if(r.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(n),i.Lt.yt=e&&this.jt.qt(),i.Et.et=r.horzLine.width,i.Et.Nt=r.horzLine.style,i.Et.V=r.horzLine.color,i.Lt.et=r.vertLine.width,i.Lt.Nt=r.vertLine.style,i.Lt.V=r.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function z3(t,e,n,r,i,s){t.fillRect(e+s,n,r-2*s,s),t.fillRect(e+s,n+i-s,r-2*s,s),t.fillRect(e,n,s,i),t.fillRect(e+r-s,n,s,i)}function Qd(t,e,n,r,i,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(e,n,r,i),t.restore()}function _0(t,e,n,r,i,s){t.beginPath(),t.roundRect?t.roundRect(e,n,r,i,s):(t.lineTo(e+r-s[1],n),s[1]!==0&&t.arcTo(e+r,n,e+r,n+s[1],s[1]),t.lineTo(e+r,n+i-s[2]),s[2]!==0&&t.arcTo(e+r,n+i,e+r-s[2],n+i,s[2]),t.lineTo(e+s[3],n+i),s[3]!==0&&t.arcTo(e,n+i,e,n+i-s[3],s[3]),t.lineTo(e,n+s[0]),s[0]!==0&&t.arcTo(e,n,e+s[0],n,s[0]))}function T0(t,e,n,r,i,s,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===s)return _0(t,e,n,r,i,a),t.fillStyle=s,t.fill(),void t.restore();const c=o/2;var u;_0(t,e+c,n+c,r-o,i-o,(u=-c,a.map(h=>h===0?h:h+u))),s!=="transparent"&&(t.fillStyle=s,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function u_(t,e,n,r,i,s,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,i);a.addColorStop(0,s),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,r,i),t.restore()}class A0{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const s=this.zt.V,o=this.Xt.t,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.R;const u=this.Gt(l,n,r,i),h=u.Jt;return u.Qt?T0(c,h.ti,h.ii,h.ni,h.si,o,h.ei,[h.ht,0,0,h.ht],o):T0(c,h.ri,h.ii,h.ni,h.si,o,h.ei,[0,h.ht,h.ht,0],o),this.zt.hi&&(c.fillStyle=s,c.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(c.fillStyle=n.O,c.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.di;l.font=n.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.zt.Kt,c.fi,(c.ii+c.ci)/2+c.pi)})}Gt(e,n,r,i){var s;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.mi?n.T:0,f=this.zt.bi?n.C:0,p=n.L+this.Xt.wi,g=n.B+this.Xt.gi,m=n.A,w=n.I,v=this.zt.Kt,x=n.P,b=r.Mi(o,v),S=Math.ceil(r.xi(o,v)),E=x+p+g,C=n.C+m+w+S+h,_=Math.max(1,Math.floor(u));let P=Math.round(E*u);P%2!=_%2&&(P+=1);const L=f>0?Math.max(1,Math.floor(f*c)):0,j=Math.round(C*c),M=Math.round(h*c),z=(s=this.Xt.Si)!==null&&s!==void 0?s:this.Xt.ki,R=Math.round(z*u)-Math.floor(.5*u),I=Math.floor(R+_/2-P/2),$=I+P,D=i==="right",F=D?l.width-f:f,T=D?a.width-L:L;let O,N,B;return D?(O=T-j,N=T-M,B=F-h-m-f):(O=T+j,N=T+M,B=F+h+m),{Qt:D,Jt:{ii:I,li:R,ci:$,ni:j,si:P,ht:2*c,ei:L,ti:O,ri:T,ai:N,oi:_,ui:a.width},di:{ii:I/u,ci:$/u,fi:B,pi:b}}}}class Jd{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||A0)(this.Ci,this.yi),this.Ri=new(e||A0)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class F3 extends Jd{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const s=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||s===null)return;const o=Xd(i.labelBackgroundColor);r.t=o.t,e.V=o.i;const a=2/12*this.Li.P();r.wi=a,r.gi=a;const l=this.Ei(this.Li);r.ki=l.ki,e.Kt=this.Li.Fi(l._t,s),e.yt=!0}}const B3=/[1-9]/g;class d_{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.R,Math.round(n.Wi.xi(f,K(this.zt).Kt,B3))));if(r<=0)return;const i=n.ji,s=r+2*i,o=s/2,a=this.zt.Hi;let l=this.zt.ki,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);const u=c+s,h=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const m=K(this.zt);f.fillStyle=m.t;const w=Math.round(c*p),v=Math.round(0*g),x=Math.round(u*p),b=Math.round(h*g),S=Math.round(2*p);if(f.beginPath(),f.moveTo(w,v),f.lineTo(w,b-S),f.arcTo(w,b,w+S,b,S),f.lineTo(x-S,b),f.arcTo(x,b,x,b-S,S),f.lineTo(x,v),f.fill(),m.hi){const E=Math.round(m.ki*p),C=v,_=Math.round((C+n.T)*g);f.fillStyle=m.V;const P=Math.max(1,Math.floor(p)),L=Math.floor(.5*p);f.fillRect(E-L,C,P,_-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=K(this.zt),g=0+n.C+n.T+n.L+n.P/2;f.font=n.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.V;const m=n.Wi.Mi(f,"Apr0");f.translate(c+i,g+m),f.fillText(p.Kt,0,0)})}}class V3{constructor(e,n,r){this.ft=!0,this.Wt=new d_,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const s=r.Ui(this.vt.xt());e.Kt=r.qi(K(s)),e.yt=!0;const o=Xd(n.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=r.W().ticksVisible}}class gv{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var lm;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(lm||(lm={}));class U3 extends gv{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new O3(e,this),this.fn=((i,s)=>o=>{const a=s(),l=i();if(o===K(this.tn).vn())return{_t:l,ki:a};{const c=K(o.Ct());return{_t:o.pn(a,c),ki:a}}})(()=>this.nn,()=>this.an);const r=((i,s)=>()=>{const o=this.$i.St().mn(i()),a=s();return o&&Number.isFinite(a)?{ot:o,ki:a}:null})(()=>this.sn,()=>this.Yt());this.bn=new V3(this,e,r),this.wn=new $3(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const i=this.ln,s=this.an,o=this.nn,a=this.sn,l=this.tn,c=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const u=c!==null?c.Ct():null;return c!==null&&u!==null?(this.nn=n,this.an=c.Rt(n,u)):(this.nn=NaN,this.an=NaN),i!==this.ln||s!==this.an||a!==this.sn||o!==this.nn||l!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(j3),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let i=e.get(n);return i===void 0&&(i=new F3(this,n,r),e.set(n,i)),i}}function eh(t){return t==="left"||t==="right"}class xt{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(i,s){return i===void 0?s:{Fn:Math.max(i.Fn,s.Fn),Wn:i.Wn||s.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new xt(2)}static es(){return new xt(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const P0=".";function Pr(t,e){if(!rr(t))return"n/a";if(!Cl(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class th{constructor(e,n){if(n||(n=1),rr(e)&&Cl(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"−":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),i="";const s=this._s!==void 0?this._s:NaN;if(n>1){let o=+(Math.round(e*n)-r*n).toFixed(this._s);o>=n&&(o-=n,r+=1),i=P0+Pr(+o.toFixed(this._s)*this.rs,s)}else r=Math.round(r*n)/n,s>0&&(i=P0+Pr(0,s));return r.toFixed(0)+i}}class h_ extends th{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class H3{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}function f_(t,e,n,r,i,s,o){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,u=e[r.from];let h=s(t,u),f=u;if(r.to-r.from<2){const p=i/2;a.beginPath();const g={nt:u.nt-p,st:u.st},m={nt:u.nt+p,st:u.st};a.moveTo(g.nt*l,g.st*c),a.lineTo(m.nt*l,m.st*c),o(t,h,g,m)}else{const p=(m,w)=>{o(t,h,f,w),a.beginPath(),h=m,f=w};let g=f;a.beginPath(),a.moveTo(u.nt*l,u.st*c);for(let m=r.from+1;m<r.to;++m){g=e[m];const w=s(t,g);switch(n){case 0:a.lineTo(g.nt*l,g.st*c);break;case 1:a.lineTo(g.nt*l,e[m-1].st*c),w!==h&&(p(w,g),a.lineTo(g.nt*l,e[m-1].st*c)),a.lineTo(g.nt*l,g.st*c);break;case 2:{const[v,x]=W3(e,m-1,m);a.bezierCurveTo(v.nt*l,v.st*c,x.nt*l,x.st*c,g.nt*l,g.st*c);break}}n!==1&&w!==h&&(p(w,g),a.moveTo(g.nt*l,g.st*c))}(f!==g||f===g&&n===1)&&o(t,h,f,g)}}const j0=6;function sf(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function R0(t,e){return{nt:t.nt/e,st:t.st/e}}function W3(t,e,n){const r=Math.max(0,e-1),i=Math.min(t.length-1,n+1);var s,o;return[(s=t[e],o=R0(sf(t[n],t[r]),j0),{nt:s.nt+o.nt,st:s.st+o.st}),sf(t[n],R0(sf(t[i],t[e]),j0))]}function q3(t,e,n,r,i){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:a}=e;s.lineTo(i.nt*o,t*a),s.lineTo(r.nt*o,t*a),s.closePath(),s.fillStyle=n,s.fill()}class p_ extends qn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:i,ds:s,et:o,Nt:a,fs:l}=this.G,c=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,us(u,a),u.lineWidth=1,f_(e,r,l,i,s,this.bs.bind(this),q3.bind(null,c))}}function cm(t,e,n){return Math.min(Math.max(t,e),n)}function wc(t,e,n){return e-t<=n}function m_(t){const e=Math.ceil(t);return e%2==0?e-1:e}class vv{ws(e,n){const r=this.gs,{Ms:i,xs:s,Ss:o,ks:a,ys:l,vs:c}=n;if(this.Cs===void 0||r===void 0||r.Ms!==i||r.xs!==s||r.Ss!==o||r.ks!==a||r.vs!==c||r.ys!==l){const u=e.context.createLinearGradient(0,0,0,l);if(u.addColorStop(0,i),c!=null){const h=cm(c*e.verticalPixelRatio/l,0,1);u.addColorStop(h,s),u.addColorStop(h,o)}u.addColorStop(1,a),this.Cs=u,this.gs=n}return this.Cs}}class Y3 extends p_{constructor(){super(...arguments),this.Ts=new vv}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function K3(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class g_ extends qn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:i,fs:s,et:o,Nt:a,Ds:l}=this.G;if(r===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,us(c,a),c.lineJoin="round";const u=this.Vs.bind(this);s!==void 0&&f_(e,n,s,r,i,u,K3),l&&function(h,f,p,g,m){const{horizontalPixelRatio:w,verticalPixelRatio:v,context:x}=h;let b=null;const S=Math.max(1,Math.floor(w))%2/2,E=p*v+S;for(let C=g.to-1;C>=g.from;--C){const _=f[C];if(_){const P=m(h,_);P!==b&&(x.beginPath(),b!==null&&x.fill(),x.fillStyle=P,b=P);const L=Math.round(_.nt*w)+S,j=_.st*v;x.moveTo(L,j),x.arc(L,j,E,0,2*Math.PI)}}x.fill()}(e,n,l,r,u)}}class v_ extends g_{Vs(e,n){return n.lt}}function y_(t,e,n,r,i=0,s=e.length){let o=s-i;for(;0<o;){const a=o>>1,l=i+a;r(e[l],n)===t?(i=l+1,o-=a+1):o=a}return i}const Hl=y_.bind(null,!0),x_=y_.bind(null,!1);function G3(t,e){return t.ot<e}function Z3(t,e){return e<t.ot}function w_(t,e,n){const r=e.Os(),i=e.ui(),s=Hl(t,r,G3),o=x_(t,i,Z3);if(!n)return{from:s,to:o};let a=s,l=o;return s>0&&s<t.length&&t[s].ot>=r&&(a=s-1),o>0&&o<t.length&&t[o-1].ot<=i&&(l=o+1),{from:a,to:l}}class yv{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=w_(this.zs,r,this.Fs),this.Gs(e,n,i.Vt),this.Js())}}class nh extends yv{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,El(this.Ls)),e.te(this.zs,r,El(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class X3 extends nh{constructor(e,n){super(e,n),this.js=new mv,this.re=new Y3,this.he=new v_,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class Q3 extends qn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let i=null;const s=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.In[o];i!==a.ce&&(e.fillStyle=a.ce,i=a.ce);const l=Math.floor(.5*this.oe),c=Math.round(a.nt*n),u=c-l,h=this.oe,f=u+h-1,p=Math.min(a.de,a.fe),g=Math.max(a.de,a.fe),m=Math.round(p*r)-l,w=Math.round(g*r)+l,v=Math.max(w-m,this.oe);e.fillRect(u,m,h,v);const x=Math.ceil(1.5*this.ae);if(s){if(this.zt.ve){const C=c-x;let _=Math.max(m,Math.round(a.pe*r)-l),P=_+h-1;P>m+v-1&&(P=m+v-1,_=P-h+1),e.fillRect(C,_,u-C,P-_+1)}const b=c+x;let S=Math.max(m,Math.round(a.me*r)-l),E=S+h-1;E>m+v-1&&(E=m+v-1,S=E-h+1),e.fillRect(f+1,S,b-f,E-S+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,i){return Math.floor(.3*r*i)}(K(this.zt).le,e)))}}class b_ extends yv{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,El(this.Ls)),e.be(this.zs,r,El(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class J3 extends b_{constructor(){super(...arguments),this.js=new Q3}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class eB extends p_{constructor(){super(...arguments),this.Ts=new vv}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class tB extends g_{constructor(){super(...arguments),this.Pe=new vv}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class nB extends nh{constructor(e,n){super(e,n),this.js=new mv,this.Ve=new eB,this.Oe=new tB,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:i})}}class rB extends qn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const i=this.ze(n);(!this.zt._i||this.ae>2*i)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(s),Math.floor(this.zt.le*s));l=Math.max(Math.floor(s),Math.min(l,this.ae));const c=Math.floor(.5*l);let u=null;for(let h=r.from;h<r.to;h++){const f=n[h];f.Ee!==a&&(i.fillStyle=f.Ee,a=f.Ee);const p=Math.round(Math.min(f.pe,f.me)*o),g=Math.round(Math.max(f.pe,f.me)*o),m=Math.round(f.de*o),w=Math.round(f.fe*o);let v=Math.round(s*f.nt)-c;const x=v+l-1;u!==null&&(v=Math.max(u+1,v),v=Math.min(v,x));const b=x-v+1;i.fillRect(v,m,b,p-m),i.fillRect(v,g+1,b,w-g),u=x}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);let c=null;for(let u=r.from;u<r.to;u++){const h=n[u];h.Ne!==a&&(i.fillStyle=h.Ne,a=h.Ne);let f=Math.round(h.nt*s)-Math.floor(.5*this.ae);const p=f+this.ae-1,g=Math.round(Math.min(h.pe,h.me)*o),m=Math.round(Math.max(h.pe,h.me)*o);if(c!==null&&(f=Math.max(c+1,f),f=Math.min(f,p)),this.zt.le*s>2*l)z3(i,f,g,p-f+1,m-g+1,l);else{const w=p-f+1;i.fillRect(f,g,w,m-g+1)}c=p}}Le(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);for(let c=r.from;c<r.to;c++){const u=n[c];let h=Math.round(Math.min(u.pe,u.me)*o),f=Math.round(Math.max(u.pe,u.me)*o),p=Math.round(u.nt*s)-Math.floor(.5*this.ae),g=p+this.ae-1;if(u.ce!==a){const m=u.ce;i.fillStyle=m,a=m}this.zt._i&&(p+=l,h+=l,g-=l,f-=l),h>f||i.fillRect(p,h,g-p+1,f-h+1)}}}class iB extends b_{constructor(){super(...arguments),this.js=new rB}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class sB{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class of extends yv{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new sB(this.wn.renderer(),i=>{const s=e.Ct();return s===null?null:e.Dt().Rt(i,s.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,El(this.Ls))}Js(){this.wn.update({bars:this.zs.map(oB),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function oB(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class aB extends qn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const i=Math.max(1,Math.floor(r)),s=Math.round(this.zt.Ye*r)-Math.floor(i/2),o=s+i;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],c=this.Ue[a-this.zt.tt.from],u=Math.round(l.st*r);let h,f;e.fillStyle=l.ce,u<=s?(h=u,f=o):(h=s,f=u-Math.floor(i/2)+i),e.fillRect(c.Os,h,c.ui-c.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.zt.it[s],a=Math.round(o.nt*e);let l,c;if(r%2){const u=(r-1)/2;l=a-u,c=a+u}else{const u=r/2;l=a-u,c=a+u-1}this.Ue[s-this.zt.tt.from]={Os:l,ui:c,Ze:a,Xe:o.nt*e,ot:o.ot}}for(let s=this.zt.tt.from+1;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from],a=this.Ue[s-this.zt.tt.from-1];o.ot===a.ot+1&&o.Os-a.ui!==n+1&&(a.Ze>a.Xe?a.ui=o.Os-n-1:o.Os=a.ui+n+1)}let i=Math.ceil(this.zt.le*e);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const a=o.ui-o.Os+1;i=Math.min(a,i)}if(n>0&&i<4)for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class lB extends nh{constructor(){super(...arguments),this.js=new aB}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,K(this.Es.Ct()).Vt)};this.js.J(e)}}class cB extends nh{constructor(){super(...arguments),this.js=new v_}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const uB=/[2-9]/g;class Nl{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const i=this.sr(e,n,r);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,n,r){const i=r||uB,s=String(n).replace(i,"0");if(this.tr.has(s))return Dt(this.tr.get(s)).er;if(this.Ke===this.ir){const a=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(a),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&n.length||(this.tr.set(s,{er:o,rr:this.Ge}),this.Qe[this.Ge]=s,this.Ke++,this.Ge++),o}}class dB{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class S_{constructor(e,n,r){this.ur=e,this.ar=new Nl(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new dB(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,r),this.Wt}}class hB extends qn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:i,et:s,gr:o}=this.zt;return n>=i-s-7&&n<=i+s+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const s=Math.round(this.zt.st*i);s<0||s>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),us(e,this.zt.Nt),a_(e,s,0,n.width))}}class xv{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new hB,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class fB extends xv{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class pB extends qn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const i=this.zt;if(i===null)return;const s=Math.max(1,Math.floor(n)),o=s%2/2,a=Math.round(i.Xe.x*n)+o,l=i.Xe.y*r;e.fillStyle=i.Tr,e.beginPath();const c=Math.max(2,1.5*i.Pr)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(a,l,i.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.Dr,e.beginPath(),e.arc(a,l,i.ht*n+s/2,0,2*Math.PI,!1),e.stroke()}}const mB=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function M0(t,e,n,r){return function(i,s){if(i==="transparent")return i;const o=kl(i),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${s*a})`}(t,n+(r-n)*e)}function I0(t,e){const n=t%2600/2600;let r;for(const l of mB)if(n>=l.Vr&&n<=l.Or){r=l;break}Ti(r!==void 0,"Last price animation internal logic error");const i=(n-r.Vr)/(r.Or-r.Vr);return{Rr:M0(e,i,r.Ir,r.zr),Dr:M0(e,i,r.Lr,r.Er),ht:(s=i,o=r.Br,a=r.Ar,o+(a-o)*s)};var s,o,a}class gB{constructor(e){this.Wt=new pB,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const i=this.jr.Zr(!0);if(i.Xr||!n.Kr(i.ee))return;const s={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,r.Vt)},o=i.V,a=this.jr.W().lineWidth,l=I0(this.Gr(),o);this.Wt.J({Tr:o,Pr:a,Rr:l.Rr,Dr:l.Dr,ht:l.ht,Xe:s})}Yr(){const e=this.Wt.$e();if(e!==null){const n=I0(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ma(t,e){return m_(Math.min(Math.max(t,12),30)*e)}function _l(t,e){switch(t){case"arrowDown":case"arrowUp":return Ma(e,1);case"circle":return Ma(e,.8);case"square":return Ma(e,.7)}}function k_(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(Ma(t,1))}function L0(t){return Math.max(Ma(t,.1),3)}function O0(t,e,n){return e?t:n?Math.ceil(t/2):0}function C_(t,e,n,r,i){const s=_l("square",n),o=(s-1)/2,a=t-o,l=e-o;return r>=a&&r<=a+s&&i>=l&&i<=l+s}function D0(t,e,n,r){const i=(_l("arrowUp",r)-1)/2*n.Jr,s=(m_(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st-i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st+i),e.lineTo(n.nt-s,n.st+i),e.lineTo(n.nt-s,n.st)):(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st+i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st-i),e.lineTo(n.nt-s,n.st-i),e.lineTo(n.nt-s,n.st)),e.fill()}function vB(t,e,n,r,i,s){return C_(e,n,r,i,s)}class yB extends qn{constructor(){super(...arguments),this.zt=null,this.ar=new Nl,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=Ro(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const i=this.zt.it[r];if(wB(i,e,n))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},i,s){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Kt!==void 0&&(a.Kt.Hi=this.ar.xi(e,a.Kt.ih),a.Kt.At=this.j,a.Kt.nt=a.nt-a.Kt.Hi/2),xB(a,e,n,r)}}}}function xB(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(i,s,o,a,l,c){i.save(),i.scale(l,c),i.fillText(s,o,a),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(i,s,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void D0(!1,s,o,i.Ks);case"arrowUp":return void D0(!0,s,o,i.Ks);case"circle":return void function(a,l,c){const u=(_l("circle",c)-1)/2;a.beginPath(),a.arc(l.nt,l.st,u*l.Jr,0,2*Math.PI,!1),a.fill()}(s,o,i.Ks);case"square":return void function(a,l,c){const u=_l("square",c),h=(u-1)*l.Jr/2,f=l.nt-h,p=l.st-h;a.fillRect(f,p,u*l.Jr,u*l.Jr)}(s,o,i.Ks)}i.nh}}(t,e,function(i,s,o){const a=Math.max(1,Math.floor(s))%2/2;return{nt:Math.round(i.nt*s)+a,st:i.st*o,Jr:s}}(t,n,r))}function wB(t,e,n){return!(t.Kt===void 0||!function(r,i,s,o,a,l){const c=o/2;return a>=r&&a<=r+s&&l>=i-c&&l<=i+c}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,i,s){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return vB(0,r.nt,r.st,r.Ks,i,s);case"circle":return function(o,a,l,c,u){const h=2+_l("circle",l)/2,f=o-c,p=a-u;return Math.sqrt(f*f+p*p)<=h}(r.nt,r.st,r.Ks,i,s);case"square":return C_(r.nt,r.st,r.Ks,i,s)}}(t,e,n)}function bB(t,e,n,r,i,s,o,a,l){const c=rr(n)?n:n.Se,u=rr(n)?n:n.Me,h=rr(n)?n:n.xe,f=rr(e.size)?Math.max(e.size,0):1,p=k_(a.le())*f,g=p/2;switch(t.Ks=p,e.position){case"inBar":return t.st=o.Rt(c,l),void(t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i));case"aboveBar":return t.st=o.Rt(u,l)-g-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-g-.6*i,r.sh+=1.2*i),void(r.sh+=p+s);case"belowBar":return t.st=o.Rt(h,l)+g+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i,r.eh+=1.2*i),void(r.eh+=p+s)}e.position}class SB{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new yB,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=L0(e),r=1.5*k_(e)+2*n,i=this.fh();this.ah={above:O0(r,i.aboveBar,i.inBar),below:O0(r,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(u=>({ot:u.time,nt:0,st:0,Ks:0,nh:u.shape,V:u.color,th:u.th,gr:u.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const s=n.Xs();if(s===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=L0(n.le()),c={sh:l,eh:l};this.zt.tt=w_(this.zt.it,s,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=r[u];h.time!==a&&(c.sh=l,c.eh=l,a=h.time);const f=this.zt.it[u];f.nt=n.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const p=this.jr.ph(h.time);p!==null&&bB(f,h,p,c,i.fontSize,l,e,n,o.Vt)}this.ft=!1}}class kB extends xv{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class CB extends Jd{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.jt;if(!i.yt())return;const s=i.W(),o=s.lastValueVisible,a=i.bh()!=="",l=s.seriesLastValueMode===0,c=i.Zr(!1);if(c.Xr)return;o&&(e.Kt=this.wh(c,o,l),e.yt=e.Kt.length!==0),(a||l)&&(n.Kt=this.gh(c,o,a,l),n.yt=n.Kt.length>0);const u=i.mh(c.V),h=Xd(u);r.t=h.t,r.ki=c.ki,n.Ot=i.$t().Bt(c.ki/i.Dt().At()),e.Ot=u,e.V=h.i,n.V=h.i}gh(e,n,r,i){let s="";const o=this.jt.bh();return r&&o.length!==0&&(s+=`${o} `),n&&i&&(s+=this.jt.Dt().Mh()?e.xh:e.Sh),s.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function $0(t,e,n,r){const i=Number.isFinite(e),s=Number.isFinite(n);return i&&s?t(e,n):i||s?i?e:n:r}class Gt{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Gt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Gt($0(Math.min,this.Ph(),e.Ph(),-1/0),$0(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!rr(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,i=this.kh-n;r*=e,i*=e,this.yh=n+r,this.kh=n+i}Oh(e){rr(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Gt(e.minValue,e.maxValue)}}class Ku{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Ku(Gt.Ah(e.priceRange),e.margins)}}class EB extends xv{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class NB extends Jd{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.Nh.W(),s=i.axisLabelVisible,o=i.title!=="",a=this.jr;if(!s||!a.yt())return;const l=this.Nh.Fh();if(l===null)return;o&&(n.Kt=i.title,n.yt=!0),n.Ot=a.$t().Bt(l/a.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const c=Xd(i.axisLabelColor||i.color);r.t=c.t;const u=i.axisLabelTextColor||c.i;e.V=u,n.V=u,r.ki=l}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class _B{constructor(e,n){this.jr=e,this.cn=n,this.jh=new EB(e,this),this.ur=new NB(e,this),this.Hh=new S_(this.ur,e,e.$t())}$h(e){Un(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class TB extends gv{constructor(e){super(),this.$i=e}$t(){return this.$i}}const AB={Bar:(t,e,n,r)=>{var i;const s=e.upColor,o=e.downColor,a=K(t(n,r)),l=Ks(a.Vt[0])<=Ks(a.Vt[3]);return{ce:(i=a.V)!==null&&i!==void 0?i:l?s:o}},Candlestick:(t,e,n,r)=>{var i,s,o;const a=e.upColor,l=e.downColor,c=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,p=K(t(n,r)),g=Ks(p.Vt[0])<=Ks(p.Vt[3]);return{ce:(i=p.V)!==null&&i!==void 0?i:g?a:l,Ne:(s=p.Ot)!==null&&s!==void 0?s:g?c:u,Ee:(o=p.Xh)!==null&&o!==void 0?o:g?h:f}},Custom:(t,e,n,r)=>{var i;return{ce:(i=K(t(n,r)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,n,r)=>{var i,s,o,a;const l=K(t(n,r));return{ce:(i=l.lt)!==null&&i!==void 0?i:e.lineColor,lt:(s=l.lt)!==null&&s!==void 0?s:e.lineColor,Ps:(o=l.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(a=l.Rs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(t,e,n,r)=>{var i,s,o,a,l,c;const u=K(t(n,r));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=u.Re)!==null&&i!==void 0?i:e.topLineColor,De:(s=u.De)!==null&&s!==void 0?s:e.bottomLineColor,ke:(o=u.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(a=u.ye)!==null&&a!==void 0?a:e.topFillColor2,Ce:(l=u.Ce)!==null&&l!==void 0?l:e.bottomFillColor1,Te:(c=u.Te)!==null&&c!==void 0?c:e.bottomFillColor2}},Line:(t,e,n,r)=>{var i,s;const o=K(t(n,r));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(s=o.V)!==null&&s!==void 0?s:e.color}},Histogram:(t,e,n,r)=>{var i;return{ce:(i=K(t(n,r)).V)!==null&&i!==void 0?i:e.color}}};class PB{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=AB[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var z0;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(z0||(z0={}));const Gr=30;class jB{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let i=null;for(const s of r)i=bc(i,this._l(e,n,s));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return Hl(this.tl,e,(n,r)=>n.ee<r)}vl(e){return x_(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let i=null;for(let s=e;s<n;s++){const o=this.tl[s].Vt[r];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,n,r){if(this.Ni())return null;let i=null;const s=K(this.el()),o=K(this.An()),a=Math.max(e,s),l=Math.min(n,o),c=Math.ceil(a/Gr)*Gr,u=Math.max(c,Math.floor(l/Gr)*Gr);{const f=this.fl(a),p=this.vl(Math.min(l,c,n));i=bc(i,this.pl(f,p,r))}let h=this.il.get(r);h===void 0&&(h=new Map,this.il.set(r,h));for(let f=Math.max(c+1,a);f<u;f+=Gr){const p=Math.floor(f/Gr);let g=h.get(p);if(g===void 0){const m=this.fl(p*Gr),w=this.vl((p+1)*Gr-1);g=this.pl(m,w,r),h.set(p,g)}i=bc(i,g)}{const f=this.fl(u),p=this.vl(l);i=bc(i,this.pl(f,p,r))}return i}}function bc(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class RB{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var i,s;(s=(i=this.wl).drawBackground)===null||s===void 0||s.call(i,e)}}class af{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new RB(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function E_(t){var e,n,r,i,s;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(s=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||s===void 0||s}}class MB{constructor(e,n){this.Wt=new d_,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},E_(this.kl))),this.Wt}}class IB extends Jd{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const i=E_(this.kl);r.t=i.t,e.V=i.V;const s=2/12*this.Li.P();r.wi=s,r.gi=s,r.ki=i.ki,r.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class LB{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===s)return this.Cl.xl;const o=s.map(a=>new af(a));return this.Cl={Ml:s,xl:o},o}Qi(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===s)return this.Tl.xl;const o=this.jr.$t().St(),a=s.map(l=>new MB(l,o));return this.Tl={Ml:s,xl:a},a}Rn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===s)return this.Pl.xl;const o=this.jr.Dt(),a=s.map(l=>new IB(l,o));return this.Pl={Ml:s,xl:a},a}Bl(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===s)return this.Rl.xl;const o=s.map(a=>new af(a));return this.Rl={Ml:s,xl:o},o}Al(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===s)return this.Dl.xl;const o=s.map(a=>new af(a));return this.Dl={Ml:s,xl:o},o}Il(e,n){var r,i,s;return(s=(i=(r=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}wr(e,n){var r,i,s;return(s=(i=(r=this.Vl).hitTest)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}}function lf(t,e,n,r){t.forEach(i=>{e(i).forEach(s=>{s.Sl()===n&&r.push(s)})})}function cf(t){return t.Pn()}function OB(t){return t.Bl()}function DB(t){return t.Al()}class wv extends TB{constructor(e,n,r,i,s){super(e),this.zt=new jB,this.jh=new kB(this),this.zl=[],this.Ll=new fB(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const o=new CB(this);this.rn=[o],this.Hh=new S_(o,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new gB(this)),this.Ul(),this.ql(s)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const i=this.$t().St().Xs(),s=this.Ct();if(i===null||s===null)return n;let o,a;if(e){const h=this.zt.sl();if(h===null)return n;o=h,a=h.ee}else{const h=this.zt.ll(i.ui(),-1);if(h===null||(o=this.zt.Gh(h.ee),o===null))return n;a=h.ee}const l=o.Vt[3],c=this.Us().$s(a,{Vt:o}),u=r.Rt(l,s.Vt);return{Xr:!1,_t:l,Kt:r.Fi(l,s.Vt),xh:r.Yl(l),Sh:r.Zl(l,s.Vt),V:c.ce,ki:u,ee:a}}Us(){return this.Nl!==null||(this.Nl=new PB(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),Un(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new _B(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];lf(this.Hl,cf,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),lf(this.Hl,cf,"normal",e),e}ua(){return this.ca(cf,"bottom")}da(e){return this.ca(OB,e)}fa(e){return this.ca(DB,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const i of this.zl)r.push(i.Zh());return this.Hl.forEach(i=>{r.push(...i.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,n);return i===null?null:i.Bh()});return Ku.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return K(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new LB(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof of)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof of)return e=>this.wn.je(e)}_a(){return!eh(this.Dt().Pa())}pa(e,n){if(!Cl(e)||!Cl(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,n,r);let s=i!==null?new Gt(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const a=this.cn.base,l=new Gt(a,a);s=s!==null?s.ts(l):l}let o=this.dn.uh();return this.Hl.forEach(a=>{const l=a.Il(e,n);if(l!=null&&l.priceRange){const p=new Gt(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.ts(p):p}var c,u,h,f;l!=null&&l.margins&&(c=o,u=l.margins,o={above:Math.max((h=c==null?void 0:c.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((f=c==null?void 0:c.below)!==null&&f!==void 0?f:0,u.below)})}),new Ku(s,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new H3(this.cn.priceFormat.precision);break;case"percent":this.wa=new h_(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new th(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=K(this.zt.el());this.Wl=this.Fl.map((r,i)=>{const s=K(e.Va(r.time,!0)),o=s<n?1:-1;return{time:K(this.zt.ll(s,o)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:i,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new SB(this,this.$t()),this.$l){case"Bar":this.wn=new J3(this,this.$t());break;case"Candlestick":this.wn=new iB(this,this.$t());break;case"Line":this.wn=new cB(this,this.$t());break;case"Custom":this.wn=new of(this,this.$t(),Dt(e));break;case"Area":this.wn=new X3(this,this.$t());break;case"Baseline":this.wn=new nB(this,this.$t());break;case"Histogram":this.wn=new lB(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return lf(this.Hl,e,n,r),r}}class $B{constructor(e){this.cn=e}Oa(e,n,r){let i=e;if(this.cn.mode===0)return i;const s=r.vn(),o=s.Ct();if(o===null)return i;const a=s.Rt(e,o),l=r.Ba().filter(u=>u instanceof wv).reduce((u,h)=>{if(r.vr(h)||!h.yt())return u;const f=h.Dt(),p=h.In();if(f.Ni()||!p.Kr(n))return u;const g=p.Gh(n);if(g===null)return u;const m=Ks(h.Ct());return u.concat([f.Rt(g.Vt[3],m.Vt)])},[]);if(l.length===0)return i;l.sort((u,h)=>Math.abs(u-a)-Math.abs(h-a));const c=l[0];return i=s.pn(c,o),i}}class zB extends qn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=Math.max(1,Math.floor(r));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=K(this.zt);if(o.Aa){e.strokeStyle=o.Ia,us(e,o.za),e.beginPath();for(const a of o.La){const l=Math.round(a.Ea*r);e.moveTo(l,-s),e.lineTo(l,n.height+s)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,us(e,o.Wa),e.beginPath();for(const a of o.ja){const l=Math.round(a.Ea*i);e.moveTo(-s,l),e.lineTo(n.width+s,l)}e.stroke()}})}}class FB{constructor(e){this.Wt=new zB,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class BB{constructor(e){this.wn=new FB(e)}qh(){return this.wn}}const uf={$a:4,Ua:1e-4};function Gs(t,e){const n=100*(t-e)/e;return e<0?-n:n}function VB(t,e){const n=Gs(t.Ph(),e),r=Gs(t.Rh(),e);return new Gt(n,r)}function Ia(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function UB(t,e){const n=Ia(t.Ph(),e),r=Ia(t.Rh(),e);return new Gt(n,r)}function Gu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function La(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function la(t,e){if(t===null)return null;const n=Gu(t.Ph(),e),r=Gu(t.Rh(),e);return new Gt(n,r)}function Sc(t,e){if(t===null)return null;const n=La(t.Ph(),e),r=La(t.Rh(),e);return new Gt(n,r)}function df(t){if(t===null)return uf;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return uf;const n=Math.ceil(Math.abs(Math.log10(e))),r=uf.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class hf{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let i=r;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const i=this.qa===0?0:1/this.qa;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ya[0];for(;;){const h=wc(s,i,1e-14)&&s>i+1e-14,f=wc(s,r*a,1e-14),p=wc(s,1,1e-14);if(!(h&&f&&p))break;s/=a,a=this.Ya[++o%this.Ya.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.Za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Za[0];wc(s,r*a,1e-14)&&s>i+1e-14;)s/=a,a=this.Za[++o%this.Za.length];var l,c,u;return s}}class F0{constructor(e,n,r,i){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=i}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),i=(e-n)*this.Qa()/r,s=new hf(this.qa,[2,2.5,2]),o=new hf(this.qa,[2,2,2.5]),a=new hf(this.qa,[2.5,2,2]),l=[];return l.push(s.Xa(e,n,i),o.Xa(e,n,i),a.Xa(e,n,i)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let h=1;h<c.length;++h)c[h]<u&&(u=c[h]);return u}(l)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),i=this.Ga(r-1,n),s=this.Ga(0,n),o=this.Li.W().entireTextOnly?this.no()/2:0,a=o,l=r-1-o,c=Math.max(i,s),u=Math.min(i,s);if(c===u)return void(this.Ka=[]);let h=this.Xa(c,u),f=c%h;f+=f<0?h:0;const p=c>=u?1:-1;let g=null,m=0;for(let w=c-f;w>u;w-=h){const v=this.Ja(w,n,!0);g!==null&&Math.abs(v-g)<this.Qa()||v<a||v>l||(m<this.Ka.length?(this.Ka[m].Ea=v,this.Ka[m].so=e.eo(w)):this.Ka.push({Ea:v,so:e.eo(w)}),m++,g=v,e.ro()&&(h=this.Xa(w*p,u)))}this.Ka.length=m}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function N_(t){return t.slice().sort((e,n)=>K(e.Xi())-K(n.Xi()))}var B0;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(B0||(B0={}));const V0=new h_,U0=new th(100,1);class HB{constructor(e,n,r,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new rt,this.vo=new rt,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=U0,this.xo=df(null),this.So=e,this.cn=n,this.ko=r,this.yo=i,this.Co=new F0(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Un(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=Dt(e.scaleMargins.top),r=Dt(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(s,o){if(s===null)return!1;const a=La(s.Ph(),o),l=La(s.Rh(),o);return isFinite(a)&&isFinite(l)}(this.Ih,this.xo)?(r=Sc(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=la(this.Ih,this.xo),r!==null&&this.Ao(r));const i=n.Cr!==this.cn.mode;i&&(n.Cr===2||this.Mh())&&this.Ra(),i&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=Gs(e,n):this.Oo()&&(e=Ia(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const i=this.Fo(),s=K(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),u=l/(a-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g],w=m._t;if(isNaN(w))continue;let v=w;p!==null&&(v=p(m._t,n));const x=i+u*(v-o),b=c?x:this.ho-1-x;m.st=b}}be(e,n,r){this.Wo();const i=this.Fo(),s=K(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),u=l/(a-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g];let w=m.ge,v=m.Me,x=m.xe,b=m.Se;p!==null&&(w=p(m.ge,n),v=p(m.Me,n),x=p(m.xe,n),b=p(m.Se,n));let S=i+u*(w-o),E=c?S:this.ho-1-S;m.pe=E,S=i+u*(v-o),E=c?S:this.ho-1-S,m.de=E,S=i+u*(x-o),E=c?S:this.ho-1-S,m.fe=E,S=i+u*(b-o),E=c?S:this.ho-1-S,m.me=E}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(i,s){return s<0&&(i=-i),i/100*s+s}(r,n):this.Oo()&&(r=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=N_(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=K(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=K(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=K(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=K(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const i=r*n,s=K(this.ao).Th();s.Oh(i),this.Ao(s,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(Gs(e,n));case 3:return this.ba().format(Ia(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,K(this.e_()).ba())}Zl(e,n){return e=Gs(e,n),this.s_(e,V0)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=U0,this.Mh()?(this.wa=V0,n=100):this.Oo()?(this.wa=new th(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new F0(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Gu(e,this.xo):e;const r=K(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(i)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),i=K(this.Lh()),s=i.Ph()+i.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?La(s,this.xo):s}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let i=0,s=0;for(const l of r){if(!l.yt())continue;const c=l.Ct();if(c===null)continue;const u=l.Il(e.Os(),e.ui());let h=u&&u.Lh();if(h!==null){switch(this.cn.mode){case 1:h=la(h,this.xo);break;case 2:h=VB(h,c.Vt);break;case 3:h=UB(h,c.Vt)}if(n=n===null?h:n.ts(K(h)),u!==null){const f=u.Eh();f!==null&&(i=Math.max(i,f.above),s=Math.max(s,f.below))}}}if(i===this.co&&s===this.do||(this.co=i,this.do=s,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const l=this.e_(),c=5*(l===null||this.Mh()||this.Oo()?1:l.ma());this.ro()&&(n=Sc(n,this.xo)),n=new Gt(n.Ph()-c,n.Rh()+c),this.ro()&&(n=la(n,this.xo))}if(this.ro()){const l=Sc(n,this.xo),c=df(l);if(o=c,a=this.xo,o.$a!==a.$a||o.Ua!==a.Ua){const u=this.ao!==null?Sc(this.ao,this.xo):null;this.xo=c,n=la(l,c),u!==null&&(this.ao=la(u,c))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new Gt(-.5,.5)),this.xo=df(null));var o,a;this.oo._o=!0}Ho(){return this.Mh()?Gs:this.Oo()?Ia:this.ro()?e=>Gu(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class WB{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new rt,this.yl=e,this.$i=n,this.d_=new BB(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const i=K(r[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Dt(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const i=r!==void 0?r:this.C_().y_+1;this.T_(e,n,i)}Zo(e){const n=this.po.indexOf(e);Ti(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=K(e.Dt()).Pa();if(this.o_.has(r)){const s=Dt(this.o_.get(r)),o=s.indexOf(e);o!==-1&&(s.splice(o,1),s.length===0&&this.o_.delete(r))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=N_(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i].Xi();s!==null&&(s<n&&(n=s),s>r&&(r=s))}return{H_:n,y_:r}}T_(e,n,r){let i=this.w_(n);if(i===null&&(i=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!eh(n)){const s=this.o_.get(n)||[];s.push(e),this.o_.set(n,s)}i.qo(e),e.Gi(i),e.Ki(r),this.P_(i),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},Ar(n)),i=new HB(e,r,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class qB{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),i=this.tr.get(r);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Dt(o)),this.Je++,this.Ke--}const s=this.U_(e);return this.tr.set(r,{Z_:s,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,s}}class Oa{constructor(e,n){Ti(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function H0(t,e){return t===null||e===null?t===e:t.Ch(e)}class YB{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const i=e[r];let s=this.J_.get(i.timeWeight);s===void 0&&(s=[],this.J_.set(i.timeWeight,s)),s.push({index:r,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,i)=>{e<=r[0].index?n.push(i):r.splice(Hl(r,e,s=>s.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((i,s)=>s-i)){if(!this.J_.get(r))continue;const i=n;n=[];const s=i.length;let o=0;const a=Dt(this.J_.get(r)),l=a.length;let c=1/0,u=-1/0;for(let h=0;h<l;h++){const f=a[h],p=f.index;for(;o<s;){const g=i[o],m=g.index;if(!(m<p)){c=m;break}o++,n.push(g),u=m,c=1/0}if(c-p>=e&&p-u>=e)n.push(f),u=p;else if(this.Q_)return i}for(;o<s;o++)n.push(i[o])}return n}}class ho{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Oa(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ho(null)}}function KB(t,e){return t.weight>e.weight?t:e}class GB{constructor(e,n,r,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new YB,this.du=new Map,this.fu=ho.ou(),this.vu=!0,this.pu=new rt,this.mu=new rt,this.bu=new rt,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){Un(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;Un(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=Hl(this.uu,this.q_.key(e),(i,s)=>this.q_.key(i.time)<s);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),i=K(this.Bu()),s=K(this.Au());return{from:K(this.Ui(Math.max(i,n))),to:K(this.Ui(Math.min(s,r)))}}Iu(e){return{from:K(this.Va(e.from,!0)),to:K(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const i=this.Su*e/r;this.Su=i}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const i=r-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Cl(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),i=n===void 0?0:n.from,s=n===void 0?e.length:n.to;for(let o=i;o<s;o++){const a=e[o].ot,l=r+this.xu-a,c=this.__-(l+.5)*this.Su-1;e[o].nt=c}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),i=K(this.Xs()),s=Math.max(i.Os(),i.Os()-r),o=Math.max(i.ui(),i.ui()-r),a=this.cu.su(e,n),l=this.Bu()+r,c=this.Au()-r,u=this.$u(),h=this.cn.fixLeftEdge||u,f=this.cn.fixRightEdge||u;let p=0;for(const g of a){if(!(s<=g.index&&g.index<=o))continue;let m;p<this.Mu.length?(m=this.Mu[p],m.coord=this.It(g.index),m.label=this.Uu(g),m.weight=g.weight):(m={needAlignCoordinate:!1,coord:this.It(g.index),label:this.Uu(g),weight:g.weight},this.Mu.push(m)),this.Su>n/2&&!u?m.needAlignCoordinate=!1:m.needAlignCoordinate=h&&g.index<=l||f&&g.index>=c,p++}return this.Mu.length=p,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),i=this.le(),s=i+n*(i/10);this.Gn(s),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=cm(this.__-e,0,this.__),r=cm(this.__-K(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=K(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,i=performance.now();this.$i.Zn({Qu:s=>(s-i)/n>=1,tc:s=>{const o=(s-i)/n;return o>=1?e:r+(e-r)*o}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new Oa(e,n+this.cn.rightOffset))}lc(e){const n=new Oa(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ho.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,i=new Oa(r-n+1,r);this._c(new ho(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new qB(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,H0(n.lu(),this.fu.lu())||this.pu.m(),H0(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const i=this.xu-r-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class ZB{X(e,n,r){e.useMediaCoordinateSpace(i=>this.K(i,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(i=>this.vc(i,n,r))}vc(e,n,r){}}class XB extends ZB{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;n.font=o.R;const a=this.wc(n,o.Kt);a>r.width?o.Zu=r.width/a:o.Zu=1,i+=o.gc*o.Zu}let s=0;switch(this.zt.Mc){case"top":s=0;break;case"center":s=Math.max((r.height-i)/2,0);break;case"bottom":s=Math.max(r.height-i,0)}n.fillStyle=this.zt.V;for(const o of this.zt.bc){n.save();let a=0;switch(this.zt.xc){case"left":n.textAlign="left",a=o.gc/2;break;case"center":n.textAlign="center",a=r.width/2;break;case"right":n.textAlign="right",a=r.width-1-o.gc/2}n.translate(a,s),n.textBaseline="top",n.font=o.R,n.scale(o.Zu,o.Zu),n.fillText(o.Kt,0,o.Sc),n.restore(),s+=o.gc*o.Zu}}wc(e,n){const r=this.kc(e.font);let i=r.get(n);return i===void 0&&(i=e.measureText(n).width,r.set(n,i)),i}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class QB{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new XB(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:Ro(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class JB extends gv{constructor(e,n){super(),this.cn=n,this.wn=new QB(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var W0,q0,Y0,um,zi;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(W0||(W0={}));class e5{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new rt,this.Rc=new rt,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new R3(this),this.yl=new GB(this,n.timeScale,this.cn.localization,r),this.vt=new U3(this,n.crosshair),this.Bc=new $B(n.crosshair),this.Ac=new JB(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(xt.es())}Uh(){this.Nc(xt.ss())}oa(){this.Nc(new xt(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Un(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new WB(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,i=xt.es();return i.Nn(r,{Fn:0,Wn:!0}),this.Nc(i),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const i=r.Hi();e=Math.max(1,Math.min(e,i)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,i,s){this.vt.gn(e,n);let o=NaN,a=this.yl.Nu(e);const l=this.yl.Xs();l!==null&&(a=Math.min(Math.max(l.Os(),a),l.ui()));const c=i.vn(),u=c.Ct();u!==null&&(o=c.pn(n,u)),o=this.Bc.Oa(o,a,i),this.vt.kn(a,o,i),this.oa(),s||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const i=r.vn(),s=i.Ct(),o=i.Rt(e,K(s)),a=this.yl.Va(n,!0),l=this.yl.It(K(a));this.ld(l,o,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const i=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const s=this.yl.mn(0),o=this.yl.Eu(),a=this.yl.Xs();if(a!==null&&i!==null&&s!==null){const l=a.Kr(o),c=this.q_.key(i)>this.q_.key(s),u=e!==null&&e>o&&!c,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(r!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.yl.Jn(this.yl.Hu()-p)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const i=this.yc[0],s=this.fd(n,e,i,r);return this.Cc.push(s),this.Cc.length===1?this.Kl():this.Uh(),s}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);Ti(r!==-1,"Series not found"),this.Cc.splice(r,1),K(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=K(this.dr(e));r.Zo(e);const i=this.Uc(n);if(i===null){const s=e.Xi();r.qo(e,n,s)}else{const s=i.Ht===r?e.Xi():void 0;i.Ht.qo(e,n,s)}}hc(){const e=xt.ss();e.$n(),this.Nc(e)}pd(e){const n=xt.ss();n.Yn(e),this.Nc(n)}Kn(){const e=xt.ss();e.Kn(),this.Nc(e)}Gn(e){const n=xt.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=xt.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=xt.ss();n.Zn(e),this.Nc(n)}Un(){const e=xt.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const s=this.Dc.wd.get(e);if(s!==void 0)return s}const i=function(s,o,a){const[l,c,u,h]=kl(s),[f,p,g,m]=kl(o),w=[yn(l+a*(f-l)),yn(c+a*(p-c)),yn(u+a*(g-u)),l_(h+a*(m-h))];return`rgba(${w[0]}, ${w[1]}, ${w[2]}, ${w[3]})`}(r,n,e/100);return this.Dc.wd.set(e,i),i}Gc(e,n){const r=new xt(n);if(e!==null){const i=this.yc.indexOf(e);r.Nn(i,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,i){const s=new wv(this,e,n,r,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(s,o),eh(o)||s.$h(e),s}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function dm(t){return!rr(t)&&!Ul(t)}function __(t){return rr(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(q0||(q0={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Y0||(Y0={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(um||(um={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(zi||(zi={}));const K0=t=>t.getUTCFullYear();function t5(t,e,n){return e.replace(/yyyy/g,(r=>Pr(K0(r),4))(t)).replace(/yy/g,(r=>Pr(K0(r)%100,2))(t)).replace(/MMMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,n)).replace(/MMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,n)).replace(/MM/g,(r=>Pr((i=>i.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>Pr((i=>i.getUTCDate())(r),2))(t))}class T_{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return t5(e,this.gd,this.Md)}}class n5{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Pr(e.getUTCHours(),2)).replace("%m",Pr(e.getUTCMinutes(),2)).replace("%s",Pr(e.getUTCSeconds(),2))}}const r5={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class i5{constructor(e={}){const n=Object.assign(Object.assign({},r5),e);this.Td=new T_(n.Sd,n.Cd),this.Pd=new n5(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function kc(t){return 60*t*60*1e3}function ff(t){return 60*t*1e3}const Cc=[{Dd:(G0=1,1e3*G0),Vd:10},{Dd:ff(1),Vd:20},{Dd:ff(5),Vd:21},{Dd:ff(30),Vd:22},{Dd:kc(1),Vd:30},{Dd:kc(3),Vd:31},{Dd:kc(6),Vd:32},{Dd:kc(12),Vd:33}];var G0;function Z0(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Cc.length-1;n>=0;--n)if(Math.floor(e.getTime()/Cc[n].Dd)!==Math.floor(t.getTime()/Cc[n].Dd))return Cc[n].Vd;return 0}function pf(t){let e=t;if(Ul(t)&&(e=bv(t)),!dm(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function X0(t){if(!__(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function bv(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Q0(t){Ul(t.time)&&(t.time=bv(t.time))}class J0{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(Q0)}(e):Q0(e)}createConverterToInternalObj(e){return K(function(n){return n.length===0?null:dm(n[0].time)||Ul(n[0].time)?pf:X0}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return __(n=e)?X0(n):dm(n)?pf(n):pf(bv(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new i5({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new T_(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,r,n.locale);if(s!==null)return s}return function(s,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=s.Bd===void 0?new Date(1e3*s.Od):new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(KB,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,i=0){if(r.length===0)return;let s=i===0?null:r[i-1].time.Od,o=s!==null?new Date(1e3*s):null,a=0;for(let l=i;l<r.length;++l){const c=r[l],u=new Date(1e3*c.time.Od);o!==null&&(c.timeWeight=Z0(u,o)),a+=c.time.Od-(s||c.time.Od),s=c.time.Od,o=u}if(i===0&&r.length>1){const l=Math.ceil(a/(r.length-1)),c=new Date(1e3*(r[0].time.Od-l));r[0].timeWeight=Z0(new Date(1e3*r[0].time.Od),c)}})(e,n)}static Id(e){return Un({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Mo=typeof window<"u";function ew(){return!!Mo&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function mf(){return!!Mo&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function hm(t){return t+t%2}function gf(t,e){return t.zd-e.zd}function vf(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class s5{constructor(e,n,r,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=i}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const i=vf(this.Ld,this.Ed,this.Ud),s=gf(this.Ld,this.Ed),o=[i],a=[s];if(r+=s,this.Nd!==null){const c=vf(this.Ed,this.Nd,this.Ud);if(Math.sign(c)===Math.sign(i)){const u=gf(this.Ed,this.Nd);if(o.push(c),a.push(u),r+=u,this.Fd!==null){const h=vf(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(i)){const f=gf(this.Nd,this.Fd);o.push(h),a.push(f),r+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/r*o[c];Math.abs(l)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=l,this.jd=function(c,u){const h=Math.log(u);return Math.log(1*h/-c)/h}(Math.abs(l),this.qd))}tc(e){const n=K(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-K(this.Wd).ot;return Math.min(n,this.jd)}}class o5{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return c_(kl(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function ds(t,e){const n=K(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=v3(n,{options:{allowResizeObserver:!1},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return r.resizeCanvasElement(e),r}function hs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function fm(t,e,n,r){t.gl&&t.gl(e,n,r)}function Qc(t,e,n,r){t.X(e,n,r)}function pm(t,e,n,r){const i=t(n,r);for(const s of i){const o=s.gt();o!==null&&e(o)}}function a5(t){Mo&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Sv{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!mf(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const s=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(Zn(i),this.cf);o<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}}else{const s=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(Zn(i),this.af);o<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=yf(e.changedTouches,K(this.Of));if(n===null||(this.Vf=Ec(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(Zn(n),K(this.pf)),{nv:i,sv:s,Nf:o}=r;if(this.mf||!(o<5)){if(!this.mf){const a=.5*i,l=s>=a&&!this.cn.ev(),c=a>s&&!this.cn.rv();l||c||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const a=this.Ef(e,n);this.Wf(a,this.Hf.hv),Ts(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(Zn(e),K(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),i=Math.abs(n.st-e.st);return{nv:r,sv:i,Nf:r+i}}ov(e){let n=yf(e.changedTouches,K(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=Ec(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(Zn(n),this.cf);i<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&Ts(e));this._f===0&&Ts(e),e.touches.length===0&&this.ff&&(this.ff=!1,Ts(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),ew()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(Zn(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=Ec(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Zn(n),this.yf&&(this.yf(),this.yf=null);{const s=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",s),r.removeEventListener("touchend",o)},r.addEventListener("touchmove",s,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,n);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Zn(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;ew()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Zn(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),s=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",s)},n.addEventListener("mousemove",i),n.addEventListener("mouseup",s)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Zn(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}mf()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),a5(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=tw(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),Ts(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=tw(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!mf()}vv(e){const n=yf(e.touches,K(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Ec(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-i.left,localY:r.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Ts(e)}}}}function tw(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function Ts(t){t.cancelable&&t.preventDefault()}function Zn(t){return{nt:t.pageX,st:t.pageY}}function Ec(t){return t.timeStamp||performance.now()}function yf(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function Nc(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function l5(t,e,n){for(const r of t){const i=r.gt();if(i!==null&&i.wr){const s=i.wr(e,n);if(s!==null)return{Bv:r,Iv:s}}}return null}function xf(t,e){return n=>{var r,i,s,o;return((i=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(s=n.da)===null||s===void 0?void 0:s.call(n,t))!==null&&o!==void 0?o:[]}}function nw(t,e,n,r){if(!t.length)return;let i=0;const s=n/2,o=t[0].At(r,!0);let a=e===1?s-(t[0].Vi()-o/2):t[0].Vi()-o/2-s;a=Math.max(0,a);for(let l=1;l<t.length;l++){const c=t[l],u=t[l-1],h=u.At(r,!1),f=c.Vi(),p=u.Vi();if(e===1?f>p-h:f<p+h){const g=p-h*e;c.Oi(g);const m=g-e*h/2;if((e===1?m<0:m>n)&&a>0){const w=e===1?-1-m:m-n,v=Math.min(w,a);for(let x=i;x<t.length;x++)t[x].Oi(t[x].Vi()+e*v);a-=v}}else i=l,a=e===1?p-h-f:f-(p+h)}}class rw{constructor(e,n,r,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Nl(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=i==="left",this.Yv=xf("normal",i),this.Zv=xf("top",i),this.Xv=xf("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=ds(this.Kv,We({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=ds(this.Kv,We({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Sv(this.Jv.canvasElement,a,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),hs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),hs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=K(this.Gv.canvasElement.getContext("2d"));r.save();const i=this.Li.Ha();r.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(r,i[0].so),this.Fv.xi(r,i[i.length-1].so)));const s=this.up();for(let c=s.length;c--;){const u=this.Fv.xi(r,s[c].Kt());u>e&&(e=u)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(a=this.cn.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Li.pn(1,o),u=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;r.restore();const l=e||34;return hm(Math.ceil(n.C+n.T+n.A+n.I+5+l))}cp(e){this.Ev!==null&&Gi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return K(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,K(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=cs(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=cs(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),i=this.Li;n.O_(r,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let i=0;i<r.length;++i){const s=r[i].Rn(this.tn.fp(),n);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.tn.fp().$t(),o=s.q(),a=s.bd();o===a?Qd(e,0,0,r,i,o):u_(e,0,0,r,i,o,a)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*r));let s;s=this.qv?n.width-i:0,e.fillRect(s,0,i,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),i=this.ap(),s=this.qv?this.Ev.width-i.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=r.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),h=Math.round(i.T*a);o.beginPath();for(const f of n)o.rect(Math.floor(s*a),Math.round(f.Ea*l)-u,h,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this._p(),o.fillStyle=(a=r.textColor)!==null&&a!==void 0?a:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const l=this.qv?Math.round(s-i.A):Math.round(s+i.T+i.A),c=n.map(u=>this.Fv.Mi(o,u.so));for(let u=n.length;u--;){const h=n[u];o.fillText(h.so,l,h.Ea+c[u])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),i=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(o=>{r.vr(o)&&n.push(o)});const s=this.Li;n.forEach(o=>{o.Rn(r,s).forEach(a=>{a.Oi(null),a.Bi()&&e.push(a)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,i=e.filter(o=>o.ki()<=r),s=e.filter(o=>o.ki()>r);i.sort((o,a)=>a.ki()-o.ki()),s.sort((o,a)=>o.ki()-a.ki());for(const o of e){const a=Math.floor(o.At(n)/2),l=o.ki();l>-a&&l<a&&o.Oi(a),l>this.Ev.height-a&&l<this.Ev.height+a&&o.Oi(this.Ev.height-a)}nw(i,1,this.Ev.height,n),nw(s,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),i=this.qv?"right":"left";n.forEach(s=>{s.Ai()&&s.gt(K(this.Li)).X(e,r,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],i=this.tn.fp(),s=n.Zc().Rn(i,this.Li);s.length&&r.push(s);const o=this.ap(),a=this.qv?"right":"left";r.forEach(l=>{l.forEach(c=>{c.gt(K(this.Li)).X(e,o,this.Fv,a)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Ro(this.ko.fontSize,this.ko.fontFamily)}}function c5(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function _c(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function u5(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function d5(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class kv{constructor(e,n){this.Ev=We({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new rt,this.Op=new rt,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=ds(r,We({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=ds(r,We({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Sv(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),hs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),hs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return K(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(kv.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new o5(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(K(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(K(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,i=e.localY;this.Gp(r,i,e);const s=this.wr(r,i);this.Qd.Qp((n=s==null?void 0:s.Lv)!==null&&n!==void 0?n:null),this.$i().jc(s&&{Hc:s.Hc,Iv:s.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=K(this.Lp),s=i.x+(n-this.Ip.x),o=i.y+(r-this.Ip.y);this.Gp(s,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(i,s,o){const a=i.Uo(),l=function(c,u,h){var f,p;let g,m;for(const x of c){const b=(p=(f=x.va)===null||f===void 0?void 0:f.call(x,u,h))!==null&&p!==void 0?p:[];for(const S of b)w=S.zOrder,(!(v=g==null?void 0:g.zOrder)||w==="top"&&v!=="top"||w==="normal"&&v==="bottom")&&(g=S,m=x)}var w,v;return g&&m?{zv:g,Hc:m}:null}(a,s,o);if((l==null?void 0:l.zv.zOrder)==="top")return Nc(l);for(const c of a){if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&!l.zv.isBackground)return Nc(l);const u=l5(c.Pn(i),s,o);if(u!==null)return{Hc:c,Bv:u.Bv,Iv:u.Iv};if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&l.zv.isBackground)return Nc(l)}return l!=null&&l.zv?Nc(l):null}(r,e,n)}_m(e,n){K(n==="left"?this.Cp:this.Tp).cp(We({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Gi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=K(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=cs(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(r,c5),this.vm(r),this.pm(r),this.fm(r,_c),this.fm(r,u5)))}this.Jv.applySuggestedBitmapSize();const n=cs(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.bm(n),this.fm(n,d5))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,i=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:i},n)}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.$i(),o=s.q(),a=s.bd();o===a?Qd(e,0,0,r,i,a):u_(e,0,0,r,i,o,a)}vm(e){const n=K(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,_c,fm,n),this.Mm(e,_c,Qc,n)}bm(e){this.Mm(e,_c,Qc,this.$i().Zc())}fm(e,n){const r=K(this.Np).Uo();for(const i of r)this.Mm(e,n,fm,i);for(const i of r)this.Mm(e,n,Qc,i)}Mm(e,n,r,i){const s=K(this.Np),o=s.$t().Wc(),a=o!==null&&o.Hc===i,l=o!==null&&a&&o.Iv!==void 0?o.Iv.Mr:void 0;pm(n,c=>r(c,e,a,l),i,s)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();n&&this.Cp===null&&(this.Cp=new rw(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new rw(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,K(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const i=performance.now(),s=n.St();this.Ep.Vr(s.Hu(),i),this.Ep.Qu(i)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)K(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const i=this.Qd.W(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Dv)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Dv))return;const a=this.Np.vn(),l=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:l,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const c=r.le();this.Ep=new s5(.2/c,7/c,.997,15/c),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;a.Ni()||n.A_(this.Np,a,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(a.Ni()||n.I_(this.Np,a,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),l))}}class iw{constructor(e,n,r,i,s){this.ft=!0,this.Ev=We({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=i,this.Pm=s,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=ds(this.Kv,We({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),hs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Gi(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=cs(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const s=Math.floor(this.Oc.W().C*r),o=Math.floor(this.Oc.W().C*i),a=this.qv?n.width-s:0;e.fillRect(a,0,s,o)}mp({context:e,bitmapSize:n}){Qd(e,0,0,n.width,n.height,this.Pm())}}function Cv(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const h5=Cv("normal"),f5=Cv("top"),p5=Cv("bottom");class m5{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=We({width:0,height:0}),this.Om=new rt,this.Fv=new Nl(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=ds(this.Im,We({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=ds(this.Im,We({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Sv(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),hs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),hs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){Gi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(We({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(We({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=cs(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(r,p5)}),this.wp(r),this.$m(r,h5)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=cs(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,f5))}$m(e,n){const r=this.Qd.$t().wt();for(const i of r)pm(n,s=>fm(s,e,!1,void 0),i,void 0);for(const i of r)pm(n,s=>Qc(s,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:n}){Qd(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,i)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const i=this.q_.maxTickMarkWeight(r),s=this.jm(),o=n.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.qm(),a.fillStyle=this.qm();const u=Math.max(1,Math.floor(l)),h=Math.floor(.5*l);a.beginPath();const f=Math.round(s.T*c);for(let p=r.length;p--;){const g=Math.round(r[p].coord*l);a.rect(g-h,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=s.C+s.T+s.L+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this._p();for(const c of r)if(c.weight<i){const u=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Qd.W().timeScale.allowBoldLabels&&(a.font=this.Zm());for(const c of r)if(c.weight>=i){const u=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Ym(e,n,r){const i=this.Fv.xi(e,r),s=i/2,o=Math.floor(n-s)+.5;return o<0?n+=Math.abs(0-o):o+i>this.Ev.width&&(n-=Math.abs(this.Ev.width-(o+i))),n}Um(e,n){const r=this.jm();for(const i of e)for(const s of i.Qi())s.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Ro(this.j(),this.cn.fontFamily)}Zm(){return Ro(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Nl,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},i=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,s=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new iw("left",n,r,i,s),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new iw("right",n,r,i,s),this.Am.appendChild(this.Dm.lp()))}}const g5=!!Mo&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Mo&&(!((wf=navigator==null?void 0:navigator.userAgentData)===null||wf===void 0)&&wf.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var wf;class v5{constructor(e,n,r){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new rt,this.Op=new rt,this.Rc=new rt,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),bf(this.cn)&&this.hb(!0),this.$i=new e5(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new m5(this,this.q_),this.sb.appendChild(this.ab.lp());const s=n.autoSize&&this.ob();let o=this.cn.width,a=this.cn.height;if(s||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this._b(o,a),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],K(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const i=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return We({width:l-l%2,height:c-c%2})}(We({width:e,height:n}));this.ho=i.height,this.__=i.width;const s=this.ho+"px",o=this.__+"px";K(this.Xd).style.height=s,K(this.Xd).style.width=o,this.sb.style.height=s,this.sb.style.width=o,r?this.mb(xt.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=xt.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=bf(this.cn);this.$i.$h(e);const r=bf(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=K(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:K(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Dt(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const i=this.Xm[0],s=(a,l)=>{let c=0;for(let u=0;u<this.Xm.length;u++){const h=this.Xm[u],f=K(a==="left"?h.wm():h.gm()),p=f.xp();e!==null&&f.Sp(e,l,c),c+=p.height}};this.xb()&&(s("left",0),n+=K(i.wm()).xp().width);for(let a=0;a<this.Xm.length;a++){const l=this.Xm[a],c=l.xp();e!==null&&l.Sp(e,n,r),r+=c.height}n+=i.xp().width,this.Sb()&&(s("right",n),n+=K(i.gm()).xp().width);const o=(a,l,c)=>{K(a==="left"?this.ab.Lm():this.ab.Em()).Sp(K(e),l,c)};if(this.cn.timeScale.visible){const a=this.ab.xp();if(e!==null){let l=0;this.xb()&&(o("left",l,r),l=K(i.wm()).xp().width),this.ab.Sp(e,l,r),l+=a.width,this.Sb()&&o("right",l,r)}r+=a.height}return We({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const g of this.Xm)this.xb()&&(n=Math.max(n,K(g.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,K(g.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=g.M_();n=hm(n),r=hm(r);const i=this.__,s=this.ho,o=Math.max(i-n-r,0),a=this.cn.timeScale.visible;let l=a?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=0+l,h=s<u?0:s-u,f=h/e;let p=0;for(let g=0;g<this.Xm.length;++g){const m=this.Xm[g];m.qp(this.$i.qc()[g]);let w=0,v=0;v=g===this.Xm.length-1?h-p:Math.round(m.M_()*f),w=Math.max(v,2),p+=w,m.cp(We({width:o,height:w})),this.xb()&&m._m(n,"left"),this.Sb()&&m._m(r,"right"),m.fp()&&this.$i.Kc(m.fp(),w)}this.ab.Fm(We({width:a?o:0,height:l}),a?n:0,a?r:0),this.$i.S_(o),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return g5?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,i=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,s)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(s=>{s.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const i of r.Qn())if(i.qn===5&&!i.Vt.Qu(n)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let i=n;i<r;i++){const s=Dt(this.Xm.pop());this.sb.removeChild(s.lp()),s.lm().p(this),s.am().p(this),s.S()}for(let i=r;i<n;i++){const s=new kv(this,e[i]);s.lm().l(this.Bb.bind(this),this),s.am().l(this.Ab.bind(this),this),this.Xm.push(s),this.sb.insertBefore(s.lp(),this.ab.lp())}for(let i=0;i<n;i++){const s=e[i],o=this.Xm[i];o.fp()!==s?o.qp(s):o.Up()}this.cb(),this.Pb()}Ib(e,n,r){var i;const s=new Map;e!==null&&this.$i.wt().forEach(u=>{const h=u.In().ll(e);h!==null&&s.set(u,h)});let o;if(e!==null){const u=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;u!==void 0&&(o=u)}const a=this.$t().Wc(),l=a!==null&&a.Hc instanceof wv?a.Hc:void 0,c=a!==null&&a.Iv!==void 0?a.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:n??void 0,Eb:l,Nb:s,Fb:c,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function bf(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function y5(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function A_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function sw(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.color!==void 0&&(s.V=n.color),s}function x5(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.lineColor!==void 0&&(s.lt=n.lineColor),n.topColor!==void 0&&(s.Ps=n.topColor),n.bottomColor!==void 0&&(s.Rs=n.bottomColor),s}function w5(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.topLineColor!==void 0&&(s.Re=n.topLineColor),n.bottomLineColor!==void 0&&(s.De=n.bottomLineColor),n.topFillColor1!==void 0&&(s.ke=n.topFillColor1),n.topFillColor2!==void 0&&(s.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(s.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(s.Te=n.bottomFillColor2),s}function b5(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),i}function S5(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),n.borderColor!==void 0&&(i.Ot=n.borderColor),n.wickColor!==void 0&&(i.Xh=n.wickColor),i}function k5(t,e,n,r,i){const s=Dt(i)(n),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],u=n,{time:h,color:f}=u;return{ee:e,ot:t,Vt:c,zb:r,$e:A_(u,["time","color"]),V:f}}function Tc(t){return t.Vt!==void 0}function ow(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Oi(t){return(e,n,r,i,s,o)=>function(a,l){return l?l(a):(c=a).open===void 0&&c.value===void 0;var c}(r,o)?ow({ot:e,ee:n,zb:i},r):ow(t(e,n,r,i,s),r)}function aw(t){return{Candlestick:Oi(S5),Bar:Oi(b5),Area:Oi(x5),Baseline:Oi(w5),Histogram:Oi(sw),Line:Oi(sw),Custom:Oi(k5)}[t]}function lw(t){return{ee:0,Hb:new Map,la:t}}function cw(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function uw(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),Dt(e)}class C5{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,i=!1;const s=this.Yb.get(e);if(s!==void 0)if(this.Yb.size===1)r=!1,i=!0,this.qb.clear();else for(const l of this.Xb)l.pointData.Hb.delete(e)&&(i=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.q_.createConverterToInternalObj(n),u=aw(e.Qh()),h=e.Ca(),f=e.Ta();o=n.map((p,g)=>{const m=c(p.time),w=this.q_.key(m);let v=this.qb.get(w);v===void 0&&(v=lw(m),this.qb.set(w,v),i=!0);const x=u(m,v.ee,p,l[g],h,f);return v.Hb.set(e,x),x})}r&&this.Gb(),this.Jb(e,o);let a=-1;if(i){const l=[];this.qb.forEach(c=>{l.push({timeWeight:0,time:c.la,pointData:c,originalTime:uw(c.Hb)})}),l.sort((c,u)=>this.q_.key(c.time)-this.q_.key(u.time)),a=this.Qb(l)}return this.tw(e,a,function(l,c,u){const h=cw(l,u),f=cw(c,u);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),s,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(m){m.zb===void 0&&(m.zb=m.time)})(r),this.q_.preprocessData(n);const i=this.q_.createConverterToInternalObj([n])(n.time),s=this.Zb.get(e);if(s!==void 0&&this.q_.key(i)<this.q_.key(s))throw new Error(`Cannot update oldest data, last time=${s}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const a=o===void 0;o===void 0&&(o=lw(i),this.qb.set(this.q_.key(i),o));const l=aw(e.Qh()),c=e.Ca(),u=e.Ta(),h=l(i,o.ee,n,r.zb,c,u);o.Hb.set(e,h),this.nw(e,h);const f={ta:Tc(h)};if(!a)return this.tw(e,-1,f);const p={timeWeight:0,time:o.la,pointData:o,originalTime:uw(o.Hb)},g=Hl(this.Xb,this.q_.key(p.time),(m,w)=>this.q_.key(m.time)<w);this.Xb.splice(g,0,p);for(let m=g;m<this.Xb.length;++m)Sf(this.Xb[m].pointData,m);return this.q_.fillWeightsForPoints(this.Xb,g),this.tw(e,g,f)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const i=r.length!==0?r[r.length-1]:null;i===null||this.q_.key(n.ot)>this.q_.key(i.ot)?Tc(n)&&r.push(n):Tc(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(Tc)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const i=this.Xb[r],s=e[r];if(this.q_.key(i.time)!==this.q_.key(s.time)){n=r;break}s.timeWeight=i.timeWeight,Sf(s.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)Sf(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const i={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((s,o)=>{i.ew.set(o,{$e:s,rw:o===e?r:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:r}),i.St.hw=this.Xb,i.St.lw=n;else{const s=this.Yb.get(e);i.ew.set(e,{$e:s||[],rw:r})}return i}}function Sf(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function Ev(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function dw(t){const e=Ev(t);return t.V!==void 0&&(e.color=t.V),e}function E5(t){const e=Ev(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function N5(t){const e=Ev(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function P_(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function _5(t){const e=P_(t);return t.V!==void 0&&(e.color=t.V),e}function T5(t){const e=P_(t),{V:n,Ot:r,Xh:i}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),i!==void 0&&(e.wickColor=i),e}function mm(t){return{Area:E5,Line:dw,Baseline:N5,Histogram:dw,Bar:_5,Candlestick:T5,Custom:A5}[t]}function A5(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const P5={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},j5={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},R5={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:pv,attributionLogo:!0},kf={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},M5={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},I5={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:pv,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function hw(){return{width:0,height:0,autoSize:!1,layout:R5,crosshair:P5,grid:j5,overlayPriceScales:Object.assign({},kf),leftPriceScale:Object.assign(Object.assign({},kf),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},kf),{visible:!0}),timeScale:M5,watermark:I5,localization:{locale:Mo?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class L5{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return eh(this.ow)?this.aw.Mb(this.ow):0}Li(){return K(this.aw.$t().Uc(this.ow)).Dt}}function fw(t,e,n){const r=A_(t,["time","originalTime"]),i=Object.assign({time:e},r);return n!==void 0&&(i.originalTime=n),i}const O5={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class D5{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class $5{constructor(e,n,r,i,s){this.uw=new rt,this.Es=e,this.cw=n,this.dw=r,this.q_=s,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new ho(new Oa(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const i=r.ll(n.Os(),1),s=r.ll(n.ui(),-1),o=K(r.el()),a=K(r.An());if(i!==null&&s!==null&&i.ee>s.ee)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:s===null||s.ee===a?a-e.to:a-s.ee};return i!==null&&s!==null&&(l.from=i.zb,l.to=s.zb),l}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:mm(this.seriesType())(r)}data(){const e=mm(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>fw(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>fw(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Ar(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=Un(Ar(O5),e),r=this.Es.ea(n);return new D5(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class z5{constructor(e,n,r){this.ww=new rt,this.mu=new rt,this.Om=new rt,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){Ti(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),i=n.Ui(r);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Ar(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function F5(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const i=Math.round(n);if(Math.abs(i-n)<1e-8)return r;n*=10}return r}(e.minMove))}function pw(t){return function(e){if(xc(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:i}=e.handleScale;xc(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),xc(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const n=e.handleScroll;xc(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class B5{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new rt,this.Cw=new rt,this.Tw=new rt,this.Pw=new C5(n);const i=r===void 0?Ar(hw()):Un(Ar(hw()),pw(r));this.q_=n,this.aw=new v5(e,i,n),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const s=this.aw.$t();this.Dw=new z5(s,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=Ks(e),i=Object.assign(Object.assign({},s_),r.defaultOptions());return this.Vw("Custom",i,n,r)}addAreaSeries(e){return this.Vw("Area",C3,e)}addBaselineSeries(e){return this.Vw("Baseline",E3,e)}addBarSeries(e){return this.Vw("Bar",S3,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",b3,e)}addHistogramSeries(e){return this.Vw("Histogram",N3,e)}addLineSeries(e){return this.Vw("Line",k3,e)}removeSeries(e){const n=Dt(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new L5(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(pw(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const i=this.Sw.get(r);if(i===void 0)return;const s=this.aw.$t().dr(i);s!==null&&this.aw.$t().ad(e,n,s)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},i){F5(r.priceFormat);const s=Un(Ar(o_),Ar(n),r),o=this.aw.$t().dd(e,s,i),a=new $5(o,this,this,this,this.q_);return this.Sw.set(a,o),this.kw.set(o,a),a}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,i)=>i.J(r.$e,r.rw)),n.Wu()}Bw(e){return Dt(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((i,s)=>{const o=s.Qh(),a=mm(o)(i);if(o!=="Custom")Ti(y5(a));else{const l=s.Ta();Ti(!l||l(a)===!1)}n.set(this.Bw(s),a)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function V5(t,e,n){let r;if(Ul(t)){const s=document.getElementById(t);Ti(s!==null,`Cannot find element in DOM with id=${t}`),r=s}else r=t;const i=new B5(r,e,n);return e.setOptions(i.options()),i}function U5(t,e){return V5(t,new J0,J0.Id(e))}Object.assign(Object.assign({},o_),s_);const As={dark:{background:"#01091A",text:"#F9FAFC",grid:"#1C2330",border:"#1C2330",success:"#1F734C",destructive:"#A53232"},light:{background:"#FFFFFF",text:"#01091A",grid:"#E4E7EB",border:"#E4E7EB",success:"#299966",destructive:"#EB4444"}},H5=50,W5=30,mw=(t,e)=>(k.debug(`[LightweightChart getLocalizationOptions] Using decimals: ${e} for period: ${t}`),{locale:"ru-RU",priceFormatter:n=>To(n*100,"₽",!1,e),timeFormatter:n=>{const r=new Date(n*1e3);if(t==="1D")try{return r.toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow",hour:"2-digit",minute:"2-digit"})}catch(i){k.error("Error formatting time with timeZone:",i);const s=3*60*60*1e3,o=new Date(r.getTime()+s),a=o.getUTCHours().toString().padStart(2,"0"),l=o.getUTCMinutes().toString().padStart(2,"0");return`${a}:${l}`}else return r.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:t==="1Y"||t==="5Y"||t==="ALL"?"numeric":void 0})}}),j_=({data:t,chartType:e,period:n,assetDecimals:r=2,className:i="h-full w-full",chartOptions:s,seriesOptions:o})=>{const a=y.useRef(null),l=y.useRef(null),c=y.useRef(null),u=jo(m=>m.preference),h=y.useRef(n),f=y.useRef(r??2);y.useEffect(()=>{f.current=r??2},[r]);const p=m=>{const w=As[m];return{layout:{background:{type:um.Solid,color:w.background},textColor:w.text,attributionLogo:!1,fontSize:11},grid:{vertLines:{color:w.grid},horzLines:{color:w.grid}},timeScale:{borderColor:w.border},rightPriceScale:{borderColor:w.border},crosshair:{mode:lm.Normal,vertLine:{width:1,color:m==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:m==="dark"?"#3B4150":"#E0E3EB"},horzLine:{width:1,color:m==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:m==="dark"?"#3B4150":"#E0E3EB"}}}},g=m=>{const w=As[m],v={lastValueVisible:!1,priceLineVisible:!1,priceFormat:{type:"price",precision:2,minMove:.01},priceLineSource:0,...e==="line"&&{crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:m==="dark"?w.background:w.border}};if(e==="candle")return{...v,upColor:w.success,downColor:w.destructive,borderVisible:!1,wickVisible:!0,wickUpColor:w.success,wickDownColor:w.destructive};{const x=w.destructive;return{...v,color:x,lineWidth:2,crosshairMarkerBackgroundColor:x}}};return y.useEffect(()=>{if(!a.current||l.current)return;k.log("[LightweightChart] Creating chart instance.");const m=()=>{l.current&&a.current&&l.current.resize(a.current.clientWidth,a.current.clientHeight)};let w="light",v="light";try{v=window.getComputedStyle(document.documentElement).colorScheme,v==="dark"&&(w="dark"),k.log(`[LightweightChart Create Effect] Determined initial theme from computedStyle: ${w} (colorScheme: ${v})`)}catch(C){k.error("[LightweightChart Create Effect] Error getting computed style, falling back to light theme:",C),document.documentElement.classList.contains("dark")&&(w="dark",k.warn("[LightweightChart Create Effect] Falling back to class check, determined dark theme."))}const x=p(w),b=mw(h.current,f.current),S={width:a.current.clientWidth,height:a.current.clientHeight,localization:b,rightPriceScale:{scaleMargins:{top:.1,bottom:.1},borderColor:As[w].border,visible:!0,autoScale:!0,invertScale:!1},timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!0,fixRightEdge:!0,borderColor:As[w].border,timeVisible:!0,secondsVisible:!1,tickMarkFormatter:(C,_)=>{const P=new Date(C*1e3),L="ru-RU";switch(_){case zi.Year:return P.toLocaleDateString(L,{year:"numeric"});case zi.Month:return P.toLocaleDateString(L,{month:"short",year:"numeric"});case zi.DayOfMonth:return P.toLocaleDateString(L,{day:"2-digit",month:"2-digit"});case zi.Time:case zi.TimeWithSeconds:try{return P.toLocaleTimeString(L,{timeZone:"Europe/Moscow",hour:"2-digit",minute:"2-digit"})}catch{const z=new Date(P.getTime()+108e5),R=z.getUTCHours().toString().padStart(2,"0"),I=z.getUTCMinutes().toString().padStart(2,"0");return`${R}:${I}`}default:return P.toLocaleDateString(L)}}},handleScroll:{vertTouchDrag:!1,mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0},handleScale:{mouseWheel:!0,pinch:!0,axisPressedMouseMove:!0,axisDoubleClickReset:!0},watermark:{visible:!1},crosshair:x.crosshair},E={...S,...x,...s||{},localization:{...S.localization||{},...x.localization||{},...(s==null?void 0:s.localization)||{}},timeScale:{...S.timeScale||{},...x.timeScale||{},...(s==null?void 0:s.timeScale)||{}},rightPriceScale:{...S.rightPriceScale||{},...x.rightPriceScale||{},...(s==null?void 0:s.rightPriceScale)||{}},crosshair:{...S.crosshair||{},...x.crosshair||{},...(s==null?void 0:s.crosshair)||{}}};return l.current=U5(a.current,E),window.addEventListener("resize",m),()=>{k.log("[LightweightChart] Removing chart instance."),window.removeEventListener("resize",m),l.current&&(l.current.remove(),l.current=null,c.current=null)}},[s]),y.useEffect(()=>{if(h.current=n,!l.current)return;k.log(`[LightweightChart] Applying localization options for period: ${n}`);const m=mw(n,f.current);l.current.applyOptions({localization:m})},[n]),y.useLayoutEffect(()=>{if(!l.current)return;let m;u==="system"?m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":m=u;const w=p(m);if(w.timeScale={...w.timeScale||{},borderColor:As[m].border},w.rightPriceScale={...w.rightPriceScale||{},borderColor:As[m].border},l.current.applyOptions(w),c.current){const v=g(m);c.current.applyOptions(v)}},[u,e]),y.useEffect(()=>{if(!l.current||!t){k.log("[LightweightChart] Skipping series update: chart or data not ready.");return}if(k.log(`[LightweightChart] Updating series. Type: ${e}, Points: ${t.length}`),c.current){k.log("[LightweightChart] Removing existing series.");try{l.current.removeSeries(c.current)}catch(E){k.error("[LightweightChart] Error removing series:",E)}c.current=null}let m;const w=jo.getState().preference;w==="system"?m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":m=w;const v=g(m),x=o||{},b={...v,...x,priceFormat:{...v.priceFormat||{},...x.priceFormat||{},precision:2}};let S=null;try{if(e==="candle"){S=l.current.addCandlestickSeries(b);const E=t.map(C=>({time:C.time,open:C.open,high:C.high,low:C.low,close:C.close}));S.setData(E)}else{S=l.current.addLineSeries(b);const E=t.map(C=>({time:C.time,value:C.close}));S.setData(E)}if(c.current=S,k.log("[LightweightChart] New series added and data set."),t.length>0){const E=e==="line"?H5:W5,C=Math.max(0,t.length-E),_=t.length-1;l.current.timeScale().setVisibleLogicalRange({from:C,to:_}),k.log(`[LightweightChart] Set initial visible range: ${C} to ${_}`),l.current.timeScale().applyOptions({fixLeftEdge:!0,fixRightEdge:!0})}else l.current.timeScale().applyOptions({fixLeftEdge:!1,fixRightEdge:!1})}catch(E){k.error("[LightweightChart] Error adding series or setting data:",E),E instanceof Error&&E.message.includes("disposed")&&k.warn("[LightweightChart] Attempted to operate on a disposed chart object.")}},[t,e,u,o,r]),d.jsx("div",{ref:a,className:U("h-full w-full",i)})};var Nv="Tabs",[q5,W8]=Ft(Nv,[Zd]),R_=Zd(),[Y5,_v]=q5(Nv),M_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Fl(a),[h,f]=Nn({prop:r,onChange:i,defaultProp:s});return d.jsx(Y5,{scope:n,baseId:ar(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx(ue.div,{dir:u,"data-orientation":o,...c,ref:e})})});M_.displayName=Nv;var I_="TabsList",L_=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=_v(I_,n),o=R_(n);return d.jsx(RN,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(ue.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});L_.displayName=I_;var O_="TabsTrigger",D_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=_v(O_,n),a=R_(n),l=F_(o.baseId,r),c=B_(o.baseId,r),u=r===o.value;return d.jsx(MN,{asChild:!0,...a,focusable:!i,active:u,children:d.jsx(ue.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:de(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:de(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:de(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});D_.displayName=O_;var $_="TabsContent",z_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=_v($_,n),l=F_(a.baseId,r),c=B_(a.baseId,r),u=r===a.value,h=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(Ur,{present:i||u,children:({present:f})=>d.jsx(ue.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});z_.displayName=$_;function F_(t,e){return`${t}-trigger-${e}`}function B_(t,e){return`${t}-content-${e}`}var K5=M_,V_=L_,U_=D_,H_=z_;const rh=K5,Wl=y.forwardRef(({className:t,...e},n)=>d.jsx(V_,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Wl.displayName=V_.displayName;const _t=y.forwardRef(({className:t,...e},n)=>d.jsx(U_,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));_t.displayName=U_.displayName;const G5=y.forwardRef(({className:t,...e},n)=>d.jsx(H_,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));G5.displayName=H_.displayName;Me.locale("ru");Me.extend(cv);Me.extend(Dl);Me.extend($l);const Z5=({date:t,className:e})=>{const n=t?Me.utc(t).local().format("D MMMM YYYY"):null;return d.jsxs("div",{className:U("flex items-center justify-center gap-2 p-3 rounded-md border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-300",e),children:[d.jsx(Rk,{className:"h-5 w-5 flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:["Актив вышел из обращения",n&&` ${n}`]})]})},X5=({className:t})=>d.jsxs("div",{className:U("flex items-center justify-center gap-2 p-3 rounded-md border border-destructive/50 bg-destructive/10 text-destructive",t),children:[d.jsx(Mk,{className:"h-5 w-5 flex-shrink-0"})," ",d.jsx("span",{className:"text-sm font-medium",children:"Торговля этим активом запрещена"})]}),Q5=()=>{var A;const{id:t}=vs(),e=Number(t),n=vt(),r=vn(),{accounts:i,isLoading:s,error:o}=dr(),[a,l]=y.useState(null),[c,u]=y.useState(!0),[h,f]=y.useState(null),{tg:p}=Qt(),[g,m]=y.useState("1M"),[w,v]=y.useState("line"),[x,b]=y.useState([]),[S,E]=y.useState(!0),[C,_]=y.useState(null),{useMock:P}=y.useMemo(()=>ys(),[]),L=y.useMemo(()=>(i==null?void 0:i.filter(J=>!!(J!=null&&J.brokerAccount)&&!J.brokerAccount.isDeleted))??[],[i]),j=y.useMemo(()=>{if(!a||!L||L.length===0)return null;let J=0,le=0;L.forEach(X=>{var H;const se=(H=X.portfolioItems)==null?void 0:H.find(q=>q.assetId===a.id);se&&se.averagePriceCopecks!==null&&se.quantity>0&&se.averagePriceCopecks>0&&(J+=se.averagePriceCopecks*se.quantity,le+=se.quantity)});const ce=le>0?J/le:null;return k.log(`[AssetPage useMemo avgPrice] Calculated avg price for ${a.ticker}: ${ce}`),ce},[a,L]),M=y.useMemo(()=>g==="1D"?"line":w,[g,w]),z=y.useMemo(()=>a?[a.ticker]:[],[a]),{prices:R,isLoading:I,error:$}=_d(z),D=y.useMemo(()=>a?R.get(a.ticker):null,[a,R]),F=y.useMemo(()=>D?Math.round(D.price*100):null,[D]);if(y.useEffect(()=>{const J=new AbortController,le=J.signal;return(async()=>{if(!e||isNaN(e)){u(!1),f("Неверный ID актива.");return}u(!0),f(null),l(null);try{const X=await Tk(e,{signal:le});if(!le.aborted){if(!X||typeof X.isSuccess!="boolean")throw new Error("Некорректный ответ от getAssetById.");if(X.isSuccess&&X.resultObject){let se=X.resultObject;P&&se.id===2&&(k.warn("[AssetPage MOCK] Setting isTradingProhibited=true for asset ID 2 (TGLD)"),se={...se,isTradingProhibited:!0}),l(se),f(null)}else{const se=X.errorMessage||`Актив ${e} не найден.`;f(se),l(null)}}}catch(X){X.name==="AbortError"?k.log(`[AssetPage fetchAssetDetails] Request aborted for ID ${e}.`):le.aborted||(f(X.message||"Ошибка загрузки"),l(null))}finally{le.aborted||u(!1)}})(),()=>{k.log(`[AssetPage fetchAssetDetails] Cleanup: Aborting fetch for ID ${e}.`),J.abort()}},[e,P]),y.useEffect(()=>{const J=new AbortController,le=J.signal;return(async()=>{if(!(a!=null&&a.id)){b([]),E(!1),_(null);return}E(!0),_(null),k.log(`[AssetPage] Fetching chart history for asset ${a.id}, period ${g}`);try{const X=await Pk(a.id,g,{signal:le});le.aborted||(X.isSuccess&&Array.isArray(X.resultObject)?(b(X.resultObject),_(null)):(_(X.errorMessage||`Не удалось загрузить историю для ${g}.`),b([])))}catch(X){X.name==="AbortError"?k.log(`[AssetPage fetchChartHistory] Fetch aborted for period ${g}`):le.aborted||(_(X.message||"Ошибка загрузки истории цен."),b([]))}finally{le.aborted||E(!1)}})(),()=>{k.log(`[AssetPage fetchChartHistory] Cleanup: Aborting fetch for period ${g}`),J.abort()}},[a==null?void 0:a.id,g]),y.useEffect(()=>{var ce;const J=((ce=r.state)==null?void 0:ce.from)||"/market",le=()=>n(J,{replace:!0});return p&&(p.BackButton.show(),p.onEvent("backButtonClicked",le),k.log("[AssetPage] Telegram BackButton shown and handler attached.")),()=>{p&&(p.BackButton.hide(),p.offEvent("backButtonClicked",le),k.log("[AssetPage] Telegram BackButton hidden and handler removed."))}},[p,n,(A=r.state)==null?void 0:A.from]),c||s)return d.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-8rem)]",children:d.jsx(Ee,{size:"lg"})});if(o)return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(gt,{message:`Ошибка загрузки данных портфеля: ${o}`})," "]});if(h){const J=h||`Актив с ID ${e} не найден или произошла ошибка.`;return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(gt,{message:J})," "]})}if(!a)return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(gt,{message:`Не удалось загрузить данные актива (ID: ${e}).`})," "]});const T=J=>{v(J)},O=a.outOfCirculationAt,N=O&&new Date(O)<new Date,B=a.isTradingProhibited===!0;k.log(`[AssetPage] Rendering main content. Ticker: ${a.ticker}, outOfCirculationAt: ${O}, isInactive: ${N}, isTradingProhibited: ${B}`);const Q=!N&&!B;return d.jsxs("div",{className:U("p-4 space-y-6",Q?"pb-24":"pb-6"),children:[d.jsxs("div",{className:"relative flex items-center justify-between h-12",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"}),d.jsxs("div",{className:"flex flex-col items-center text-center flex-grow mx-2 min-w-0",children:[d.jsxs("h1",{className:"text-lg font-semibold truncate leading-tight",title:a.title||a.shortName||a.ticker,children:[" ",Ao(a)," "]}),d.jsx("span",{className:"text-sm text-muted-foreground uppercase mt-0.5",children:a.ticker}),d.jsxs("div",{className:"text-xs mt-1",children:[" ",I&&F===null?d.jsx(Ee,{size:"sm"}):F!==null?d.jsx(pt,{value:F,className:"text-foreground",asset:a}):$?d.jsx("span",{className:"text-destructive",title:$,children:"Ошибка цены"}):d.jsx("span",{className:"text-muted-foreground",children:"—"})," "]})]}),d.jsxs("div",{className:"flex-shrink-0",children:[" ",d.jsx(e_,{asset:a,priceInfo:D||null,isLoadingPrice:I,priceError:$})," "]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2 px-1 gap-2",children:[d.jsx(rh,{defaultValue:g,onValueChange:J=>m(J),className:"flex-grow",children:d.jsxs(Wl,{className:"grid grid-cols-6 h-9 w-full",children:[" ",d.jsx(_t,{value:"1D",className:"text-xs h-full",children:"1D"})," ",d.jsx(_t,{value:"1W",className:"text-xs h-full",children:"1W"})," ",d.jsx(_t,{value:"1M",className:"text-xs h-full",children:"1M"})," ",d.jsx(_t,{value:"1Y",className:"text-xs h-full",children:"1Y"})," ",d.jsx(_t,{value:"5Y",className:"text-xs h-full",children:"5Y"})," ",d.jsx(_t,{value:"ALL",className:"text-xs h-full",children:"All"})," "]})}),d.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[d.jsxs(ke,{variant:M==="line"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>T("line"),title:"Линейный график",children:[" ",d.jsx(zk,{className:"h-4 w-4"})," "]}),d.jsxs(ke,{variant:M==="candle"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>T("candle"),title:"Свечной график",disabled:g==="1D",children:[" ",d.jsx(Ik,{className:"h-4 w-4"})," "]})]})]}),d.jsxs("div",{className:"relative h-[250px] w-full bg-card rounded-md border shadow-sm overflow-hidden",children:[d.jsxs("div",{className:"absolute bottom-0 right-2 z-10",children:[" ",d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(`/asset/${a.id}/chart`),title:"На весь экран",children:[" ",d.jsx(oO,{className:"h-3.5 w-3.5"})," "]})," "]}),d.jsx("div",{className:U("absolute inset-0 transition-opacity duration-200",S?"opacity-50 pointer-events-none":"opacity-100"),children:x.length>0?d.jsx(j_,{data:x,chartType:M,period:g,assetDecimals:a==null?void 0:a.decimals}):!S&&!C?d.jsx("div",{className:U("flex items-center justify-center text-muted-foreground h-full"),children:" Нет данных о цене за этот период. "}):null}),S&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/30 z-10",children:d.jsx(Ee,{})}),C&&!S&&d.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4 z-10",children:[" ",d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[" ",d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",C," "]})," "]})]})]}),B?d.jsx(X5,{}):N?d.jsx(Z5,{date:a.outOfCirculationAt}):d.jsxs(d.Fragment,{children:[j!==null&&d.jsx("div",{className:"mt-4 p-3 bg-card border rounded-md shadow-sm",children:d.jsxs("div",{className:"flex justify-between items-center text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Средняя цена покупки в портфеле:"}),d.jsx(pt,{value:j,className:"font-medium",asset:a,forceDecimalPlaces:2})]})}),d.jsx(i_,{asset:a,accounts:L,isTradingProhibited:B,isOutOfCirculation:!!N})]})]})},J5=Td("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gw({className:t,variant:e,...n}){return d.jsx("div",{className:U(J5({variant:e}),t),...n})}const eV=(t,e)=>{let n=null;const r=(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...i),n=null},e)};return r.cancel=()=>{n&&(clearTimeout(n),n=null)},r},tV=20,nV=()=>{const{searchTerm:t,activeTabValue:e,searchResults:n,totalResults:r,isLoading:i,error:s,didPerformSearch:o,marketTabs:a,isTypesLoading:l,typesError:c}=kr(R=>({searchTerm:R.searchTerm,activeTabValue:R.activeTabValue,searchResults:R.searchResults,totalResults:R.totalResults,isLoading:R.isLoading,error:R.error,didPerformSearch:R.didPerformSearch,marketTabs:R.marketTabs,isTypesLoading:R.isTypesLoading,typesError:R.typesError}),io),u=kr(R=>R.setSearchTerm),h=kr(R=>R.setActiveTab),f=kr(R=>R.fetchMarketAssets),p=kr(R=>R.fetchMarketTabs),g=vt(),m=vn(),w=y.useRef(null),{useMock:v}=y.useMemo(()=>ys(),[]);y.useEffect(()=>{kr.getState().marketTabs.length<=1&&!l&&p()},[p,l]);const x=y.useRef(eV(R=>{u(R)},400)).current,b=R=>{x(R.target.value)};y.useEffect(()=>{const R=kr.getState();!R.didPerformSearch&&!R.isTypesLoading&&!R.isLoading&&R.marketTabs.length>0&&f(!1)},[l]);const S=y.useCallback(R=>{const $=kr.getState().marketTabs.find(D=>D.value===R);$&&h(R,$.apiTitles)},[h]),E=y.useMemo(()=>n.map(R=>R==null?void 0:R.ticker).filter(R=>!!R&&R!=="RUB"),[n]),{prices:C,isLoading:_,error:P}=_d(E),L=R=>{!R||!R.id||g(`/asset/${R.id}`,{state:{from:m.pathname}})},j=y.useCallback(()=>{!i&&n.length<r&&f(!0)},[i,n.length,r,f]),M=!i&&n.length>0&&n.length<r;y.useEffect(()=>{const R=w.current;if(!R)return;const I=new IntersectionObserver(([$])=>{$.isIntersecting&&M&&!i&&j()},{threshold:.1});return I.observe(R),()=>{R&&I.unobserve(R)}},[M,j,i]);const z=R=>d.jsxs("div",{className:"flex items-center justify-between p-3 space-x-3 animate-pulse",children:[d.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden flex-grow",children:[d.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"space-y-1.5 flex-grow",children:[d.jsx("div",{className:"h-3 rounded bg-muted w-3/4"}),d.jsx("div",{className:"h-2.5 rounded bg-muted w-1/2"})]})]}),d.jsx("div",{className:"h-4 w-16 rounded bg-muted flex-shrink-0 ml-2"})]},`skel-${R}`);return d.jsxs("div",{className:"p-4 space-y-4 flex flex-col h-full",children:[d.jsxs(St,{className:"flex-shrink-0 shadow-sm border border-border rounded-lg overflow-hidden bg-card",children:[d.jsxs(mr,{className:"pb-3 pt-4 px-4",children:[d.jsx(Vr,{className:"text-lg mb-2",children:"Биржа"}),d.jsxs("div",{className:"relative",children:[d.jsx(uO,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),d.jsx($n,{type:"search",placeholder:"Название или тикер...",defaultValue:t,onChange:b,className:"pl-9 h-10 rounded-md text-sm","aria-label":"Поиск активов"})]})]}),d.jsx(Xt,{className:"pt-1 pb-3 px-4",children:d.jsx("div",{className:"min-h-[40px]",children:l?d.jsx("div",{className:"flex justify-center p-2",children:d.jsx(Ee,{size:"sm"})}):c?d.jsx("div",{className:"text-destructive text-xs p-2 text-center",children:c}):a.length>0?d.jsx(rh,{value:e,onValueChange:S,children:d.jsx(Wl,{className:"flex flex-wrap h-auto justify-start -m-1 p-0 bg-transparent",children:a.map(R=>d.jsxs(_t,{value:R.value,className:U("text-xs h-8 px-3 py-1 m-1 rounded-full transition-all border shadow-sm","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-primary data-[state=active]:shadow","data-[state=inactive]:bg-card data-[state=inactive]:border-border data-[state=inactive]:text-muted-foreground hover:data-[state=inactive]:bg-muted/60"),disabled:i||l,children:[" ",R.label," "]},R.value))})}):null})})]}),d.jsxs("div",{className:"relative flex-grow overflow-y-auto no-scrollbar border border-border rounded-lg shadow-sm bg-card min-h-0",children:[i&&n.length===0&&!s&&d.jsxs("div",{className:"divide-y divide-border",children:[" ",Array.from({length:8}).map((R,I)=>z(I))," "]}),s&&n.length===0&&!i&&d.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[" ",d.jsx(gt,{message:s})," "]}),o&&n.length===0&&!i&&!s&&d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4 text-center",children:"Ничего не найдено."}),n.length>0&&d.jsxs("div",{className:"divide-y divide-border",children:[n.map(R=>{if(!R)return null;const I=C.get(R.ticker),$=I?Math.round(I.price*100):null,D=R.outOfCirculationAt,F=D&&new Date(D)<new Date,T=R.isTradingProhibited===!0||v&&R.id===2,O=F||T;return d.jsxs("div",{className:U("flex items-center justify-between p-3 space-x-3 transition-colors",O?"opacity-60 bg-muted/30":"hover:bg-muted/50","cursor-pointer"),onClick:()=>L(R),"aria-disabled":O||void 0,title:T?"Торговля запрещена (нажмите для просмотра)":F?"Актив вышел из обращения (нажмите для просмотра)":`Перейти к ${R.ticker}`,children:[d.jsx(Ig,{asset:R,showLotSize:!0,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:U("text-sm font-medium",O?"text-muted-foreground":""),tickerClassName:U("text-xs",O?"text-muted-foreground/80":"")}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:T?d.jsxs(gw,{variant:"destructive",className:"text-xs font-normal px-1.5 py-0.5",children:[d.jsx(iO,{size:12,className:"mr-1"})," Запрет"]}):F?d.jsxs(gw,{variant:"secondary",className:"text-xs font-normal px-1.5 py-0.5",children:[d.jsx(Rk,{size:12,className:"mr-1"})," Архив"]}):_&&$===null&&!P?d.jsx(Ee,{size:"sm"}):$!==null?d.jsx(pt,{value:$,className:"text-sm",asset:R}):P?d.jsx("span",{className:"text-xs text-destructive",title:P,children:d.jsx(Rg,{size:12,className:"inline -mt-0.5"})}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"})})]},R.id)}),d.jsx("div",{ref:w,style:{height:"1px"},"aria-hidden":"true"}),i&&n.length>0&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ee,{size:"sm"})}),!i&&!M&&n.length>0&&r>tV&&d.jsx("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"Конец списка"})]}),P&&n.length>0&&!_&&d.jsx("div",{className:"sticky bottom-0 p-1 text-center text-xs bg-destructive/10 text-destructive border-t border-destructive/30 z-10 rounded-b-lg",role:"alert",children:" Ошибка обновления цен. "})]}),d.jsx(mN,{})]})},rV=({investor:t,index:e})=>{const[n,r]=y.useState(!1);if(!(t!=null&&t.telegramUser))return null;const i=t.telegramUser,s=i.userId;Oe.useEffect(()=>{r(!1)},[s]);const o=(p,g)=>{var v,x;const m=(v=p==null?void 0:p[0])==null?void 0:v.toUpperCase(),w=(x=g==null?void 0:g[0])==null?void 0:x.toUpperCase();return m&&w?`${m}${w}`:m||"?"},a=i.firstName?`${i.firstName}${i.lastName?` ${i.lastName}`:""}`:i.username?`@${i.username}`:`User ID: ${s}`,l=o(i.firstName,i.lastName),c=i.photo_url||i.photoUrl||null,u=()=>{n||r(!0)},h=e===0?"text-yellow-500":e===1?"text-gray-500 dark:text-gray-400":e===2?"text-orange-500 dark:text-orange-400":"text-foreground/80",f=e+1;return d.jsxs("li",{className:"flex items-center justify-between px-4 py-4 space-x-4 hover:bg-muted/50 transition-colors duration-100",children:[d.jsxs("div",{className:"flex items-center space-x-4 flex-grow min-w-0",children:[d.jsx("div",{className:U("flex-shrink-0 w-8 h-10 flex items-center justify-center font-semibold text-sm tabular-nums"),children:f===1?d.jsx(XL,{size:18,className:U("inline -mt-0.5",h),fill:"currentColor"}):d.jsx("span",{className:h,children:`${f}.`})}),d.jsxs(qd,{className:"w-10 h-10 flex-shrink-0 border",children:[!n&&c&&d.jsx(Yd,{src:c,alt:a,onError:u},c),d.jsx(Kd,{className:"text-sm",children:l})]}),d.jsxs("div",{className:"overflow-hidden",children:[d.jsx("p",{className:"text-base font-semibold truncate leading-tight",title:a,children:a}),i.username&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate leading-tight",children:["@",i.username]})]})]}),d.jsx("div",{className:"flex-shrink-0 ml-2 text-right",children:d.jsx(pt,{value:t.totalAmountCopecks,className:"text-base font-semibold"})})]})},iV=async t=>{var n;const e="Failed to get top investors.";k.log("[API/Investors] getTop10Investors called");try{const r=await et.get("/api/BrokerAccountUser/GetTop10MostRichInvestors",{signal:t==null?void 0:t.signal});k.log("[API/Investors] getTop10Investors response received:",(n=r==null?void 0:r.data)==null?void 0:n.isSuccess);const i=lt(r,e);return i.isSuccess&&i.resultObject===null&&(k.warn("[API/Investors] getTop10Investors success but resultObject is null. Normalizing to empty array."),i.resultObject=[]),i}catch(r){return ct(r,e)}},sV=60*1e3,oV=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,s]=y.useState(!1),[o,a]=y.useState(null),l=y.useRef(null),c=y.useCallback(async(h=!1,f=!1)=>{l.current&&(!f||!i)&&(l.current.abort(),k.log("[useTopInvestorsData fetch] Aborted previous fetch request.")),l.current=new AbortController;const p=l.current.signal;k.log(`[useTopInvestorsData fetch] Fetching... (isBackgroundRefresh: ${h}, isManualTrigger: ${f})`),h?s(!0):r(!0),(!h||o||f)&&a(null);try{const g=await iV({signal:p});if(p.aborted){k.log("[useTopInvestorsData fetch] Fetch aborted before state update.");return}if(g!=null&&g.isSuccess&&g.resultObject){const m=g.resultObject.sort((w,v)=>v.totalAmountCopecks-w.totalAmountCopecks);e(m),a(null)}else{const m=(g==null?void 0:g.errorMessage)||"Failed to load top investors";h||e([]),a(m)}}catch(g){g.name==="AbortError"?k.log("[useTopInvestorsData fetch] Fetch caught AbortError."):p.aborted||(a(g.message||"Error fetching data"),h||e([]))}finally{p.aborted||(r(!1),s(!1),l.current=null)}},[o]);y.useEffect(()=>{c(!1);const h=setInterval(()=>c(!0),sV);return()=>{clearInterval(h),l.current&&(l.current.abort(),l.current=null)}},[c]);const u=y.useCallback(()=>{k.log("[useTopInvestorsData] Manual refresh triggered."),c(!1,!0)},[c]);return{investors:t,isLoading:n,isRefreshing:i,error:o,refreshNow:u}},aV=()=>{const{investors:t,isLoading:e,isRefreshing:n,error:r,refreshNow:i}=oV();return k.log("[TopInvestorsPage Render]",{isLoading:e,isRefreshing:n,error:r,investorCount:t.length}),d.jsx("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:d.jsxs(St,{className:"flex flex-col flex-grow overflow-hidden shadow-md rounded-xl border",children:[d.jsxs(mr,{className:"flex-shrink-0 border-b pb-3 pt-4 text-center relative",children:[d.jsx(Vr,{className:"text-lg font-semibold",children:"Топ 10 Инвесторов"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"(По общей стоимости портфеля)"}),n&&!e&&d.jsx("div",{className:"absolute top-2 right-2 animate-pulse",children:d.jsx(Ee,{size:"sm"})})]}),d.jsxs(Xt,{className:"flex-grow overflow-y-auto no-scrollbar p-0",children:[e&&d.jsx("div",{className:"flex justify-center items-center h-48",children:d.jsx(Ee,{})}),r&&!e&&d.jsxs("div",{className:"p-4",children:[d.jsx(gt,{message:r}),d.jsx(ke,{variant:"outline",size:"sm",onClick:i,className:"mt-4 mx-auto block",disabled:e||n,children:"Попробовать снова"})]}),!e&&!r&&d.jsxs(d.Fragment,{children:[" ",t.length>0?d.jsx("ol",{className:"divide-y divide-border/60",children:t.map((s,o)=>{var a;return d.jsx(rV,{investor:s,index:o},((a=s.telegramUser)==null?void 0:a.userId)??o)})}):!r&&d.jsx("p",{className:"text-center text-muted-foreground py-16",children:"Список инвесторов пуст."})]})]})]})})},lV=`
## Что такое акции и как на них заработать?

Акция — это ценная бумага, которая подтверждает, что вы владеете долей в компании. Покупая акцию, вы становитесь **акционером** и совладельцем бизнеса.

### Зачем компании выпускают акции?

*   **Привлечение капитала:** Компании продают акции, чтобы получить деньги на развитие: запуск новых продуктов, строительство заводов, выход на новые рынки.
*   **Публичность:** Выход на биржу повышает узнаваемость компании.

### Зачем инвесторы покупают акции?

1.  **Рост стоимости:** Цена акции может вырасти со временем, если дела у компании идут хорошо. Инвестор может продать акцию дороже, чем купил, получив **прибыль**.
2.  **Дивиденды:** Некоторые компании делятся частью своей прибыли с акционерами, выплачивая **дивиденды**. Это регулярный доход для инвестора.

### Виды акций

*   **Обыкновенные:** Дают право голоса на собрании акционеров и право на получение дивидендов (если компания их выплачивает).
*   **Привилегированные ("префы"):** Обычно не дают права голоса, но гарантируют получение фиксированных дивидендов (если компания получила прибыль). При банкротстве владельцы "префов" получают выплаты раньше владельцев обыкновенных акций.

### Риски

*   **Рыночный риск:** Цена акции может не только расти, но и падать из-за общих экономических условий или проблем у конкретной компании.
*   **Риск банкротства:** Если компания обанкротится, акционеры могут потерять все вложенные деньги.

**Важно:** Инвестиции в акции связаны с риском. Перед покупкой изучите компанию и оцените свои финансовые возможности.
`,cV=`
## Как найти потерянные акции?

Если вы или ваши родственники когда-то покупали акции (например, в 1990-е годы во время приватизации), но документы утеряны, есть способы попытаться их найти.

### Шаг 1: Соберите информацию

Вспомните или найдите любые данные:
*   Название компании, акции которой покупались.
*   Примерное время покупки.
*   Имя человека, на которого оформлялись акции.
*   Любые старые документы: выписки со счета, сертификаты акций (хотя сейчас они обычно бездокументарные).

### Шаг 2: Обратитесь к регистратору

Акции учитываются в специальных организациях — **регистраторах**.
*   **Узнайте регистратора компании:** Найдите на сайте компании (в разделе "Акционерам" или "Инвесторам") или на сайтах раскрытия информации (например, e-disclosure.ru) название регистратора, который ведет реестр ее акционеров.
*   **Отправьте запрос регистратору:** Свяжитесь с регистратором (по телефону, почте или через сайт) и объясните ситуацию. Укажите всю собранную информацию о предполагаемом владельце акций. Возможно, потребуется предоставить документы, подтверждающие личность или родство (если ищете акции родственника). Регистратор проверит свои записи.

### Шаг 3: Обратитесь к брокеру или депозитарию (если акции покупались через них)

Если акции покупались через брокера или учитывались в депозитарии, можно попробовать обратиться к ним.
*   Вспомните название брокера/депозитария.
*   Свяжитесь с ними и запросите информацию о наличии счета и акций на имя предполагаемого владельца.

### Шаг 4: Проверьте наследство

Если вы ищете акции умершего родственника, они могли войти в **наследственную массу**.
*   Обратитесь к нотариусу, который вел наследственное дело. Он мог делать запросы регистраторам и депозитариям.
*   Если наследственное дело не открывалось или акции не были включены, возможно, придется обращаться в суд для включения акций в наследство.

### Что делать, если акции нашлись?

*   **У регистратора:** Вам нужно будет открыть счет у брокера или в депозитарии, а затем дать поручение регистратору перевести акции на этот счет. Для этого потребуется личный визит к регистратору или нотариально заверенные документы.
*   **У брокера/депозитария:** Если счет еще активен, вы сможете управлять акциями через этого брокера. Если счет закрыт или неактивен, уточните у брокера/депозитария процедуру восстановления доступа или перевода акций.

**Важно:** Процесс поиска может быть долгим и потребовать настойчивости. Некоторые регистраторы и брокеры могут взимать плату за поиск информации или восстановление документов.
`,uV=`
## Зачем нужны депозитарные расписки?

Депозитарная расписка (ДР) — это ценная бумага, которая **удостоверяет право собственности на акции иностранной компании**. Сами акции при этом хранятся в банке-кастодиане в стране происхождения компании, а банк-депозитарий (обычно крупный международный банк) выпускает на них расписки, которые торгуются на других биржах.

### Виды депозитарных расписок:

*   **АДР (ADR, American Depositary Receipt):** Торгуются на американских биржах (NYSE, NASDAQ).
*   **ГДР (GDR, Global Depositary Receipt):** Торгуются на европейских и азиатских биржах (Лондон, Франкфурт, Сингапур и др.).
*   **РДР (Российские депозитарные расписки):** Позволяли иностранным компаниям размещать свои бумаги на российских биржах (сейчас менее актуальны).

### Зачем они нужны?

*   **Инвесторам:**
    *   **Доступ к иностранным акциям:** Позволяют покупать акции иностранных компаний на своей локальной бирже без необходимости открывать счет у иностранного брокера.
    *   **Удобство:** Торгуются в привычной валюте и по правилам местной биржи.
    *   **Дивиденды:** Владельцы ДР обычно получают дивиденды так же, как и владельцы базовых акций (за вычетом комиссий банка-депозитария и налогов).
*   **Компаниям (эмитентам):**
    *   **Привлечение иностранных инвесторов:** Выпуск ДР позволяет компании расширить круг инвесторов и привлечь капитал на международных рынках.
    *   **Повышение ликвидности:** Торги на нескольких площадках увеличивают ликвидность бумаг.
    *   **Престиж:** Листинг на крупных мировых биржах повышает статус компании.

### Соотношение ДР и акций

Одна депозитарная расписка может соответствовать одной акции, нескольким акциям или даже доле акции. Это соотношение (ratio) устанавливается при выпуске ДР.

### Риски

*   **Рыночный риск:** Цена ДР зависит от цены базовой акции и подвержена тем же колебаниям.
*   **Валютный риск:** Если ДР торгуется в валюте, отличной от валюты базовой акции, ее цена будет зависеть и от обменного курса.
*   **Риск делистинга:** ДР могут быть сняты с торгов на бирже.
*   **Геополитические риски:** Санкции или законодательные изменения могут ограничить торговлю ДР или конвертацию их в акции (как это произошло с российскими компаниями, чьи ДР торговались за рубежом).

**В итоге:** Депозитарные расписки — удобный инструмент для диверсификации портфеля за счет иностранных акций, но важно помнить о связанных с ними рисках.
`,dV=`
## Что такое маржинальная торговля и в чем ее риски?

**Маржинальная торговля** — это совершение сделок на бирже с использованием заемных средств (денег или ценных бумаг), предоставляемых брокером под залог активов на вашем счете. Это позволяет покупать больше активов, чем у вас есть денег, или продавать активы, которых у вас нет (игра на понижение, "шорт").

### Как это работает?

1.  **Маржинальный счет:** Для маржинальной торговли нужен специальный брокерский счет с возможностью использования "кредитного плеча".
2.  **Обеспечение (маржа):** Часть ваших собственных средств и активов на счете выступает залогом (начальная маржа).
3.  **Кредитное плечо:** Брокер предоставляет вам заемные средства, превышающие ваше обеспечение в несколько раз (например, плечо 1:3 означает, что на 1 ваш рубль брокер дает еще 2 рубля в долг).
4.  **Сделки:** Вы совершаете сделки на сумму, превышающую ваши собственные средства.
5.  **Плата за плечо:** За использование заемных средств брокер взимает комиссию (обычно ежедневную).
6.  **Поддерживающая маржа:** Стоимость ваших активов (включая заемные) не должна опускаться ниже определенного уровня (поддерживающая маржа), установленного брокером.

### Виды маржинальных сделок:

*   **Лонг (Long):** Покупка активов на заемные деньги в расчете на рост их цены. Вы занимаете деньги.
*   **Шорт (Short, короткая продажа):** Продажа активов, взятых в долг у брокера, в расчете на падение их цены. Вы занимаете ценные бумаги. Чтобы закрыть позицию, вам нужно будет откупить эти бумаги на рынке (желательно дешевле) и вернуть брокеру.

### Преимущества:

*   **Потенциально высокая прибыль:** Кредитное плечо позволяет увеличить объем сделок и, соответственно, потенциальную прибыль от движения цены.
*   **Возможность заработка на падении:** Сделки "шорт" позволяют зарабатывать на снижении котировок.
*   **Гибкость:** Можно использовать для краткосрочных спекуляций или хеджирования рисков.

### Риски (Очень высокие!):

*   **Потенциально высокие убытки:** Кредитное плечо работает в обе стороны. Если цена идет против вас, убытки также умножаются на размер плеча и могут превысить ваши собственные вложения.
*   **Маржин-колл (Margin Call):** Если стоимость активов на вашем счете падает ниже уровня поддерживающей маржи, брокер потребует внести дополнительные средства или закрыть часть позиций для восстановления уровня маржи.
*   **Принудительное закрытие позиций:** Если вы не выполните требования маржин-колла, брокер имеет право принудительно закрыть ваши убыточные позиции по текущим рыночным ценам, чтобы покрыть долг перед ним. Это может зафиксировать значительные убытки.
*   **Плата за перенос позиций:** Комиссия за использование плеча может "съедать" прибыль, особенно при долгом удержании маржинальных позиций.
*   **Риск "шорт-сквиза" (Short Squeeze):** При игре на понижение резкий рост цены актива может заставить "шортистов" массово закрывать позиции (откупать бумаги), что еще больше толкает цену вверх, приводя к огромным убыткам.

**Вывод:** Маржинальная торговля — инструмент для **опытных** инвесторов и трейдеров, которые полностью понимают и принимают высокие риски. **Новичкам категорически не рекомендуется** использовать кредитное плечо досконально не разобравшись в механизмах и рисках.
`,hV=`
## Облигации: что это такое и как на них заработать?

**Облигация** — это долговая ценная бумага. Покупая облигацию, вы даете деньги в долг эмитенту (тому, кто выпустил облигацию), а он обязуется вернуть вам эту сумму в определенный срок и выплачивать процентный доход (купоны) в течение срока обращения облигации.

### Кто выпускает облигации (эмитенты)?

*   **Государство:** Министерство финансов (ОФЗ — Облигации Федерального Займа), регионы РФ (субфедеральные), города (муниципальные). Считаются самыми надежными.
*   **Компании (корпорации):** Крупные и средние предприятия для привлечения финансирования. Риск зависит от надежности компании.

### Основные параметры облигации:

*   **Номинал:** Сумма, которую эмитент вернет вам при погашении облигации. Обычно 1000 рублей.
*   **Рыночная цена:** Цена, по которой облигация торгуется на бирже. Может быть выше, ниже или равна номиналу. Выражается в процентах от номинала (например, 98,5% или 102%).
*   **Дата погашения:** Срок, когда эмитент вернет номинал облигации.
*   **Купон:** Процентный доход, который эмитент выплачивает владельцу облигации. Может быть:
    *   **Фиксированным:** Ставка купона известна заранее и не меняется (например, 8% годовых).
    *   **Переменным:** Ставка купона привязана к какому-либо индикатору (например, ставке ЦБ РФ RUONIA + 1%).
    *   **Нулевым (дисконтные облигации):** Купоны не выплачиваются, но облигация продается со скидкой (дисконтом) к номиналу. Доход инвестора — разница между ценой покупки и номиналом при погашении.
*   **Периодичность выплаты купонов:** Как часто выплачивается купон (например, раз в полгода, раз в квартал).
*   **Накопленный купонный доход (НКД):** Часть купона, которая "накопилась" с момента последней выплаты. При покупке облигации между датами выплаты купонов покупатель платит продавцу НКД, а при следующей выплате получает полный купон.

### Как заработать на облигациях?

1.  **Получение купонов:** Регулярные выплаты процентного дохода.
2.  **Погашение по номиналу:** Получение номинальной стоимости в конце срока. Если вы купили облигацию дешевле номинала (с дисконтом), то разница — ваш дополнительный доход.
3.  **Продажа дороже цены покупки:** Если рыночная цена облигации вырастет (например, из-за снижения процентных ставок в экономике), вы можете продать ее до погашения и получить прибыль.

### Доходность облигаций:

*   **Купонная доходность:** Годовой купон / Номинал.
*   **Текущая доходность:** Годовой купон / Текущая рыночная цена.
*   **Доходность к погашению (YTM, Yield to Maturity):** Самый важный показатель. Учитывает все будущие купонные выплаты и разницу между текущей ценой и номиналом до даты погашения. Показывает реальную годовую доходность, которую вы получите, если продержите облигацию до конца срока.

### Риски:

*   **Кредитный риск (риск дефолта):** Эмитент может оказаться не в состоянии выплатить купоны или вернуть номинал. Чем ниже надежность эмитента, тем выше риск и, как правило, выше доходность.
*   **Процентный риск:** Если процентные ставки в экономике растут, цены уже выпущенных облигаций (особенно с фиксированным купоном) падают, так как новые облигации выпускаются с более высокой доходностью.
*   **Инфляционный риск:** Инфляция может "съесть" доходность облигации, если реальная доходность (доходность минус инфляция) окажется низкой или отрицательной.
*   **Риск ликвидности:** Некоторые облигации (особенно небольших компаний) может быть сложно быстро продать по справедливой рыночной цене.

**Вывод:** Облигации считаются более консервативным и предсказуемым инструментом, чем акции. Они подходят для инвесторов, ищущих регулярный доход и меньший риск (особенно государственные облигации). Однако важно оценивать кредитное качество эмитента и понимать процентные риски.
`,fV=`
## Брокер: как его выбрать и как с ним работать?

**Брокер** — это профессиональный участник рынка ценных бумаг, посредник между инвестором и биржей. Без брокера частное лицо не может напрямую покупать или продавать акции, облигации и другие биржевые инструменты.

### Зачем нужен брокер?

*   **Доступ к бирже:** Открывает вам брокерский счет и предоставляет доступ к торговым системам биржи.
*   **Исполнение сделок:** Выполняет ваши поручения (заявки) на покупку или продажу ценных бумаг.
*   **Учет активов:** Ведет учет ваших денег и ценных бумаг на брокерском счете и в депозитарии.
*   **Налоговый агент:** Рассчитывает, удерживает и перечисляет налог на доходы (НДФЛ) с вашей прибыли от сделок и дивидендов (по российским бумагам).
*   **Предоставление информации:** Дает доступ к котировкам, новостям, аналитике (объем и качество зависят от брокера).
*   **Дополнительные услуги:** Может предлагать маржинальное кредитование, структурные продукты, доверительное управление, ИИС и т.д.

### Как выбрать брокера?

1.  **Наличие лицензии:** **Самое главное!** Убедитесь, что у брокера есть лицензия Банка России на осуществление брокерской деятельности. Проверить можно на сайте ЦБ РФ в разделе "Справочник участников финансового рынка". Работа без лицензии незаконна.
2.  **Надежность:** Оцените историю компании, ее репутацию, финансовое состояние (если доступно). Крупные брокеры, связанные с банками, часто воспринимаются как более надежные.
3.  **Тарифы и комиссии:** Внимательно изучите все комиссии:
    *   За сделки (покупку/продажу) — % от суммы или фикс. сумма.
    *   Депозитарная комиссия — за хранение ценных бумаг.
    *   За ведение счета (может быть при отсутствии сделок или низкой сумме активов).
    *   За вывод денег.
    *   За использование торгового терминала (если он платный).
    *   За маржинальное кредитование (если планируете использовать).
    Выберите тариф, подходящий под ваш стиль инвестирования (частота сделок, суммы).
4.  **Доступные инструменты и биржи:** Убедитесь, что брокер дает доступ к тем биржам (Московская, СПБ Биржа) и инструментам (акции РФ, иностранные акции, облигации, фонды, фьючерсы), которые вам интересны.
5.  **Торговые платформы:** Оцените удобство и функциональность:
    *   **Мобильное приложение:** Основной инструмент для многих начинающих инвесторов. Должно быть понятным и стабильным.
    *   **Веб-терминал:** Торговля через браузер.
    *   **Десктопный терминал (QUIK, MetaTrader и др.):** Для активных трейдеров, предлагает больше возможностей для анализа и выставления заявок.
6.  **Минимальная сумма:** Узнайте, есть ли требования к минимальной сумме для открытия счета или для доступа к определенным тарифам/услугам.
7.  **Качество поддержки:** Как быстро и компетентно отвечает поддержка на вопросы? Можно почитать отзывы или задать пару вопросов перед открытием счета.
8.  **Дополнительные сервисы:** Наличие ИИС, аналитика, обучение, персональные рекомендации (если это важно для вас).

### Как работать с брокером?

1.  **Заключение договора:** Обычно происходит онлайн через сайт или приложение брокера с подтверждением через Госуслуги или встречу с представителем.
2.  **Открытие счета:** Брокер открывает вам брокерский счет и счет в депозитарии.
3.  **Пополнение счета:** Перевод денег на брокерский счет (обычно с банковского счета или карты).
4.  **Подача поручений (заявок):** Через торговую платформу вы выставляете заявки на покупку или продажу:
    *   **Рыночная заявка:** Исполняется немедленно по лучшей доступной цене на рынке.
    *   **Лимитная заявка:** Исполняется только по указанной вами цене или лучше.
5.  **Контроль счета:** Следите за состоянием портфеля, открытыми позициями, доступными средствами.
6.  **Вывод средств:** Подача поручения на вывод денег с брокерского счета на банковский.

**Помните:** Брокер — это посредник. Он исполняет ваши приказы, но не несет ответственности за ваши инвестиционные решения и возможные убытки.
`,pV=`
## Что такое доверительное управление и зачем оно начинающему инвестору?

**Доверительное управление (ДУ)** — это услуга, при которой вы передаете свои деньги или ценные бумаги профессиональному управляющему (управляющей компании, УК), а он инвестирует их от вашего имени с целью получения дохода. Вы остаетесь собственником активов, но право принимать инвестиционные решения переходит к управляющему.

### Как это работает?

1.  **Договор ДУ:** Вы заключаете договор с управляющей компанией, где прописываются:
    *   **Инвестиционная стратегия:** Цели, уровень риска, разрешенные инструменты (например, только акции РФ, смешанная стратегия, только облигации).
    *   **Срок договора.**
    *   **Вознаграждение управляющего:** Обычно это процент от среднегодовой стоимости активов под управлением (management fee) и/или процент от полученной прибыли сверх определенного уровня (success fee).
    *   **Порядок отчетности:** Как часто УК будет отчитываться перед вами о результатах.
2.  **Передача активов:** Вы переводите деньги на специальный счет, открытый на ваше имя в рамках ДУ.
3.  **Управление:** Управляющий формирует портфель в соответствии с выбранной стратегией и активно им управляет (покупает/продает активы).
4.  **Отчетность:** УК регулярно предоставляет вам отчеты о составе портфеля и результатах управления.
5.  **Получение дохода / возврат активов:** По окончании срока договора или при досрочном расторжении (если это предусмотрено) вы получаете назад свои активы (деньги и/или ценные бумаги) и полученный инвестиционный доход (за вычетом вознаграждения УК и налогов).

### Плюсы ДУ для начинающего инвестора:

*   **Профессиональное управление:** Вашими деньгами управляют опытные специалисты с доступом к аналитике и ресурсам, которых может не быть у новичка.
*   **Экономия времени:** Вам не нужно самостоятельно анализировать рынок, выбирать бумаги и совершать сделки.
*   **Доступ к сложным стратегиям:** УК могут предлагать стратегии, которые сложно реализовать самостоятельно.
*   **Диверсификация:** Готовые стратегии часто предполагают вложения в разные классы активов.

### Минусы и риски ДУ:

*   **Нет гарантии доходности:** Управляющий не гарантирует прибыль. Результаты зависят от рыночной ситуации и мастерства управляющего. Возможны убытки.
*   **Высокий порог входа:** Часто для открытия договора ДУ требуется значительная сумма (сотни тысяч или миллионы рублей), хотя появляются и более доступные варианты.
*   **Комиссии:** Вознаграждение управляющего может существенно снизить вашу итоговую доходность, особенно если она невелика.
*   **Отсутствие контроля:** Вы не можете влиять на конкретные сделки управляющего в рамках выбранной стратегии.
*   **Риск выбора УК:** Важно выбрать надежную управляющую компанию с хорошей репутацией и прозрачными условиями.
*   **Налоги:** Доход от ДУ облагается НДФЛ. Обычно УК выступает налоговым агентом.

### ДУ vs Самостоятельное инвестирование vs ПИФы:

*   **ДУ vs Сам:** ДУ подходит тем, кто не хочет или не может тратить время на инвестиции, готов платить за управление и доверяет профессионалам. Самостоятельное инвестирование требует знаний, времени, но дает полный контроль и экономию на комиссиях за управление.
*   **ДУ vs ПИФы:** ПИФы (Паевые Инвестиционные Фонды) — это коллективные инвестиции, где много инвесторов вкладывают деньги в общий портфель под управлением УК. ПИФы обычно имеют более низкий порог входа, чем ДУ, и стандартизированные стратегии. ДУ часто предлагает более индивидуальный подход (хотя есть и стандартные стратегии ДУ).

**Вывод:** Доверительное управление может быть вариантом для начинающих инвесторов с **крупным капиталом**, которые хотят передать управление профессионалам и готовы платить за это комиссии, осознавая при этом все риски и отсутствие гарантий. Для инвесторов с небольшими суммами или желающих больше контроля, более подходящими могут быть самостоятельные инвестиции или ПИФы/БПИФы.
`,mV=`
## Зачем нужен инвестиционный советник и как его выбрать?

**Инвестиционный советник** — это профессионал или компания, которые дают **индивидуальные инвестиционные рекомендации (ИИР)** клиентам на основе их финансовых целей, опыта, отношения к риску и других параметров.

### Отличие от брокера и управляющего:

*   **Брокер:** Исполняет ваши сделки, предоставляет доступ к бирже. Не дает индивидуальных рекомендаций (может предоставлять общую аналитику).
*   **Управляющий (ДУ):** Самостоятельно управляет вашими активами в рамках согласованной стратегии. Вы не принимаете решения по конкретным сделкам.
*   **Инвестсоветник:** **Рекомендует**, что купить или продать, но **решение принимаете вы сами**. Он помогает сформировать стратегию и подобрать инструменты, но не управляет вашими деньгами напрямую.

### Зачем нужен инвестсоветник?

*   **Персональный план:** Помогает определить финансовые цели (накопить на пенсию, купить квартиру, образование детей) и разработать долгосрочную инвестиционную стратегию для их достижения.
*   **Оценка риск-профиля:** Определяет вашу готовность к риску и подбирает соответствующие инструменты.
*   **Подбор активов:** Дает конкретные рекомендации по покупке/продаже акций, облигаций, фондов и других инструментов, подходящих под вашу стратегию и риск-профиль.
*   **Формирование и ребалансировка портфеля:** Помогает собрать диверсифицированный портфель и корректировать его со временем.
*   **Обучение и информация:** Объясняет принципы инвестирования, риски, особенности инструментов.
*   **Психологическая поддержка:** Помогает избежать эмоциональных решений во время рыночных колебаний.

### Кому может быть полезен инвестсоветник?

*   **Начинающим инвесторам:** Которые не знают, с чего начать, боятся ошибок и хотят получить персональный план.
*   **Занятым людям:** У которых нет времени самостоятельно изучать рынок и управлять портфелем.
*   **Инвесторам с крупным капиталом:** Которые ищут индивидуальные решения и комплексное управление финансами.
*   **Тем, кто хочет получить "второе мнение"** по своей стратегии.

### Как выбрать инвестсоветника?

1.  **Реестр Банка России:** **Обязательно!** Проверьте, состоит ли советник (человек или компания) в **Едином реестре инвестиционных советников** на сайте ЦБ РФ. Только члены реестра имеют право давать ИИР.
2.  **Опыт и квалификация:** Изучите опыт работы советника, наличие квалификационных аттестатов (ФСФР/ЦБ), образование.
3.  **Специализация:** Некоторые советники специализируются на определенных рынках или инструментах. Убедитесь, что их экспертиза соответствует вашим потребностям.
4.  **Модель оплаты:** Как советник получает вознаграждение?
    *   **Фиксированная плата:** За консультацию, разработку плана или годовое сопровождение.
    *   **Процент от активов:** Годовой процент от суммы активов, по которым даются рекомендации.
    *   **Процент от дохода:** Вознаграждение зависит от прибыли клиента (менее распространено и может создавать конфликт интересов).
    *   **Комиссии от продуктов:** Советник может получать комиссии от продажи определенных инвестпродуктов (самый высокий риск конфликта интересов!). **Избегайте таких советников.**
    Предпочтительны модели с фиксированной платой или % от активов, так как они минимизируют конфликт интересов.
5.  **Прозрачность и договор:** Внимательно изучите договор. В нем должны быть четко прописаны услуги, ответственность сторон, порядок предоставления рекомендаций, стоимость услуг, порядок расторжения.
6.  **Отзывы и репутация:** Поищите отзывы других клиентов, но относитесь к ним критически.
7.  **Личное общение:** Проведите встречу (или онлайн-звонок), чтобы понять, комфортно ли вам общаться с этим человеком/представителем компании, совпадают ли ваши взгляды на инвестиции.

**Важно:** Инвестиционный советник дает рекомендации, но **ответственность за принятие решения и его последствия лежит на вас**. Советник не гарантирует доходность и не несет ответственности за рыночные убытки, если его рекомендации соответствовали вашему профилю и договору.
`,gV=`
## Паевые фонды (ПИФы): как они работают и как на них заработать?

**Паевой инвестиционный фонд (ПИФ)** — это форма коллективных инвестиций. Множество инвесторов (пайщиков) объединяют свои деньги в один большой портфель, которым управляет профессиональная **управляющая компания (УК)** в соответствии с заранее определенной стратегией.

### Как это работает?

1.  **Формирование фонда:** УК создает фонд с определенной инвестиционной стратегией (например, ПИФ акций российских компаний, ПИФ облигаций, смешанный ПИФ).
2.  **Покупка паев:** Инвесторы покупают **паи** — доли в этом фонде. Цена пая зависит от общей стоимости активов фонда (Стоимость Чистых Активов, СЧА), деленной на количество паев в обращении.
3.  **Управление активами:** УК на деньги пайщиков покупает ценные бумаги и другие активы согласно стратегии фонда. Цель УК — увеличить стоимость активов фонда.
4.  **Рост/падение стоимости пая:** Если активы в фонде дорожают, растет СЧА и, соответственно, цена пая. Если активы дешевеют — пай тоже дешевеет.
5.  **Продажа (погашение) паев:** Инвестор может продать свои паи обратно управляющей компании (если это открытый ПИФ) или другому инвестору на бирже (если это биржевой ПИФ).

### Виды ПИФов по доступности паев:

*   **Открытые (ОПИФ):** Паи можно купить и продать (погасить) в любой рабочий день напрямую у управляющей компании или ее агентов. Самый распространенный тип.
*   **Интервальные (ИПИФ):** Купить и продать паи можно только в определенные периоды (интервалы), установленные правилами фонда (например, раз в квартал или полгода).
*   **Закрытые (ЗПИФ):** Паи покупаются при формировании фонда, а погасить их можно только при его закрытии (часто через несколько лет). Иногда паи ЗПИФов могут торговаться на бирже или внебиржевом рынке. Обычно инвестируют в менее ликвидные активы (недвижимость, венчурные проекты).

### Виды ПИФов по составу активов:

*   **Фонды акций:** Инвестируют в акции компаний.
*   **Фонды облигаций:** Инвестируют в государственные или корпоративные облигации.
*   **Смешанные фонды:** Инвестируют и в акции, и в облигации в разных пропорциях.
*   **Фонды денежного рынка:** Вкладывают в краткосрочные долговые инструменты и депозиты.
*   **Индексные фонды:** Стараются повторить структуру и доходность определенного биржевого индекса (например, индекса МосБиржи).
*   **Фонды недвижимости (ЗПИФы):** Инвестируют в объекты недвижимости.
*   **И другие** (товарные, венчурные и т.д.)

### Как заработать на ПИФах?

Основной способ — **рост стоимости пая**. Вы покупаете пай дешевле, а продаете дороже. Дивиденды и купоны, полученные фондом от активов внутри, обычно **реинвестируются**, то есть направляются на покупку новых активов, что увеличивает стоимость пая. Некоторые фонды могут предусматривать выплату промежуточного дохода пайщикам, но это встречается реже.

### Плюсы ПИФов:

*   **Профессиональное управление:** Не нужно самому выбирать бумаги.
*   **Диверсификация:** Даже небольшая сумма инвестируется сразу в корзину активов, что снижает риск.
*   **Доступность:** Начать инвестировать можно с небольших сумм (часто от 1000 рублей).
*   **Регулирование:** Деятельность УК и ПИФов контролируется Банком России.

### Минусы и риски ПИФов:

*   **Нет гарантии доходности:** Стоимость пая может не только расти, но и падать. Возможны убытки.
*   **Комиссии:** УК берет плату за управление (процент от СЧА), также могут быть надбавки при покупке и скидки при продаже паев. Комиссии снижают итоговую доходность.
*   **Зависимость от УК:** Результат зависит от профессионализма управляющей компании.
*   **Ограничения интервальных и закрытых ПИФов:** Сложно быстро продать паи.

**Вывод:** ПИФы — хороший инструмент для начинающих инвесторов, позволяющий диверсифицировать вложения и доверить управление профессионалам при относительно низком пороге входа. Важно выбрать фонд с подходящей стратегией, низкими комиссиями и надежной УК.
`,vV=`
## Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?

**Биржевой паевой инвестиционный фонд (БПИФ)** и **Exchange Traded Fund (ETF)** — это инвестиционные фонды, паи (или акции) которых торгуются на бирже так же свободно, как и обычные акции.

### Сходства и различия:

*   **Общее:** И БПИФы, и ETF представляют собой готовый портфель активов (акций, облигаций, золота и т.д.), собранный по определенному принципу (часто по индексу). Покупая один пай/акцию фонда, вы инвестируете сразу во все активы внутри него.
*   **БПИФ:** Создается по **российскому** законодательству. Управляется российской управляющей компанией (УК). Активы могут быть как российскими, так и иностранными (но с учетом текущих ограничений). Торгуются на Московской бирже за рубли.
*   **ETF:** Создается по **иностранному** законодательству (например, Ирландия, Люксембург). Управляется иностранным провайдером (FinEx, BlackRock, Vanguard и др.). Активы обычно иностранные. Ранее торговались на МосБирже и СПБ Бирже, но из-за санкций и ограничений ЦБ РФ **торги большинством иностранных ETF для неквалифицированных инвесторов в России сейчас недоступны или приостановлены**.

**По сути, для российского инвестора сегодня БПИФ — это основной доступный аналог ETF.**

### Как работают БПИФы?

1.  **Следование индексу (чаще всего):** Большинство БПИФов являются **индексными**. Они стремятся максимально точно повторить состав и структуру выбранного биржевого индекса (например, Индекс МосБиржи IMOEX, Индекс гособлигаций RGBI, индекс акций IT-сектора и т.д.).
2.  **Формирование портфеля:** УК покупает активы в тех же пропорциях, что и в индексе.
3.  **Торги на бирже:** Паи фонда выпускаются и торгуются на бирже в течение всего торгового дня. Цена пая колеблется в зависимости от спроса/предложения и стоимости базовых активов.
4.  **Маркет-мейкеры:** Специальные участники торгов (авторизованные УК) следят за тем, чтобы цена пая на бирже не сильно отклонялась от реальной стоимости активов внутри фонда (СЧА на пай). Они выставляют заявки на покупку/продажу паев около справедливой цены.
5.  **Реинвестирование доходов:** Дивиденды и купоны, полученные фондом, обычно реинвестируются, увеличивая стоимость пая.

### Плюсы БПИФов (и ETF):

*   **Мгновенная диверсификация:** Покупка одного пая дает долю во множестве активов.
*   **Низкий порог входа:** Цена одного пая обычно невелика, можно начать с малых сумм.
*   **Прозрачность:** Состав индексных фондов обычно известен и соответствует индексу. СЧА публикуется регулярно.
*   **Ликвидность:** Паи можно купить/продать на бирже в любой момент в течение торговой сессии (в отличие от ОПИФов, где расчеты занимают несколько дней).
*   **Низкие издержки (часто):** Комиссии за управление у индексных БПИФов обычно ниже, чем у активно управляемых ОПИФов.

### Минусы и риски БПИФов (и ETF):

*   **Рыночный риск:** Стоимость пая зависит от динамики базовых активов. Если рынок падает, пай тоже дешевеет.
*   **Ошибка слежения (Tracking Error):** Цена пая может незначительно отклоняться от динамики индекса из-за комиссий, налогов, особенностей репликации индекса.
*   **Комиссии фонда:** УК берет комиссию за управление, также есть другие расходы фонда (депозитарные, аудиторские), которые включены в стоимость пая.
*   **Биржевые комиссии:** При покупке/продаже пая на бирже вы платите стандартную брокерскую комиссию.
*   **Риск контрагента (для ETF):** Хотя и маловероятный, но существует риск банкротства иностранного провайдера или кастодиана.
*   **Санкционные риски (особенно для ETF и БПИФов на иностранные активы):** Возможность блокировки активов, приостановки торгов, проблемы с получением выплат.

### Стоит ли вкладывать?

БПИФы (особенно индексные) — **отличный инструмент для начинающих и долгосрочных инвесторов** благодаря простоте, диверсификации и низкому порогу входа. Они позволяют легко инвестировать в широкий рынок акций или облигаций.

**При выборе БПИФа обращайте внимание на:**

*   **Базовый актив/индекс:** Во что инвестирует фонд? Соответствует ли это вашей стратегии?
*   **Комиссии:** Суммарная комиссия фонда (TER/СГР). Чем ниже, тем лучше.
*   **Ошибка слежения:** Насколько точно фонд следует за индексом (если применимо).
*   **Ликвидность:** Объемы торгов паями на бирже.
*   **Управляющая компания:** Ее надежность и опыт.

С иностранными ETF в текущих условиях нужно быть **очень осторожным** из-за высоких рисков блокировок и ограничений для российских инвесторов.
`,yV=`
## Закрытые паевые фонды (ЗПИФы): в чем их особенности и подходят ли они начинающим инвесторам?

**Закрытый паевой инвестиционный фонд (ЗПИФ)** — это вид ПИФа, паи которого можно купить только во время его формирования (первичного размещения), а погасить (продать обратно управляющей компании) — только при завершении работы фонда, дата которого определена заранее (например, через 5, 10 или 15 лет).

### Ключевые особенности ЗПИФов:

1.  **Ограниченный вход и выход:** В отличие от открытых ПИФов (ОПИФов), где паи можно купить/продать в любой рабочий день, в ЗПИФе инвестор "замораживает" свои деньги на весь срок существования фонда.
2.  **Инвестиции в неликвидные активы:** Закрытая структура позволяет управляющей компании инвестировать в активы, которые сложно быстро купить или продать по справедливой цене. Чаще всего это:
    *   **Недвижимость:** Строящиеся или готовые объекты (жилая, коммерческая, складская).
    *   **Прямые инвестиции (Private Equity):** Доли в непубличных компаниях.
    *   **Венчурные инвестиции:** Вложения в стартапы на ранних стадиях.
    *   **Предметы искусства, антиквариат.**
    *   Иногда — биржевые инструменты, но с долгосрочной стратегией.
3.  **Высокий порог входа:** Как правило, минимальная сумма для покупки пая ЗПИФа значительно выше, чем у ОПИФов или БПИФов (может составлять сотни тысяч или миллионы рублей).
4.  **Доступность для "квалов":** Большинство ЗПИФов предназначены **только для квалифицированных инвесторов**. Неквалифицированным инвесторам доступны лишь некоторые ЗПИФы (обычно на недвижимость), паи которых торгуются на бирже.
5.  **Вторичный рынок:** Иногда паи ЗПИФов могут обращаться на бирже или внебиржевом рынке. Это дает возможность выйти из фонда до его закрытия, продав пай другому инвестору. Однако ликвидность таких торгов часто низкая, и цена пая на вторичном рынке может сильно отличаться от его расчетной стоимости (СЧА).
6.  **Выплата дохода:** Некоторые ЗПИФы (особенно рентные фонды недвижимости) могут предусматривать периодическую выплату дохода пайщикам (например, от сдачи недвижимости в аренду). В других случаях весь доход реинвестируется и выплачивается только при закрытии фонда.

### Плюсы ЗПИФов:

*   **Доступ к уникальным активам:** Позволяют инвестировать в недвижимость, частные компании и другие активы, недоступные напрямую широкому кругу инвесторов.
*   **Потенциально высокая доходность:** Инвестиции в непубличные активы могут принести более высокую прибыль, чем традиционные биржевые инструменты (но и риски выше).
*   **Защита от эмоциональных решений:** Невозможность быстро продать пай удерживает инвестора от панических продаж во время рыночных спадов.

### Минусы и риски ЗПИФов:

*   **Низкая ликвидность:** Основной минус. Сложно или невозможно быстро вернуть вложенные деньги до закрытия фонда.
*   **Высокий порог входа.**
*   **Ограниченный доступ для "неквалов".**
*   **Высокие риски базовых активов:** Инвестиции в недвижимость, стартапы, непубличные компании inherently более рискованны.
*   **Сложность оценки:** Трудно оценить справедливую стоимость пая, особенно если он не торгуется на бирже.
*   **Комиссии УК:** Могут быть выше, чем у ОПИФов/БПИФов.
*   **Риск управляющей компании:** Результат сильно зависит от профессионализма УК.

### Подходят ли ЗПИФы начинающим инвесторам?

**Как правило, нет.** Из-за высокого порога входа, низкой ликвидности, сложности активов и частого требования статуса квалифицированного инвестора, ЗПИФы — это инструмент для **опытных и состоятельных инвесторов**, которые готовы "заморозить" значительную часть капитала на долгий срок и принять высокие риски ради потенциально высокой доходности от альтернативных инвестиций.

Начинающим инвесторам лучше сосредоточиться на более простых, ликвидных и доступных инструментах, таких как ОФЗ, корпоративные облигации, ОПИФы и БПИФы на акции и облигации.
`,xV=`
## Как устроена фондовая биржа?

**Фондовая биржа** — это организованный рынок, где встречаются продавцы и покупатели ценных бумаг (акций, облигаций, паев фондов и др.) и заключают сделки по установленным правилам.

### Основные функции биржи:

1.  **Организация торгов:** Предоставляет инфраструктуру (торговую систему) и устанавливает правила для проведения сделок.
2.  **Сведение заявок:** Автоматически находит встречные заявки на покупку и продажу по совпадающим ценам и заключает сделки.
3.  **Определение рыночной цены:** В результате множества сделок формируется справедливая рыночная цена на активы.
4.  **Гарантия исполнения сделок:** Через центрального контрагента (см. ниже) биржа гарантирует, что покупатель получит бумаги, а продавец — деньги.
5.  **Листинг:** Допускает ценные бумаги компаний к торгам после проверки их соответствия определенным требованиям (финансовое состояние, прозрачность и т.д.).
6.  **Раскрытие информации:** Обеспечивает доступ участников торгов к информации о котировках, объемах торгов и новостях эмитентов.
7.  **Клиринг и расчеты:** Учитывает взаимные обязательства участников по итогам сделок и организует их исполнение.

### Участники биржевых торгов:

*   **Эмитенты:** Компании или государство, выпускающие ценные бумаги для привлечения капитала.
*   **Инвесторы:** Частные лица и организации (фонды, банки, страховые компании), которые покупают и продают ценные бумаги с целью получения дохода. **Частные инвесторы торгуют не напрямую, а через посредников.**
*   **Брокеры:** Профессиональные посредники, которые исполняют заявки инвесторов на бирже. Имеют лицензию ЦБ.
*   **Депозитарии:** Организации, которые хранят ценные бумаги (в электронном виде) и учитывают права собственности на них.
*   **Регистраторы:** Ведут реестр владельцев ценных бумаг конкретного эмитента.
*   **Управляющие компании:** Управляют активами паевых фондов (ПИФов) или активами клиентов в рамках доверительного управления.
*   **Маркет-мейкеры:** Участники торгов, которые обязуются поддерживать ликвидность по определенным бумагам, постоянно выставляя заявки на покупку и продажу.
*   **Биржа:** Организатор торгов.
*   **Центральный контрагент (ЦК):** Специальная организация (в России — НКЦ, Национальный Клиринговый Центр), которая выступает посредником во всех сделках. Покупатель покупает у ЦК, а продавец продает ЦК. Это снижает риск неисполнения сделки, если одна из сторон окажется недобросовестной.
*   **Клиринговая организация:** Проводит взаимозачет требований и обязательств участников по итогам торгового дня.
*   **Регулятор:** Центральный банк (в России — Банк России), который контролирует и регулирует деятельность всех участников рынка.

### Как происходит сделка?

1.  Инвестор через торговую платформу брокера выставляет **заявку** (приказ) на покупку или продажу определенного количества бумаг по определенной цене (лимитная заявка) или по текущей рыночной цене (рыночная заявка).
2.  Заявка попадает в **"стакан"** — биржевой список всех активных заявок на покупку (бид, bid) и продажу (аск, ask) по данному активу, отсортированных по цене.
3.  **Торговая система биржи** ищет встречные заявки:
    *   Если вы выставили заявку на покупку, система ищет самую дешевую заявку на продажу.
    *   Если вы выставили заявку на продажу, система ищет самую дорогую заявку на покупку.
4.  Если находится встречная заявка с подходящей ценой, **сделка заключается** автоматически.
5.  Информация о сделке передается в **клиринговый центр** и **центральному контрагенту**.
6.  Происходит **клиринг** (взаимозачет) и **расчеты** (обычно на второй рабочий день после сделки, режим Т+2): деньги списываются со счета покупателя и зачисляются продавцу, а ценные бумаги переводятся из депозитария продавца в депозитарий покупателя.

Биржа — это сложный механизм, обеспечивающий прозрачность, надежность и ликвидность для торговли ценными бумагами.
`,wV=`
## Какие налоги платит инвестор?

Инвестируя на бирже, вы можете получать два основных вида дохода, которые облагаются налогом на доходы физических лиц (НДФЛ) в России:

1.  **Доход от продажи ценных бумаг:** Разница между ценой продажи и ценой покупки (а также сопутствующими расходами, например, комиссиями брокера).
2.  **Дивиденды и купоны:** Выплаты от компаний (дивиденды по акциям) или эмитентов облигаций (купоны).

### Ставка НДФЛ

*   **Основная ставка:** **13%** для налоговых резидентов РФ, если совокупный доход за год не превышает 5 млн рублей.
*   **Повышенная ставка:** **15%** с суммы дохода, превышающей 5 млн рублей за год.
*   **Нерезиденты РФ:** Платят **30%** с доходов от продажи бумаг и **15%** с дивидендов (если иное не предусмотрено соглашением об избежании двойного налогообложения).

### Кто платит налог?

*   **Брокер как налоговый агент:** По операциям с **российскими ценными бумагами** на счетах, открытых у **российского брокера**, брокер сам рассчитывает, удерживает и перечисляет НДФЛ в бюджет. Он делает это:
    *   При выводе денег с брокерского счета.
    *   По окончании налогового периода (календарного года).
    *   При расторжении договора с брокером.
    Брокер также удерживает налог с **дивидендов по российским акциям** в момент их зачисления на счет.
    С **купонов по большинству российских облигаций** (ОФЗ, муниципальные, корпоративные, выпущенные с 2017 года) налог удерживать не нужно (они освобождены). Исключение — купоны по облигациям, выпущенным до 2017 года, или если ставка купона превышает определенный порог (ставка ЦБ + 5%).
*   **Инвестор самостоятельно:** Вам нужно будет самостоятельно подать декларацию 3-НДФЛ и уплатить налог в следующих случаях:
    *   **Доход от продажи иностранных ценных бумаг** (даже если они куплены через российского брокера).
    *   **Дивиденды по иностранным акциям.** Брокер удержит налог по ставке страны эмитента (например, 10% в США при подписанной форме W-8BEN), а вам нужно будет доплатить разницу до 13% (или 15%) в России, подав декларацию. Если налог у источника был 15% или выше, доплачивать не нужно, но отчитаться о доходе все равно надо.
    *   **Доход получен через иностранного брокера.**
    *   В некоторых других специфических случаях.

### Налоговые вычеты и льготы для инвесторов:

*   **Индивидуальный инвестиционный счет (ИИС):** Позволяет получать налоговые вычеты:
    *   **Тип А:** Вычет на взносы (до 52 000 руб. в год). Подходит тем, у кого есть официальный доход, облагаемый НДФЛ 13%.
    *   **Тип Б:** Освобождение от налога на прибыль от сделок по истечении срока ИИС (минимум 3 года).
    *   **ИИС-3 (новый тип с 2024 г.):** Совмещает вычеты на взносы и освобождение от налога на прибыль при длительном сроке (от 5 до 10 лет, в зависимости от года открытия).
*   **Льгота на долгосрочное владение (ЛДВ):** Если вы владели ценными бумагами (допущенными к торгам на российских биржах) **более 3 лет**, то при их продаже вы освобождаетесь от НДФЛ с прибыли. Максимальная сумма необлагаемого дохода — 3 млн рублей за каждый год владения.
*   **Перенос убытков:** Убытки, полученные от операций с ценными бумагами в прошлые годы, можно перенести на будущие периоды (до 10 лет) и уменьшить на их сумму налогооблагаемую прибыль.

**Важно:** Налоговое законодательство может меняться. Всегда уточняйте актуальную информацию и при необходимости консультируйтесь с налоговыми специалистами или вашим брокером.
`,bV=`
## Во что инвестировать новичку на бирже? Что дает статус «квала» и в каких случаях придется проходить тестирование?

Начиная инвестировать, важно выбирать инструменты, соответствующие вашему уровню знаний, опыту и готовности к риску.

### Инструменты для начинающих (обычно доступны без ограничений):

1.  **Облигации Федерального Займа (ОФЗ):** Долговые бумаги Министерства финансов РФ. Считаются самым надежным инструментом на российском рынке. Риск минимален, доходность обычно немного выше банковских вкладов. Подходят для консервативных инвесторов.
2.  **Надежные корпоративные облигации:** Облигации крупных, стабильных российских компаний с высоким кредитным рейтингом. Риск чуть выше ОФЗ, доходность тоже.
3.  **Паи Биржевых Паевых Инвестиционных Фондов (БПИФ) и ETF (на российские активы):** Покупая пай фонда, вы сразу инвестируете в готовую корзину активов (например, акции крупнейших российских компаний — индекс МосБиржи, или облигации). Это обеспечивает **диверсификацию** (снижение риска за счет распределения вложений) и не требует самостоятельного выбора отдельных бумаг. Обращайте внимание на комиссию фонда.
4.  **Акции "голубых фишек":** Акции самых крупных, известных и ликвидных российских компаний (например, Сбербанк, Газпром, Лукойл). Они менее волатильны, чем акции небольших компаний, но все равно несут рыночный риск.

### Инструменты, требующие тестирования или статуса "квала":

С 1 октября 2021 года Банк России ввел **обязательное тестирование** для неквалифицированных инвесторов перед допуском к некоторым сложным или рискованным инструментам. Цель — убедиться, что инвестор понимает особенности и риски продукта.

**Тестирование обычно требуется для:**

*   **Маржинальная торговля:** Сделки с кредитным плечом (необеспеченные сделки).
*   **Производные финансовые инструменты (ПФИ):** Фьючерсы, опционы.
*   **Структурные облигации.**
*   **Облигации со структурным доходом.**
*   **Акции иностранных компаний, не входящих в ведущие мировые индексы.**
*   **Иностранные ETF.**
*   **Паи Закрытых ПИФов (ЗПИФ).**
*   **Облигации российских компаний с низким кредитным рейтингом (или без него).**
*   **Договоры РЕПО.**

Тестирование проводится **бесплатно** у вашего брокера (обычно онлайн). Количество попыток не ограничено. Вопросы проверяют понимание основных характеристик и рисков инструмента.

### Статус квалифицированного инвестора ("квал")

**Квалифицированный инвестор** — это инвестор, обладающий достаточными знаниями, опытом или финансовыми ресурсами, которому доступны **все** инструменты на рынке без необходимости проходить тестирование.

**Как получить статус "квала" (нужно соответствовать ОДНОМУ из условий):**

1.  **Активы:** Владеть ценными бумагами и/или деньгами на счетах у брокеров/банков на сумму **не менее 6 млн рублей**.
2.  **Опыт работы:** Иметь опыт работы в организации, совершавшей сделки с ценными бумагами (не менее 2 лет, если она сама "квал", или 3 года в ином случае).
3.  **Образование:** Иметь высшее экономическое образование в ВУЗе, который мог аттестовывать в сфере проф. деятельности на рынке ценных бумаг, ИЛИ квалификационный аттестат специалиста финансового рынка (ФСФР/ЦБ), CFA, CIIA, FRM.
4.  **Оборот сделок:** Совершить за последние 4 квартала сделки с ценными бумагами на сумму **не менее 6 млн рублей**, при этом не менее 10 сделок в квартал и не реже 1 сделки в месяц.

Статус присваивается брокером по вашему заявлению и предоставленным подтверждающим документам.

**Нужен ли статус "квала" новичку?**

**Нет.** Большинству начинающих инвесторов доступны все необходимые инструменты (ОФЗ, надежные облигации, БПИФы на индекс МосБиржи, акции "голубых фишек") **без** статуса "квала" и без тестирования (кроме акций). Статус "квала" нужен для доступа к более сложным, рискованным или иностранным инструментам.

**Рекомендация новичку:** Начните с простых и понятных инструментов (ОФЗ, БПИФы на индекс). Постепенно изучайте рынок. Если захотите использовать более сложные инструменты, пройдите тестирование у брокера. Не гонитесь за статусом "квала", если не понимаете, зачем он вам нужен.
`,SV=`
## Что такое ИИС-3?

**ИИС-3 (Индивидуальный инвестиционный счет третьего типа)** — это новый тип ИИС, введенный в России с 1 января 2024 года. Он пришел на смену старым типам ИИС (Тип А и Тип Б), открытие которых стало невозможным с 2024 года (но ранее открытые продолжают действовать на прежних условиях).

### Ключевые особенности ИИС-3:

1.  **Объединение вычетов:** ИИС-3 сочетает в себе преимущества старых типов:
    *   **Налоговый вычет на взносы:** Как у ИИС типа А. Можно вернуть 13% (или 15%) от суммы, внесенной на ИИС за год, но не более чем с 400 000 рублей (т.е. максимальный возврат — 52 000 или 60 000 рублей в год). Вычет можно получать ежегодно. Условие: наличие официального дохода, облагаемого НДФЛ по ставке 13%/15%.
    *   **Освобождение от НДФЛ на доход:** Как у ИИС типа Б. Весь финансовый результат (прибыль от продажи ценных бумаг, купоны) освобождается от налога при закрытии счета по истечении минимального срока.
2.  **Минимальный срок владения:** Это главное отличие. Чтобы получить налоговые льготы, ИИС-3 нужно держать **минимум 10 лет**. Однако предусмотрен **переходный период:**
    *   Для счетов, открытых в 2024-2026 гг. — минимальный срок **5 лет**.
    *   Далее срок будет постепенно увеличиваться на 1 год ежегодно, пока не достигнет 10 лет в 2031 году.
3.  **Количество счетов:** Можно иметь **до трех** счетов ИИС-3 одновременно у разных брокеров/УК. Старые ИИС (А или Б) также учитываются, т.е. если у вас уже есть старый ИИС, вы можете открыть еще два ИИС-3. **Важно:** Налоговый вычет на взносы (52/60 тыс. руб.) предоставляется **суммарно по всем ИИС**, а не на каждый счет отдельно.
4.  **Сумма взносов:** Вносить на ИИС-3 можно **любую сумму** (в отличие от старых ИИС, где был лимит 1 млн руб. в год). Однако вычет на взносы по-прежнему ограничен суммой 400 000 руб. в год.
5.  **Вывод средств:** Вывести деньги с ИИС-3 без потери льгот и закрытия счета можно только в **особых жизненных ситуациях** (например, для оплаты дорогостоящего лечения), перечень которых должно определить Правительство РФ. В остальных случаях досрочный вывод средств ведет к потере права на все налоговые льготы (придется вернуть полученные вычеты и уплатить налог с дохода).
6.  **Трансформация старых ИИС:** Владельцы старых ИИС (А или Б), открытых до 31 декабря 2023 года, могут:
    *   Продолжать пользоваться ими на прежних условиях до истечения 3-летнего срока (или дольше).
    *   Трансформировать свой старый ИИС в ИИС-3. При этом срок владения старым ИИС (но не более 3 лет) зачтется в минимальный срок владения ИИС-3.

### Плюсы ИИС-3:

*   Сочетание двух типов налоговых льгот.
*   Возможность иметь до трех счетов.
*   Отсутствие лимита на годовые взносы (хотя вычет ограничен).

### Минусы ИИС-3:

*   **Длительный минимальный срок владения (5-10 лет):** Основной недостаток. Деньги "замораживаются" на долгий срок для получения льгот.
*   Ограничения на вывод средств без потери льгот.

**Вывод:** ИИС-3 — это инструмент для **долгосрочных** инвесторов, которые готовы вкладывать деньги на 5-10 лет и более, и хотят получить максимальные налоговые льготы. Если вам может потребоваться доступ к деньгам раньше, возможно, стоит рассмотреть обычный брокерский счет (с ЛДВ) или пока не трансформировать старый ИИС (если он есть).
`,kV=`
## Как продать заблокированные активы?

С 2022 года многие российские инвесторы столкнулись с блокировкой части своих **иностранных ценных бумаг** (акций, ETF, депозитарных расписок), купленных через российских брокеров. Это произошло из-за санкций, нарушивших связь между российскими и иностранными депозитариями (НРД, Euroclear, Clearstream).

**Что значит "заблокированные"?** Эти бумаги по-прежнему принадлежат вам, но вы не можете ими торговать (продать на бирже) или получать по ним выплаты (дивиденды, купоны), так как инфраструктура для этого нарушена.

### Способы продажи (или обмена) заблокированных активов:

1.  **Указ Президента № 844 (Обмен активами):**
    *   **Суть:** Позволяет российским инвесторам продать заблокированные иностранные бумаги нерезидентам, которые хотят купить российские активы на свои средства со счетов типа "С".
    *   **Организатор:** Брокер "Инвестиционная палата".
    *   **Лимит:** Каждый инвестор мог подать заявку на продажу активов на сумму **не более 100 000 рублей**.
    *   **Статус:** Сбор заявок от инвесторов завершился 8 мая 2024 года. Сейчас идет этап сбора заявок от нерезидентов (до 5 июля 2024) и определения единой цены выкупа для каждого актива. Расчеты ожидаются до 1 сентября 2024 года. **Новые заявки от россиян уже не принимаются.**
    *   **Что делать:** Если вы подавали заявку, следите за информацией от вашего брокера и организатора торгов.

2.  **Конвертация депозитарных расписок (ГДР/АДР) российских компаний:**
    *   **Суть:** Российские компании, чьи расписки торговались за рубежом, обязаны были провести их конвертацию в обыкновенные акции, торгующиеся на МосБирже.
    *   **Статус:** Основная волна конвертаций прошла в 2022-2023 годах. Большинство брокеров автоматически или по заявлению клиента провели эту процедуру.
    *   **Что делать:** Проверьте свой брокерский отчет. Если у вас были ГДР/АДР российских компаний (Сбер, Газпром, Лукойл и др.), они должны были замениться на соответствующие акции. Если этого не произошло, срочно свяжитесь с брокером.

3.  **Перевод активов к другому брокеру (не под санкциями):**
    *   **Суть:** Если ваш брокер попал под блокирующие санкции (Сбер, ВТБ, Альфа и др.), он обычно предлагал (или предлагает) перевести иностранные активы к другому российскому брокеру, не находящемуся под такими санкциями.
    *   **Статус:** Актуально, если вы еще не перевели активы.
    *   **Что делать:** Свяжитесь с вашим санкционным брокером и уточните процедуру и возможных брокеров-партнеров для перевода. **Важно:** Сам по себе перевод не гарантирует разблокировки, если бумаги учитывались через НРД/Euroclear, но может упростить участие в будущих схемах обмена или получение выплат, если они возобновятся.

4.  **Индивидуальные лицензии (для крупных инвесторов):**
    *   **Суть:** Получение разрешения от европейских регуляторов (например, Минфина Бельгии, где находится Euroclear) на разблокировку и перевод активов.
    *   **Статус:** Сложный, дорогой и долгий процесс, актуальный в основном для инвесторов с очень крупными портфелями заблокированных активов (миллионы долларов/евро). Требует привлечения юристов.

5.  **Ожидание системного решения:**
    *   **Суть:** Надежда на то, что в будущем будет найдено общее решение на уровне регуляторов или через новые механизмы обмена для разблокировки активов всех инвесторов.
    *   **Статус:** Перспективы туманны и зависят от геополитической ситуации.

**Что НЕЛЬЗЯ сделать сейчас (в большинстве случаев):**

*   Продать заблокированные иностранные акции на МосБирже или СПБ Бирже.
*   Перевести их к иностранному брокеру напрямую.
*   Получить по ним дивиденды или купоны (они "зависают" в иностранной инфраструктуре).

**Рекомендация:** Следите за новостями от вашего брокера и Банка России. Если вы участвовали в обмене по Указу № 844, ждите результатов. Если ваши активы у санкционного брокера, рассмотрите возможность перевода к несанкционному.
`,CV=`
## Брокер или доверительный управляющий оказались под санкциями: что делать?

Если ваш российский брокер или управляющая компания (УК), через которую вы инвестировали (например, в ПИФы или ДУ), попали под блокирующие санкции США, ЕС или Великобритании, это может повлиять на ваши инвестиции, особенно в иностранные активы.

### Возможные последствия санкций:

*   **Блокировка иностранных активов:** Наиболее частое последствие. Из-за разрыва связей с иностранными депозитариями (Euroclear/Clearstream) вы теряете возможность торговать иностранными акциями, ETF, еврооблигациями и получать по ним выплаты. Сами активы остаются вашими, но "заморожены".
*   **Ограничения на операции с валютой:** Могут возникнуть сложности с покупкой/продажей/выводом долларов США, евро и других "недружественных" валют.
*   **Проблемы с доступом к торговым платформам:** В редких случаях возможны временные сбои в работе приложений или терминалов.
*   **Принудительный перевод активов:** Брокер/УК может инициировать перевод ваших активов (особенно иностранных) к другому участнику рынка, не находящемуся под санкциями.

### Что делать инвестору?

1.  **Не паниковать:** Санкции против брокера не означают потерю ваших активов. Ваши ценные бумаги хранятся в депозитарии, а деньги на специальных счетах, отдельно от средств брокера.
2.  **Следить за информацией от брокера/УК:** Они обязаны информировать клиентов о последствиях санкций и дальнейших действиях. Проверяйте сообщения в приложении, на сайте, по email.
3.  **Оценить состав портфеля:**
    *   **Российские активы (акции РФ, ОФЗ, рублевые корп. облигации):** Как правило, санкции на них напрямую не влияют. Вы можете продолжать ими торговать на МосБирже через этого же брокера (если он сохраняет доступ к торгам) или перевести их к другому брокеру при желании.
    *   **Иностранные активы:** Если они заблокированы, см. рекомендации по продаже/обмену заблокированных активов. Если они *не* заблокированы (например, учитывались не через НРД), уточните у брокера возможность их продажи или перевода.
    *   **Валюта:** Уточните у брокера лимиты и комиссии на операции с "недружественными" валютами. Возможно, имеет смысл перевести ее на банковский счет или конвертировать в рубли или "дружественные" валюты (юань).
4.  **Перевод активов (если предлагается/необходимо):**
    *   **Иностранные ценные бумаги:** Если брокер предлагает перевод к несанкционному партнеру, **обычно стоит соглашаться**. Это не гарантирует разблокировку, но может упростить дальнейшие действия. Внимательно изучите условия перевода (сроки, комиссии, брокер-получатель).
    *   **Российские ценные бумаги и рубли:** Вы можете перевести их к любому другому российскому брокеру по стандартной процедуре (подача поручений у обоих брокеров), если вас не устраивает работа с санкционным брокером.
5.  **ПИФы под управлением санкционной УК:**
    *   **Открытые ПИФы (ОПИФы):** Если фонд инвестировал в российские активы, санкции на УК обычно не влияют на возможность купить/продать паи. Если фонд инвестировал в иностранные активы, они могут быть заблокированы внутри фонда, что отразится на стоимости пая и возможности его погашения. Следите за информацией от УК.
    *   **Биржевые ПИФы (БПИФы):** Аналогично ОПИФам. Если базовые активы заблокированы, торги паями на бирже могут быть приостановлены или цена пая будет нерелевантной.
    *   **Закрытые ПИФы (ЗПИФы):** Уточняйте информацию у УК.
6.  **Доверительное управление (ДУ) у санкционной УК:** Свяжитесь с управляющей компанией и уточните статус ваших активов и дальнейшие действия в соответствии с вашим договором ДУ.

**Главное:** Взаимодействуйте с вашим брокером/УК, читайте их официальные сообщения и следуйте инструкциям. При необходимости обращайтесь в их службу поддержки.
`,EV=[{id:"stocks",title:"Акции",isActive:!0,articles:[{id:"what-are-stocks",title:"Что такое акции и как на них заработать?",url:"https://fincult.info/article/chto-takoe-aktsii-i-kak-na-nikh-zarabotat/",content:lV},{id:"find-lost-stocks",title:"Как найти потерянные акции?",url:"https://fincult.info/article/kak-nayti-poteryannye-aktsii/",content:cV},{id:"depository-receipts",title:"Зачем нужны депозитарные расписки?",url:"https://fincult.info/article/zachem-nuzhny-depozitarnye-raspiski/",content:uV},{id:"margin-trading",title:"Что такое маржинальная торговля и в чем ее риски?",url:"https://fincult.info/article/chto-takoe-marzhinalnaya-torgovlya-i-v-chem-ee-riski/",content:dV}]},{id:"bonds",title:"Облигации",isActive:!0,articles:[{id:"what-are-bonds",title:"Облигации: что это такое и как на них заработать?",url:"https://fincult.info/article/obligatsii-chto-eto-takoe-i-kak-na-nikh-zarabotat/",content:hV}]},{id:"brokers-and-management",title:"Брокеры и управление",isActive:!0,articles:[{id:"choose-broker",title:"Брокер: как его выбрать и как с ним работать?",url:"https://fincult.info/article/broker-kak-ego-vybrat-i-kak-s-nim-rabotat/",content:fV},{id:"trust-management",title:"Что такое доверительное управление и зачем оно начинающему инвестору?",url:"https://fincult.info/article/chto-takoe-doveritelnoe-upravlenie-i-zachem-ono-nachinayushchemu-investoru/",content:pV},{id:"investment-advisor",title:"Зачем нужен инвестиционный советник и как его выбрать?",url:"https://fincult.info/article/zachem-nuzhen-investitsionnyy-sovetnik-i-kak-ego-vybrat/",content:mV}]},{id:"funds",title:"Фонды (ПИФы, БПИФы, ETF)",isActive:!0,articles:[{id:"mutual-funds",title:"Паевые фонды (ПИФы): как они работают и как на них заработать?",url:"https://fincult.info/article/paevye-fondy-kak-oni-rabotayut-i-kak-na-nikh-zarabotat/",content:gV},{id:"etfs",title:"Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?",url:"https://fincult.info/article/birzhevye-fondy-ili-etf-chto-eto-i-stoit-li-vkladyvat-v-nikh-dengi/",content:vV},{id:"closed-end-funds",title:"Закрытые паевые фонды (ЗПИФы): в чем их особенности?",url:"https://fincult.info/article/zakrytye-paevye-fondy-v-chem-ikh-osobennosti-i-podkhodyat-li-oni-nachinayushchim-investoram/",content:yV}]},{id:"general-investing",title:"Общие вопросы инвестирования",isActive:!0,articles:[{id:"stock-exchange",title:"Как устроена фондовая биржа?",url:"https://fincult.info/article/kak-ustroena-fondovaya-birzha/",content:xV},{id:"investor-taxes",title:"Какие налоги платит инвестор?",url:"https://fincult.info/article/kakie-nalogi-platit-investor/",content:wV},{id:"newbie-investing",title:"Во что инвестировать новичку на бирже? Что дает статус «квала»?",url:"https://fincult.info/article/vo-chto-investirovat-novichku-na-birzhe-chto-daet-status-kvala-i-v-kakikh-sluchayakh-pridetsya-prokh/",content:bV},{id:"iis-3",title:"Что такое ИИС-3?",url:"https://fincult.info/article/chto-takoe-iis-3/",content:SV}]},{id:"sanctions",title:"Санкции и блокировки",isActive:!0,articles:[{id:"sell-blocked-assets",title:"Как продать заблокированные активы?",url:"https://fincult.info/article/kak-prodat-zablokirovannye-aktivy/",content:kV},{id:"broker-sanctions",title:"Брокер или доверительный управляющий оказались под санкциями: что делать?",url:"https://fincult.info/article/broker-ili-doveritelnyy-upravlyayushchiy-okazalis-pod-sanktsiyami-chto-delat/",content:CV}]}],gm=t=>`${t}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,NV=EV.map(t=>({...t,isActive:t.isActive??!0,articles:t.articles.map(e=>({...e,id:e.id||gm(`art-${t.id}`)}))})),on=pr()(Fo((t,e)=>({categories:NV,setCategories:n=>t({categories:n}),addCategory:n=>{const r=n.trim();if(!r)return null;const i=gm("cat"),s={id:i,title:r,articles:[],isActive:!0};return t(o=>({categories:[...o.categories,s]})),k.log(`[FaqStore] Added category: ${i} - ${r}`),i},deleteCategory:n=>t(r=>({categories:r.categories.filter(i=>i.id!==n)})),updateCategoryTitle:(n,r)=>{const i=r.trim();i&&t(s=>({categories:s.categories.map(o=>o.id===n?{...o,title:i}:o)}))},toggleCategoryActive:n=>t(r=>({categories:r.categories.map(i=>i.id===n?{...i,isActive:!(i.isActive??!0)}:i)})),addArticle:(n,r,i="")=>{const s=r.trim();if(!s)return null;const o=gm(`art-${n}`),a={id:o,title:s,content:i,url:""};let l=!1;return t(c=>({categories:c.categories.map(u=>u.id===n?(l=!0,{...u,articles:[...u.articles,a]}):u)})),l?(k.log(`[FaqStore] Added article ${o} to category ${n}`),o):(k.error(`[FaqStore] Category ${n} not found when trying to add article.`),null)},deleteArticle:(n,r)=>t(i=>({categories:i.categories.map(s=>s.id===n?{...s,articles:s.articles.filter(o=>o.id!==r)}:s)})),updateArticle:(n,r,i)=>{const s={...i};if(delete s.id,delete s.url,Object.keys(s).length===0){k.log(`[FaqStore] No valid updates provided for article ${r}.`);return}t(o=>({categories:o.categories.map(a=>a.id===n?{...a,articles:a.articles.map(l=>l.id===r?{...l,...s}:l)}:a)})),k.log(`[FaqStore] Updated article ${r} in category ${n} with:`,s)},getCategoryById:n=>e().categories.find(r=>r.id===n),getArticleByIds:(n,r)=>{const i=e().getCategoryById(n);return i==null?void 0:i.articles.find(s=>s.id===r)}}),{name:"faq-storage",storage:xs(()=>localStorage),onRehydrateStorage:()=>t=>{k.log("[FaqStore] Hydration finished.")}}));k.log("[FaqStore] Initialized with data:",on.getState().categories);const _V=()=>{const t=vt(),{tg:e}=Qt(),n=on(s=>s.categories);y.useEffect(()=>{const s=()=>t("/profile");return e&&(e.BackButton.show(),e.onEvent("backButtonClicked",s),k.log("[FaqPage] Telegram BackButton shown and handler attached.")),()=>{e&&(e.BackButton.hide(),e.offEvent("backButtonClicked",s),k.log("[FaqPage] Telegram BackButton hidden and handler removed."))}},[e,t]);const r=s=>{t(`/faq/${s}`)},i=n.filter(s=>s.isActive??!0);return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center",children:"Часто задаваемые вопросы"}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx(St,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:i.length>0?i.map(s=>d.jsxs("button",{onClick:()=>r(s.id),className:U("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow",children:s.title}),d.jsx(Dk,{className:"h-5 w-5 flex-shrink-0 text-muted-foreground"})]},s.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"Нет доступных категорий."})})})})]})},TV=()=>{const{categoryId:t}=vs(),e=vt(),{tg:n}=Qt(),{getCategoryById:r}=on(),i=on.persist.hasHydrated(),s=y.useMemo(()=>{if(!(!i||!t))return k.log(`[FaqCategoryPage] Store hydrated, getting category: ${t}`),r(t)},[t,r,i]);y.useEffect(()=>{const a=()=>e("/faq");return n&&(n.BackButton.show(),n.onEvent("backButtonClicked",a),k.log("[FaqCategoryPage] Telegram BackButton shown and handler attached.")),()=>{n&&(n.BackButton.hide(),n.offEvent("backButtonClicked",a),k.log("[FaqCategoryPage] Telegram BackButton hidden and handler removed."))}},[n,e]);const o=a=>{k.log("[FaqCategoryPage handleArticleClick] Clicked article:",a),a.content||a.id?(k.log("[FaqCategoryPage handleArticleClick] Navigating internally..."),e(`/faq/${t}/${a.id}`)):k.error("[FaqCategoryPage handleArticleClick] Article has no content or id!",a)};if(!i)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})});if(!s||!(s.isActive??!0)){const a=s?`Категория "${s.title}" временно недоступна.`:`Категория FAQ "${t}" не найдена.`;return d.jsx("div",{className:"p-4 text-center",children:d.jsx(gt,{message:a})})}return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:s.title,children:s.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})]}),d.jsx(St,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:s.articles.length>0?s.articles.map(a=>d.jsxs("button",{onClick:()=>o(a),className:U("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow mr-2",children:a.title}),d.jsx(qL,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"})]},a.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})})})]})};function AV(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const PV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,RV={};function vw(t,e){return(RV.jsx?jV:PV).test(t)}const MV=/[ \t\n\f\r]/g;function IV(t){return typeof t=="object"?t.type==="text"?yw(t.value):!1:yw(t)}function yw(t){return t.replace(MV,"")===""}class ql{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}ql.prototype.normal={};ql.prototype.property={};ql.prototype.space=void 0;function W_(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new ql(n,r,e)}function vm(t){return t.toLowerCase()}class Jt{constructor(e,n){this.attribute=n,this.property=e}}Jt.prototype.attribute="";Jt.prototype.booleanish=!1;Jt.prototype.boolean=!1;Jt.prototype.commaOrSpaceSeparated=!1;Jt.prototype.commaSeparated=!1;Jt.prototype.defined=!1;Jt.prototype.mustUseProperty=!1;Jt.prototype.number=!1;Jt.prototype.overloadedBoolean=!1;Jt.prototype.property="";Jt.prototype.spaceSeparated=!1;Jt.prototype.space=void 0;let LV=0;const ye=ws(),st=ws(),q_=ws(),Z=ws(),$e=ws(),fo=ws(),tn=ws();function ws(){return 2**++LV}const ym=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:st,commaOrSpaceSeparated:tn,commaSeparated:fo,number:Z,overloadedBoolean:q_,spaceSeparated:$e},Symbol.toStringTag,{value:"Module"})),Cf=Object.keys(ym);class Tv extends Jt{constructor(e,n,r,i){let s=-1;if(super(e,n),xw(this,"space",i),typeof r=="number")for(;++s<Cf.length;){const o=Cf[s];xw(this,Cf[s],(r&ym[o])===ym[o])}}}Tv.prototype.defined=!0;function xw(t,e,n){n&&(t[e]=n)}function Wo(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Tv(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[vm(r)]=r,n[vm(s.attribute)]=r}return new ql(e,n,t.space)}const Y_=Wo({properties:{ariaActiveDescendant:null,ariaAtomic:st,ariaAutoComplete:null,ariaBusy:st,ariaChecked:st,ariaColCount:Z,ariaColIndex:Z,ariaColSpan:Z,ariaControls:$e,ariaCurrent:null,ariaDescribedBy:$e,ariaDetails:null,ariaDisabled:st,ariaDropEffect:$e,ariaErrorMessage:null,ariaExpanded:st,ariaFlowTo:$e,ariaGrabbed:st,ariaHasPopup:null,ariaHidden:st,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:$e,ariaLevel:Z,ariaLive:null,ariaModal:st,ariaMultiLine:st,ariaMultiSelectable:st,ariaOrientation:null,ariaOwns:$e,ariaPlaceholder:null,ariaPosInSet:Z,ariaPressed:st,ariaReadOnly:st,ariaRelevant:null,ariaRequired:st,ariaRoleDescription:$e,ariaRowCount:Z,ariaRowIndex:Z,ariaRowSpan:Z,ariaSelected:st,ariaSetSize:Z,ariaSort:null,ariaValueMax:Z,ariaValueMin:Z,ariaValueNow:Z,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function K_(t,e){return e in t?t[e]:e}function G_(t,e){return K_(t,e.toLowerCase())}const OV=Wo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fo,acceptCharset:$e,accessKey:$e,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:$e,autoFocus:ye,autoPlay:ye,blocking:$e,capture:null,charSet:null,checked:ye,cite:null,className:$e,cols:Z,colSpan:null,content:null,contentEditable:st,controls:ye,controlsList:$e,coords:Z|fo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:q_,draggable:st,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:$e,height:Z,hidden:ye,high:Z,href:null,hrefLang:null,htmlFor:$e,httpEquiv:$e,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:$e,itemRef:$e,itemScope:ye,itemType:$e,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:Z,manifest:null,max:null,maxLength:Z,media:null,method:null,min:null,minLength:Z,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:Z,pattern:null,ping:$e,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:$e,required:ye,reversed:ye,rows:Z,rowSpan:Z,sandbox:$e,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:Z,sizes:null,slot:null,span:Z,spellCheck:st,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Z,step:null,style:null,tabIndex:Z,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:st,width:Z,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:$e,axis:null,background:null,bgColor:null,border:Z,borderColor:null,bottomMargin:Z,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:Z,leftMargin:Z,link:null,longDesc:null,lowSrc:null,marginHeight:Z,marginWidth:Z,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:Z,rules:null,scheme:null,scrolling:st,standby:null,summary:null,text:null,topMargin:Z,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Z,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:Z,security:null,unselectable:null},space:"html",transform:G_}),DV=Wo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:tn,accentHeight:Z,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Z,amplitude:Z,arabicForm:null,ascent:Z,attributeName:null,attributeType:null,azimuth:Z,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Z,by:null,calcMode:null,capHeight:Z,className:$e,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Z,diffuseConstant:Z,direction:null,display:null,dur:null,divisor:Z,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:Z,enableBackground:null,end:null,event:null,exponent:Z,externalResourcesRequired:null,fill:null,fillOpacity:Z,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fo,g2:fo,glyphName:fo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Z,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Z,horizOriginX:Z,horizOriginY:Z,id:null,ideographic:Z,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Z,k:Z,k1:Z,k2:Z,k3:Z,k4:Z,kernelMatrix:tn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Z,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Z,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Z,overlineThickness:Z,paintOrder:null,panose1:null,path:null,pathLength:Z,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:$e,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Z,pointsAtY:Z,pointsAtZ:Z,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:tn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:tn,rev:tn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:tn,requiredFeatures:tn,requiredFonts:tn,requiredFormats:tn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Z,specularExponent:Z,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Z,strikethroughThickness:Z,string:null,stroke:null,strokeDashArray:tn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Z,strokeOpacity:Z,strokeWidth:null,style:null,surfaceScale:Z,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:tn,tabIndex:Z,tableValues:null,target:null,targetX:Z,targetY:Z,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:tn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Z,underlineThickness:Z,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Z,values:null,vAlphabetic:Z,vMathematical:Z,vectorEffect:null,vHanging:Z,vIdeographic:Z,version:null,vertAdvY:Z,vertOriginX:Z,vertOriginY:Z,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Z,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:K_}),Z_=Wo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),X_=Wo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:G_}),Q_=Wo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),$V={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},zV=/[A-Z]/g,ww=/-[a-z]/g,FV=/^data[-\w.:]+$/i;function BV(t,e){const n=vm(e);let r=e,i=Jt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FV.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(ww,UV);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!ww.test(s)){let o=s.replace(zV,VV);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Tv}return new i(r,e)}function VV(t){return"-"+t.toLowerCase()}function UV(t){return t.charAt(1).toUpperCase()}const HV=W_([Y_,OV,Z_,X_,Q_],"html"),Av=W_([Y_,DV,Z_,X_,Q_],"svg");function WV(t){return t.join(" ").trim()}var Pv={},bw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,qV=/\n/g,YV=/^\s*/,KV=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,GV=/^:\s*/,ZV=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,XV=/^[;\s]*/,QV=/^\s+|\s+$/g,JV=`
`,Sw="/",kw="*",Fi="",eU="comment",tU="declaration",nU=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(g){var m=g.match(qV);m&&(n+=m.length);var w=g.lastIndexOf(JV);r=~w?g.length-w:r+g.length}function s(){var g={line:n,column:r};return function(m){return m.position=new o(g),c(),m}}function o(g){this.start=g,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(g){var m=new Error(e.source+":"+n+":"+r+": "+g);if(m.reason=g,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function l(g){var m=g.exec(t);if(m){var w=m[0];return i(w),t=t.slice(w.length),m}}function c(){l(YV)}function u(g){var m;for(g=g||[];m=h();)m!==!1&&g.push(m);return g}function h(){var g=s();if(!(Sw!=t.charAt(0)||kw!=t.charAt(1))){for(var m=2;Fi!=t.charAt(m)&&(kw!=t.charAt(m)||Sw!=t.charAt(m+1));)++m;if(m+=2,Fi===t.charAt(m-1))return a("End of comment missing");var w=t.slice(2,m-2);return r+=2,i(w),t=t.slice(m),r+=2,g({type:eU,comment:w})}}function f(){var g=s(),m=l(KV);if(m){if(h(),!l(GV))return a("property missing ':'");var w=l(ZV),v=g({type:tU,property:Cw(m[0].replace(bw,Fi)),value:w?Cw(w[0].replace(bw,Fi)):Fi});return l(XV),v}}function p(){var g=[];u(g);for(var m;m=f();)m!==!1&&(g.push(m),u(g));return g}return c(),p()};function Cw(t){return t?t.replace(QV,Fi):Fi}var rU=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.default=sU;var iU=rU(nU);function sU(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,iU.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var ih={};Object.defineProperty(ih,"__esModule",{value:!0});ih.camelCase=void 0;var oU=/^--[a-zA-Z0-9_-]+$/,aU=/-([a-z])/g,lU=/^[^-]+$/,cU=/^-(webkit|moz|ms|o|khtml)-/,uU=/^-(ms)-/,dU=function(t){return!t||lU.test(t)||oU.test(t)},hU=function(t,e){return e.toUpperCase()},Ew=function(t,e){return"".concat(e,"-")},fU=function(t,e){return e===void 0&&(e={}),dU(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(uU,Ew):t=t.replace(cU,Ew),t.replace(aU,hU))};ih.camelCase=fU;var pU=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},mU=pU(Pv),gU=ih;function xm(t,e){var n={};return!t||typeof t!="string"||(0,mU.default)(t,function(r,i){r&&i&&(n[(0,gU.camelCase)(r,e)]=i)}),n}xm.default=xm;var vU=xm;const yU=pn(vU),J_=eT("end"),jv=eT("start");function eT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xU(t){const e=jv(t),n=J_(t);if(e&&n)return{start:e,end:n}}function Da(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Nw(t.position):"start"in t||"end"in t?Nw(t):"line"in t||"column"in t?wm(t):""}function wm(t){return _w(t&&t.line)+":"+_w(t&&t.column)}function Nw(t){return wm(t&&t.start)+"-"+wm(t&&t.end)}function _w(t){return t&&typeof t=="number"?t:1}class jt extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Da(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}jt.prototype.file="";jt.prototype.name="";jt.prototype.reason="";jt.prototype.message="";jt.prototype.stack="";jt.prototype.column=void 0;jt.prototype.line=void 0;jt.prototype.ancestors=void 0;jt.prototype.cause=void 0;jt.prototype.fatal=void 0;jt.prototype.place=void 0;jt.prototype.ruleId=void 0;jt.prototype.source=void 0;const Rv={}.hasOwnProperty,wU=new Map,bU=/[A-Z]/g,SU=new Set(["table","tbody","thead","tfoot","tr"]),kU=new Set(["td","th"]),tT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function CU(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=RU(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=jU(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Av:HV,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=nT(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function nT(t,e,n){if(e.type==="element")return EU(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return NU(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return TU(t,e,n);if(e.type==="mdxjsEsm")return _U(t,e);if(e.type==="root")return AU(t,e,n);if(e.type==="text")return PU(t,e)}function EU(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Av,t.schema=i),t.ancestors.push(e);const s=iT(t,e.tagName,!1),o=MU(t,e);let a=Iv(t,e);return SU.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!IV(l):!0})),rT(t,o,s,e),Mv(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function NU(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Tl(t,e.position)}function _U(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Tl(t,e.position)}function TU(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Av,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:iT(t,e.name,!0),o=IU(t,e),a=Iv(t,e);return rT(t,o,s,e),Mv(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function AU(t,e,n){const r={};return Mv(r,Iv(t,e)),t.create(e,t.Fragment,r,n)}function PU(t,e){return e.value}function rT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Mv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function jU(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function RU(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=jv(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function MU(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Rv.call(e.properties,i)){const s=LU(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&kU.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function IU(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Tl(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Tl(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Iv(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:wU;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=nT(t,s,o);a!==void 0&&n.push(a)}return n}function LU(t,e,n){const r=BV(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?AV(n):WV(n)),r.property==="style"){let i=typeof n=="object"?n:OU(t,String(n));return t.stylePropertyNameCase==="css"&&(i=DU(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?$V[r.property]||r.property:r.attribute,n]}}function OU(t,e){try{return yU(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new jt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=tT+"#cannot-parse-style-attribute",i}}function iT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=vw(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=vw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Rv.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Tl(t)}function Tl(t,e){const n=new jt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=tT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function DU(t){const e={};let n;for(n in t)Rv.call(t,n)&&(e[$U(n)]=t[n]);return e}function $U(t){let e=t.replace(bU,zU);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function zU(t){return"-"+t.toLowerCase()}const Ef={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FU={};function BU(t,e){const n=FU,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sT(t,r,i)}function sT(t,e,n){if(VU(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Tw(t.children,e,n)}return Array.isArray(t)?Tw(t,e,n):""}function Tw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=sT(t[i],e,n);return r.join("")}function VU(t){return!!(t&&typeof t=="object")}const Aw=document.createElement("i");function Lv(t){const e="&"+t+";";Aw.innerHTML=e;const n=Aw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function fr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function bn(t,e){return t.length>0?(fr(t,t.length,0,e),t):e}const Pw={}.hasOwnProperty;function UU(t){const e={};let n=-1;for(;++n<t.length;)HU(e,t[n]);return e}function HU(t,e){let n;for(n in e){const i=(Pw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Pw.call(i,o)||(i[o]=[]);const a=s[o];WU(i[o],Array.isArray(a)?a:a?[a]:[])}}}function WU(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);fr(t,0,0,r)}function oT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function po(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nr=Ii(/[A-Za-z]/),an=Ii(/[\dA-Za-z]/),qU=Ii(/[#-'*+\--9=?A-Z^-~]/);function bm(t){return t!==null&&(t<32||t===127)}const Sm=Ii(/\d/),YU=Ii(/[\dA-Fa-f]/),KU=Ii(/[!-/:-@[-`{-~]/);function ge(t){return t!==null&&t<-2}function Zt(t){return t!==null&&(t<0||t===32)}function Re(t){return t===-2||t===-1||t===32}const GU=Ii(new RegExp("\\p{P}|\\p{S}","u")),ZU=Ii(/\s/);function Ii(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function qo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&an(t.charCodeAt(n+1))&&an(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Fe(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Re(l)?(t.enter(n),a(l)):e(l)}function a(l){return Re(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const XU={tokenize:QU};function QU(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Fe(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ge(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const JU={tokenize:e6},jw={tokenize:t6};function e6(t){const e=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,l,c)(b)}return c(b)}function l(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const S=e.events.length;let E=S,C;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){C=e.events[E][1].end;break}v(r);let _=S;for(;_<e.events.length;)e.events[_][1].end={...C},_++;return fr(e.events,E+1,0,e.events.slice(S)),e.events.length=_,c(b)}return a(b)}function c(b){if(r===n.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return g(b);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(jw,u,h)(b)}function u(b){return i&&x(),v(r),f(b)}function h(b){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,g(b)}function f(b){return e.containerState={},t.attempt(jw,p,g)(b)}function p(b){return r++,n.push([e.currentConstruct,e.containerState]),f(b)}function g(b){if(b===null){i&&x(),v(0),t.consume(b);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(b)}function m(b){if(b===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(b);return}return ge(b)?(t.consume(b),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(b),m)}function w(b,S){const E=e.sliceStream(b);if(S&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),e.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const _=e.events.length;let P=_,L,j;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(L){j=e.events[P][1].end;break}L=!0}for(v(r),C=_;C<e.events.length;)e.events[C][1].end={...j},C++;fr(e.events,P+1,0,e.events.slice(_)),e.events.length=C}}function v(b){let S=n.length;for(;S-- >b;){const E=n[S];e.containerState=E[1],E[0].exit.call(e,t)}n.length=b}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function t6(t,e,n){return Fe(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rw(t){if(t===null||Zt(t)||ZU(t))return 1;if(GU(t))return 2}function Ov(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const km={name:"attention",resolveAll:n6,tokenize:r6};function n6(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};Mw(h,-l),Mw(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=bn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=bn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=bn(c,Ov(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=bn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=bn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,fr(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function r6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Rw(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=Rw(l),h=!u||u===2&&i||n.includes(l),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(l)}}function Mw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const i6={name:"autolink",tokenize:s6};function s6(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return nr(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||an(p)?(r=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||an(p))&&r++<32?(t.consume(p),a):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||bm(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),u):qU(p)?(t.consume(p),c):n(p)}function u(p){return an(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||an(p))&&r++<63){const g=p===45?f:h;return t.consume(p),g}return n(p)}}const sh={partial:!0,tokenize:o6};function o6(t,e,n){return r;function r(s){return Re(s)?Fe(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||ge(s)?e(s):n(s)}}const aT={continuation:{tokenize:l6},exit:c6,name:"blockQuote",tokenize:a6};function a6(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Re(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function l6(t,e,n){const r=this;return i;function i(o){return Re(o)?Fe(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(aT,e,n)(o)}}function c6(t){t.exit("blockQuote")}const lT={name:"characterEscape",tokenize:u6};function u6(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return KU(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const cT={name:"characterReference",tokenize:d6};function d6(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=an,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=YU,u):(t.enter("characterReferenceValue"),s=7,o=Sm,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===an&&!Lv(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const Iw={partial:!0,tokenize:f6},Lw={concrete:!0,name:"codeFenced",tokenize:h6};function h6(t,e,n){const r=this,i={partial:!0,tokenize:E};let s=0,o=0,a;return l;function l(C){return c(C)}function c(C){const _=r.events[r.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===a?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),Re(C)?Fe(t,h,"whitespace")(C):h(C))}function h(C){return C===null||ge(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(Iw,m,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||ge(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Re(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Fe(t,p,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),f)}function p(C){return C===null||ge(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(C))}function g(C){return C===null||ge(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===a?n(C):(t.consume(C),g)}function m(C){return t.attempt(i,S,w)(C)}function w(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),v}function v(C){return s>0&&Re(C)?Fe(t,x,"linePrefix",s+1)(C):x(C)}function x(C){return C===null||ge(C)?t.check(Iw,m,S)(C):(t.enter("codeFlowValue"),b(C))}function b(C){return C===null||ge(C)?(t.exit("codeFlowValue"),x(C)):(t.consume(C),b)}function S(C){return t.exit("codeFenced"),e(C)}function E(C,_,P){let L=0;return j;function j($){return C.enter("lineEnding"),C.consume($),C.exit("lineEnding"),M}function M($){return C.enter("codeFencedFence"),Re($)?Fe(C,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):z($)}function z($){return $===a?(C.enter("codeFencedFenceSequence"),R($)):P($)}function R($){return $===a?(L++,C.consume($),R):L>=o?(C.exit("codeFencedFenceSequence"),Re($)?Fe(C,I,"whitespace")($):I($)):P($)}function I($){return $===null||ge($)?(C.exit("codeFencedFence"),_($)):P($)}}}function f6(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Nf={name:"codeIndented",tokenize:m6},p6={partial:!0,tokenize:g6};function m6(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Fe(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):ge(c)?t.attempt(p6,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||ge(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function g6(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ge(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Fe(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ge(o)?i(o):n(o)}}const v6={name:"codeText",previous:x6,resolve:y6,tokenize:w6};function y6(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function x6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function w6(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):ge(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||ge(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class b6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ca(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ca(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ca(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ca(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ca(this.left,n.reverse())}}}function ca(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function uT(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new b6(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,S6(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return fr(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function S6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,f=-1,p=n,g=0,m=0;const w=[m];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,w.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):w.pop(),f=w.length;f--;){const v=a.slice(w[f],w[f+1]),x=s.pop();l.push([x,x+v.length-1]),t.splice(x,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[g+l[f][0]]=g+l[f][1],g+=l[f][1]-l[f][0]-1;return c}const k6={resolve:E6,tokenize:N6},C6={partial:!0,tokenize:_6};function E6(t){return uT(t),t}function N6(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):ge(a)?t.check(C6,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function _6(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Fe(t,s,"linePrefix")}function s(o){if(o===null||ge(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function dT(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),f):v===null||v===32||v===41||bm(v)?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(t.exit("chunkString"),t.exit(a),f(v)):v===null||v===60||ge(v)?n(v):(t.consume(v),v===92?g:p)}function g(v){return v===60||v===62||v===92?(t.consume(v),p):p(v)}function m(v){return!u&&(v===null||v===41||Zt(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,m):v===41?(t.consume(v),u--,m):v===null||v===32||v===40||bm(v)?n(v):(t.consume(v),v===92?w:m)}function w(v){return v===40||v===41||v===92?(t.consume(v),m):m(v)}}function hT(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):ge(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||ge(p)||a++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!Re(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function fT(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?n(f):ge(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Fe(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||ge(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function $a(t,e){let n;return r;function r(i){return ge(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Re(i)?Fe(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const T6={name:"definition",tokenize:P6},A6={partial:!0,tokenize:j6};function P6(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return hT.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return Zt(p)?$a(t,c)(p):c(p)}function c(p){return dT(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(A6,h,h)(p)}function h(p){return Re(p)?Fe(t,f,"whitespace")(p):f(p)}function f(p){return p===null||ge(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function j6(t,e,n){return r;function r(a){return Zt(a)?$a(t,i)(a):n(a)}function i(a){return fT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Re(a)?Fe(t,o,"whitespace")(a):o(a)}function o(a){return a===null||ge(a)?e(a):n(a)}}const R6={name:"hardBreakEscape",tokenize:M6};function M6(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return ge(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const I6={name:"headingAtx",resolve:L6,tokenize:O6};function L6(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},fr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function O6(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Zt(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||ge(u)?(t.exit("atxHeading"),e(u)):Re(u)?Fe(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Zt(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const D6=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ow=["pre","script","style","textarea"],$6={concrete:!0,name:"htmlFlow",resolveTo:B6,tokenize:V6},z6={partial:!0,tokenize:H6},F6={partial:!0,tokenize:U6};function B6(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function V6(t,e,n){const r=this;let i,s,o,a,l;return c;function c(A){return u(A)}function u(A){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(A),h}function h(A){return A===33?(t.consume(A),f):A===47?(t.consume(A),s=!0,m):A===63?(t.consume(A),i=3,r.interrupt?e:N):nr(A)?(t.consume(A),o=String.fromCharCode(A),w):n(A)}function f(A){return A===45?(t.consume(A),i=2,p):A===91?(t.consume(A),i=5,a=0,g):nr(A)?(t.consume(A),i=4,r.interrupt?e:N):n(A)}function p(A){return A===45?(t.consume(A),r.interrupt?e:N):n(A)}function g(A){const J="CDATA[";return A===J.charCodeAt(a++)?(t.consume(A),a===J.length?r.interrupt?e:z:g):n(A)}function m(A){return nr(A)?(t.consume(A),o=String.fromCharCode(A),w):n(A)}function w(A){if(A===null||A===47||A===62||Zt(A)){const J=A===47,le=o.toLowerCase();return!J&&!s&&Ow.includes(le)?(i=1,r.interrupt?e(A):z(A)):D6.includes(o.toLowerCase())?(i=6,J?(t.consume(A),v):r.interrupt?e(A):z(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):s?x(A):b(A))}return A===45||an(A)?(t.consume(A),o+=String.fromCharCode(A),w):n(A)}function v(A){return A===62?(t.consume(A),r.interrupt?e:z):n(A)}function x(A){return Re(A)?(t.consume(A),x):j(A)}function b(A){return A===47?(t.consume(A),j):A===58||A===95||nr(A)?(t.consume(A),S):Re(A)?(t.consume(A),b):j(A)}function S(A){return A===45||A===46||A===58||A===95||an(A)?(t.consume(A),S):E(A)}function E(A){return A===61?(t.consume(A),C):Re(A)?(t.consume(A),E):b(A)}function C(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),l=A,_):Re(A)?(t.consume(A),C):P(A)}function _(A){return A===l?(t.consume(A),l=null,L):A===null||ge(A)?n(A):(t.consume(A),_)}function P(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Zt(A)?E(A):(t.consume(A),P)}function L(A){return A===47||A===62||Re(A)?b(A):n(A)}function j(A){return A===62?(t.consume(A),M):n(A)}function M(A){return A===null||ge(A)?z(A):Re(A)?(t.consume(A),M):n(A)}function z(A){return A===45&&i===2?(t.consume(A),D):A===60&&i===1?(t.consume(A),F):A===62&&i===4?(t.consume(A),B):A===63&&i===3?(t.consume(A),N):A===93&&i===5?(t.consume(A),O):ge(A)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(z6,Q,R)(A)):A===null||ge(A)?(t.exit("htmlFlowData"),R(A)):(t.consume(A),z)}function R(A){return t.check(F6,I,Q)(A)}function I(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),$}function $(A){return A===null||ge(A)?R(A):(t.enter("htmlFlowData"),z(A))}function D(A){return A===45?(t.consume(A),N):z(A)}function F(A){return A===47?(t.consume(A),o="",T):z(A)}function T(A){if(A===62){const J=o.toLowerCase();return Ow.includes(J)?(t.consume(A),B):z(A)}return nr(A)&&o.length<8?(t.consume(A),o+=String.fromCharCode(A),T):z(A)}function O(A){return A===93?(t.consume(A),N):z(A)}function N(A){return A===62?(t.consume(A),B):A===45&&i===2?(t.consume(A),N):z(A)}function B(A){return A===null||ge(A)?(t.exit("htmlFlowData"),Q(A)):(t.consume(A),B)}function Q(A){return t.exit("htmlFlow"),e(A)}}function U6(t,e,n){const r=this;return i;function i(o){return ge(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function H6(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(sh,e,n)}}const W6={name:"htmlText",tokenize:q6};function q6(t,e,n){const r=this;let i,s,o;return a;function a(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),l}function l(N){return N===33?(t.consume(N),c):N===47?(t.consume(N),E):N===63?(t.consume(N),b):nr(N)?(t.consume(N),P):n(N)}function c(N){return N===45?(t.consume(N),u):N===91?(t.consume(N),s=0,g):nr(N)?(t.consume(N),x):n(N)}function u(N){return N===45?(t.consume(N),p):n(N)}function h(N){return N===null?n(N):N===45?(t.consume(N),f):ge(N)?(o=h,F(N)):(t.consume(N),h)}function f(N){return N===45?(t.consume(N),p):h(N)}function p(N){return N===62?D(N):N===45?f(N):h(N)}function g(N){const B="CDATA[";return N===B.charCodeAt(s++)?(t.consume(N),s===B.length?m:g):n(N)}function m(N){return N===null?n(N):N===93?(t.consume(N),w):ge(N)?(o=m,F(N)):(t.consume(N),m)}function w(N){return N===93?(t.consume(N),v):m(N)}function v(N){return N===62?D(N):N===93?(t.consume(N),v):m(N)}function x(N){return N===null||N===62?D(N):ge(N)?(o=x,F(N)):(t.consume(N),x)}function b(N){return N===null?n(N):N===63?(t.consume(N),S):ge(N)?(o=b,F(N)):(t.consume(N),b)}function S(N){return N===62?D(N):b(N)}function E(N){return nr(N)?(t.consume(N),C):n(N)}function C(N){return N===45||an(N)?(t.consume(N),C):_(N)}function _(N){return ge(N)?(o=_,F(N)):Re(N)?(t.consume(N),_):D(N)}function P(N){return N===45||an(N)?(t.consume(N),P):N===47||N===62||Zt(N)?L(N):n(N)}function L(N){return N===47?(t.consume(N),D):N===58||N===95||nr(N)?(t.consume(N),j):ge(N)?(o=L,F(N)):Re(N)?(t.consume(N),L):D(N)}function j(N){return N===45||N===46||N===58||N===95||an(N)?(t.consume(N),j):M(N)}function M(N){return N===61?(t.consume(N),z):ge(N)?(o=M,F(N)):Re(N)?(t.consume(N),M):L(N)}function z(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),i=N,R):ge(N)?(o=z,F(N)):Re(N)?(t.consume(N),z):(t.consume(N),I)}function R(N){return N===i?(t.consume(N),i=void 0,$):N===null?n(N):ge(N)?(o=R,F(N)):(t.consume(N),R)}function I(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Zt(N)?L(N):(t.consume(N),I)}function $(N){return N===47||N===62||Zt(N)?L(N):n(N)}function D(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function F(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),T}function T(N){return Re(N)?Fe(t,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):O(N)}function O(N){return t.enter("htmlTextData"),o(N)}}const Dv={name:"labelEnd",resolveAll:Z6,resolveTo:X6,tokenize:Q6},Y6={tokenize:J6},K6={tokenize:eH},G6={tokenize:tH};function Z6(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&fr(t,0,t.length,n),t}function X6(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=bn(a,t.slice(s+1,s+r+3)),a=bn(a,[["enter",u,e]]),a=bn(a,Ov(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=bn(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=bn(a,t.slice(o+1)),a=bn(a,[["exit",l,e]]),fr(t,s,t.length,a),t}function Q6(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(po(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(Y6,u,o?u:h)(f):f===91?t.attempt(K6,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(G6,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function J6(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Zt(h)?$a(t,s)(h):s(h)}function s(h){return h===41?u(h):dT(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Zt(h)?$a(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?fT(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return Zt(h)?$a(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function eH(t,e,n){const r=this;return i;function i(a){return hT.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function tH(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const nH={name:"labelStartImage",resolveAll:Dv.resolveAll,tokenize:rH};function rH(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const iH={name:"labelStartLink",resolveAll:Dv.resolveAll,tokenize:sH};function sH(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const _f={name:"lineEnding",tokenize:oH};function oH(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Fe(t,e,"linePrefix")}}const Jc={name:"thematicBreak",tokenize:aH};function aH(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ge(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Re(c)?Fe(t,a,"whitespace")(c):a(c))}}const Vt={continuation:{tokenize:dH},exit:fH,name:"list",tokenize:uH},lH={partial:!0,tokenize:pH},cH={partial:!0,tokenize:hH};function uH(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Sm(p)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Jc,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return Sm(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(sh,r.interrupt?n:u,t.attempt(lH,f,h))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return Re(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function dH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(sh,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Fe(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Re(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(cH,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Fe(t,t.attempt(Vt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function hH(t,e,n){const r=this;return Fe(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function fH(t){t.exit(this.containerState.type)}function pH(t,e,n){const r=this;return Fe(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Re(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Dw={name:"setextUnderline",resolveTo:mH,tokenize:gH};function mH(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function gH(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Re(c)?Fe(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ge(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const vH={tokenize:yH};function yH(t){const e=this,n=t.attempt(sh,r,t.attempt(this.parser.constructs.flowInitial,i,Fe(t,t.attempt(this.parser.constructs.flow,i,t.attempt(k6,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const xH={resolveAll:mT()},wH=pT("string"),bH=pT("text");function pT(t){return{resolveAll:mT(t==="text"?SH:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function mT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function SH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const kH={42:Vt,43:Vt,45:Vt,48:Vt,49:Vt,50:Vt,51:Vt,52:Vt,53:Vt,54:Vt,55:Vt,56:Vt,57:Vt,62:aT},CH={91:T6},EH={[-2]:Nf,[-1]:Nf,32:Nf},NH={35:I6,42:Jc,45:[Dw,Jc],60:$6,61:Dw,95:Jc,96:Lw,126:Lw},_H={38:cT,92:lT},TH={[-5]:_f,[-4]:_f,[-3]:_f,33:nH,38:cT,42:km,60:[i6,W6],91:iH,92:[R6,lT],93:Dv,95:km,96:v6},AH={null:[km,xH]},PH={null:[42,95]},jH={null:[]},RH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:PH,contentInitial:CH,disable:jH,document:kH,flow:NH,flowInitial:EH,insideSpan:AH,string:_H,text:TH},Symbol.toStringTag,{value:"Module"}));function MH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:_(E),check:_(C),consume:x,enter:b,exit:S,interrupt:_(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:g,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(M){return o=bn(o,M),w(),o[o.length-1]!==null?[]:(P(e,0),c.events=Ov(s,c.events,c),c.events)}function f(M,z){return LH(p(M),z)}function p(M){return IH(o,M)}function g(){const{_bufferIndex:M,_index:z,line:R,column:I,offset:$}=r;return{_bufferIndex:M,_index:z,line:R,column:I,offset:$}}function m(M){i[M.line]=M.column,j()}function w(){let M;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<z.length;)v(z.charCodeAt(r._bufferIndex));else v(z)}}function v(M){u=u(M)}function x(M){ge(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,j()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=M}function b(M,z){const R=z||{};return R.type=M,R.start=g(),c.events.push(["enter",R,c]),a.push(R),R}function S(M){const z=a.pop();return z.end=g(),c.events.push(["exit",z,c]),z}function E(M,z){P(M,z.from)}function C(M,z){z.restore()}function _(M,z){return R;function R(I,$,D){let F,T,O,N;return Array.isArray(I)?Q(I):"tokenize"in I?Q([I]):B(I);function B(ce){return X;function X(se){const H=se!==null&&ce[se],q=se!==null&&ce.null,ne=[...Array.isArray(H)?H:H?[H]:[],...Array.isArray(q)?q:q?[q]:[]];return Q(ne)(se)}}function Q(ce){return F=ce,T=0,ce.length===0?D:A(ce[T])}function A(ce){return X;function X(se){return N=L(),O=ce,ce.partial||(c.currentConstruct=ce),ce.name&&c.parser.constructs.disable.null.includes(ce.name)?le():ce.tokenize.call(z?Object.assign(Object.create(c),z):c,l,J,le)(se)}}function J(ce){return M(O,N),$}function le(ce){return N.restore(),++T<F.length?A(F[T]):D}}}function P(M,z){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&fr(c.events,z,c.events.length-z,M.resolve(c.events.slice(z),c)),M.resolveTo&&(c.events=M.resolveTo(c.events,c))}function L(){const M=g(),z=c.previous,R=c.currentConstruct,I=c.events.length,$=Array.from(a);return{from:I,restore:D};function D(){r=M,c.previous=z,c.currentConstruct=R,c.events.length=I,a=$,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function IH(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function LH(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function OH(t){const r={constructs:UU([RH,...(t||{}).extensions||[]]),content:i(XU),defined:[],document:i(JU),flow:i(vH),lazy:{},string:i(wH),text:i(bH)};return r;function i(s){return o;function o(a){return MH(r,s,a)}}}function DH(t){for(;!uT(t););return t}const $w=/[\0\t\n\r]/g;function $H(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if($w.lastIndex=h,c=$w.exec(s),f=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(f),!c){e=s.slice(h);break}if(p===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const zH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FH(t){return t.replace(zH,BH)}function BH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return oT(n.slice(s?2:1),s?16:10)}return Lv(n)||t}const gT={}.hasOwnProperty;function VH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),UH(n)(DH(OH(n).document().write($H()(t,e,!0))))}function UH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Bt),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(pe),blockQuote:s(q),characterEscape:L,characterReference:L,codeFenced:s(ne),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ne,o),codeText:s(ae,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(Ce),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Be),hardBreakEscape:s(De),hardBreakTrailing:s(De),htmlFlow:s(Ve,o),htmlFlowData:L,htmlText:s(Ve,o),htmlTextData:L,image:s(Yn),label:o,link:s(Bt),listItem:s(NA),listItemValue:f,listOrdered:s(uh,h),listUnordered:s(uh),paragraph:s(_A),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(pe),strong:s(TA),thematicBreak:s(PA)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:H,autolinkProtocol:se,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:ce,characterReference:X,codeFenced:l(w),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:j,codeIndented:l(v),codeText:l($),codeTextData:j,data:j,definition:l(),definitionDestinationString:S,definitionLabelString:x,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(R),htmlFlowData:j,htmlText:l(I),htmlTextData:j,image:l(F),label:O,labelText:T,lineEnding:M,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:J,resourceDestinationString:N,resourceTitleString:B,resource:Q,setextHeading:l(P),setextHeadingLineSequence:_,setextHeadingText:C,strong:l(),thematicBreak:l()}};vT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(W){let ee={type:"root",children:[]};const ve={stack:[ee],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},_e=[];let Le=-1;for(;++Le<W.length;)if(W[Le][1].type==="listOrdered"||W[Le][1].type==="listUnordered")if(W[Le][0]==="enter")_e.push(Le);else{const Tn=_e.pop();Le=i(W,Tn,Le)}for(Le=-1;++Le<W.length;){const Tn=e[W[Le][0]];gT.call(Tn,W[Le][1].type)&&Tn[W[Le][1].type].call(Object.assign({sliceSerialize:W[Le][2].sliceSerialize},ve),W[Le][1])}if(ve.tokenStack.length>0){const Tn=ve.tokenStack[ve.tokenStack.length-1];(Tn[1]||zw).call(ve,void 0,Tn[0])}for(ee.position={start:Zr(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:Zr(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},Le=-1;++Le<e.transforms.length;)ee=e.transforms[Le](ee)||ee;return ee}function i(W,ee,ve){let _e=ee-1,Le=-1,Tn=!1,Li,vr,Yo,Ko;for(;++_e<=ve;){const en=W[_e];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?Le++:Le--,Ko=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Li&&!Ko&&!Le&&!Yo&&(Yo=_e),Ko=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ko=void 0}if(!Le&&en[0]==="enter"&&en[1].type==="listItemPrefix"||Le===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Li){let bs=_e;for(vr=void 0;bs--;){const yr=W[bs];if(yr[1].type==="lineEnding"||yr[1].type==="lineEndingBlank"){if(yr[0]==="exit")continue;vr&&(W[vr][1].type="lineEndingBlank",Tn=!0),yr[1].type="lineEnding",vr=bs}else if(!(yr[1].type==="linePrefix"||yr[1].type==="blockQuotePrefix"||yr[1].type==="blockQuotePrefixWhitespace"||yr[1].type==="blockQuoteMarker"||yr[1].type==="listItemIndent"))break}Yo&&(!vr||Yo<vr)&&(Li._spread=!0),Li.end=Object.assign({},vr?W[vr][1].start:en[1].end),W.splice(vr||_e,0,["exit",Li,en[2]]),_e++,ve++}if(en[1].type==="listItemPrefix"){const bs={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Li=bs,W.splice(_e,0,["enter",bs,en[2]]),_e++,ve++,Yo=void 0,Ko=!0}}}return W[ee][1]._spread=Tn,ve}function s(W,ee){return ve;function ve(_e){a.call(this,W(_e),_e),ee&&ee.call(this,_e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(W,ee,ve){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([ee,ve||void 0]),W.position={start:Zr(ee.start),end:void 0}}function l(W){return ee;function ee(ve){W&&W.call(this,ve),c.call(this,ve)}}function c(W,ee){const ve=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==W.type&&(ee?ee.call(this,W,_e[0]):(_e[1]||zw).call(this,W,_e[0]));else throw new Error("Cannot close `"+W.type+"` ("+Da({start:W.start,end:W.end})+"): it’s not open");ve.position.end=Zr(W.end)}function u(){return BU(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(W){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function p(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=W}function g(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=W}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/(\r?\n|\r)$/g,"")}function x(W){const ee=this.resume(),ve=this.stack[this.stack.length-1];ve.label=ee,ve.identifier=po(this.sliceSerialize(W)).toLowerCase()}function b(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function S(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function E(W){const ee=this.stack[this.stack.length-1];if(!ee.depth){const ve=this.sliceSerialize(W).length;ee.depth=ve}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function _(W){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function L(W){const ve=this.stack[this.stack.length-1].children;let _e=ve[ve.length-1];(!_e||_e.type!=="text")&&(_e=AA(),_e.position={start:Zr(W.start),end:void 0},ve.push(_e)),this.stack.push(_e)}function j(W){const ee=this.stack.pop();ee.value+=this.sliceSerialize(W),ee.position.end=Zr(W.end)}function M(W){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=ee.children[ee.children.length-1];ve.position.end=Zr(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ee.type)&&(L.call(this,W),j.call(this,W))}function z(){this.data.atHardBreak=!0}function R(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function I(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function $(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function D(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function F(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function T(W){const ee=this.sliceSerialize(W),ve=this.stack[this.stack.length-2];ve.label=FH(ee),ve.identifier=po(ee).toLowerCase()}function O(){const W=this.stack[this.stack.length-1],ee=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const _e=W.children;ve.children=_e}else ve.alt=ee}function N(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function B(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function Q(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function J(W){const ee=this.resume(),ve=this.stack[this.stack.length-1];ve.label=ee,ve.identifier=po(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function le(W){this.data.characterReferenceType=W.type}function ce(W){const ee=this.sliceSerialize(W),ve=this.data.characterReferenceType;let _e;ve?(_e=oT(ee,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=Lv(ee);const Le=this.stack[this.stack.length-1];Le.value+=_e}function X(W){const ee=this.stack.pop();ee.position.end=Zr(W.end)}function se(W){j.call(this,W);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(W)}function H(W){j.call(this,W);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(W)}function q(){return{type:"blockquote",children:[]}}function ne(){return{type:"code",lang:null,meta:null,value:""}}function ae(){return{type:"inlineCode",value:""}}function Ce(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Be(){return{type:"emphasis",children:[]}}function pe(){return{type:"heading",depth:0,children:[]}}function De(){return{type:"break"}}function Ve(){return{type:"html",value:""}}function Yn(){return{type:"image",title:null,url:"",alt:null}}function Bt(){return{type:"link",title:null,url:"",children:[]}}function uh(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function NA(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function _A(){return{type:"paragraph",children:[]}}function TA(){return{type:"strong",children:[]}}function AA(){return{type:"text",value:""}}function PA(){return{type:"thematicBreak"}}}function Zr(t){return{line:t.line,column:t.column,offset:t.offset}}function vT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?vT(t,r):HH(t,r)}}function HH(t,e){let n;for(n in e)if(gT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function zw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Da({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Da({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Da({start:e.start,end:e.end})+") is still open")}function WH(t){const e=this;e.parser=n;function n(r){return VH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function YH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function KH(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function GH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=qo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function QH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function JH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function yT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function eW(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yT(t,e);const i={src:qo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function tW(t,e){const n={src:qo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function nW(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function rW(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yT(t,e);const i={href:qo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function iW(t,e){const n={href:qo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function sW(t,e,n){const r=t.all(e),i=n?oW(n):xT(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function oW(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=xT(n[r])}return e}function xT(t){const e=t.spread;return e??t.children.length>1}function aW(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function lW(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cW(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function uW(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dW(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=jv(e.children[1]),l=J_(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function hW(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let g={type:"element",tagName:s,properties:f,children:[]};h&&(g.children=t.all(h),t.patch(h,g),g=t.applyData(h,g)),c.push(g)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function fW(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Fw=9,Bw=32;function pW(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Vw(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Vw(e.slice(i),i>0,!1)),s.join("")}function Vw(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===Fw||s===Bw;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===Fw||s===Bw;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function mW(t,e){const n={type:"text",value:pW(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function gW(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const vW={blockquote:qH,break:YH,code:KH,delete:GH,emphasis:ZH,footnoteReference:XH,heading:QH,html:JH,imageReference:eW,image:tW,inlineCode:nW,linkReference:rW,link:iW,listItem:sW,list:aW,paragraph:lW,root:cW,strong:uW,table:dW,tableCell:fW,tableRow:hW,text:mW,thematicBreak:gW,toml:Ac,yaml:Ac,definition:Ac,footnoteDefinition:Ac};function Ac(){}const wT=-1,oh=0,za=1,Zu=2,$v=3,zv=4,Fv=5,Bv=6,bT=7,ST=8,Uw=typeof self=="object"?self:globalThis,yW=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case oh:case wT:return n(o,i);case za:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Zu:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case $v:return n(new Date(o),i);case zv:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Fv:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Bv:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case bT:{const{name:a,message:l}=o;return n(new Uw[a](l),i)}case ST:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new Uw[s](o),i)};return r},Hw=t=>yW(new Map,t)(0),Ps="",{toString:xW}={},{keys:wW}=Object,ua=t=>{const e=typeof t;if(e!=="object"||!t)return[oh,e];const n=xW.call(t).slice(8,-1);switch(n){case"Array":return[za,Ps];case"Object":return[Zu,Ps];case"Date":return[$v,Ps];case"RegExp":return[zv,Ps];case"Map":return[Fv,Ps];case"Set":return[Bv,Ps];case"DataView":return[za,n]}return n.includes("Array")?[za,n]:n.includes("Error")?[bT,n]:[Zu,n]},Pc=([t,e])=>t===oh&&(e==="function"||e==="symbol"),bW=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=ua(o);switch(a){case oh:{let u=o;switch(l){case"bigint":a=ST,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([wT],o)}return i([a,u],o)}case za:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const u=[],h=i([a,u],o);for(const f of o)u.push(s(f));return h}case Zu:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const f of wW(o))(t||!Pc(ua(o[f])))&&u.push([s(f),s(o[f])]);return h}case $v:return i([a,o.toISOString()],o);case zv:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case Fv:{const u=[],h=i([a,u],o);for(const[f,p]of o)(t||!(Pc(ua(f))||Pc(ua(p))))&&u.push([s(f),s(p)]);return h}case Bv:{const u=[],h=i([a,u],o);for(const f of o)(t||!Pc(ua(f)))&&u.push(s(f));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},Ww=(t,{json:e,lossy:n}={})=>{const r=[];return bW(!(e||n),!!e,new Map,r)(t),r},Xu=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Hw(Ww(t,e)):structuredClone(t):(t,e)=>Hw(Ww(t,e));function SW(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function kW(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function CW(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||SW,r=t.options.footnoteBackLabel||kW,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),f=qo(h.toLowerCase());let p=0;const g=[],m=t.footnoteCounts.get(h);for(;m!==void 0&&++p<=m;){g.length>0&&g.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,p);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const x=w.children[w.children.length-1];x&&x.type==="text"?x.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...g)}else u.push(...g);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Xu(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const kT=function(t){if(t==null)return TW;if(typeof t=="function")return ah(t);if(typeof t=="object")return Array.isArray(t)?EW(t):NW(t);if(typeof t=="string")return _W(t);throw new Error("Expected function, string, or object as test")};function EW(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=kT(t[n]);return ah(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function NW(t){const e=t;return ah(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function _W(t){return ah(e);function e(n){return n&&n.type===t}}function ah(t){return e;function e(n,r,i){return!!(AW(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function TW(){return!0}function AW(t){return t!==null&&typeof t=="object"&&"type"in t}const CT=[],PW=!0,qw=!1,jW="skip";function RW(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=kT(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=CT,g,m,w;if((!e||s(l,c,u[u.length-1]||void 0))&&(p=MW(n(l,u)),p[0]===qw))return p;if("children"in l&&l.children){const v=l;if(v.children&&p[0]!==jW)for(m=(r?v.children.length:-1)+o,w=u.concat(v);m>-1&&m<v.children.length;){const x=v.children[m];if(g=a(x,m,w)(),g[0]===qw)return g;m=typeof g[1]=="number"?g[1]:m+o}}return p}}}function MW(t){return Array.isArray(t)?t:typeof t=="number"?[PW,t]:t==null?CT:[t]}function ET(t,e,n,r){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),RW(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const Cm={}.hasOwnProperty,IW={};function LW(t,e){const n=e||IW,r=new Map,i=new Map,s=new Map,o={...vW,...n.handlers},a={all:c,applyData:DW,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:OW,wrap:zW};return ET(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),a;function l(u,h){const f=u.type,p=a.handlers[f];if(Cm.call(a.handlers,f)&&p)return p(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:m,...w}=u,v=Xu(w);return v.children=a.all(u),v}return Xu(u)}return(a.options.unknownHandler||$W)(a,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const g=a.one(f[p],u);if(g){if(p&&f[p-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=Yw(g.value)),!Array.isArray(g)&&g.type==="element")){const m=g.children[0];m&&m.type==="text"&&(m.value=Yw(m.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function OW(t,e){t.position&&(e.position=xU(t))}function DW(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Xu(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function $W(t,e){const n=e.data||{},r="value"in e&&!(Cm.call(n,"hProperties")||Cm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function zW(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Yw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Kw(t,e){const n=LW(t,e),r=n.one(t,void 0),i=CW(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function FW(t,e){return t&&"run"in t?async function(n,r){const i=Kw(n,{file:r,...e});await t.run(i,r)}:function(n,r){return Kw(n,{file:r,...t||e})}}function Gw(t){if(t)throw t}var eu=Object.prototype.hasOwnProperty,NT=Object.prototype.toString,Zw=Object.defineProperty,Xw=Object.getOwnPropertyDescriptor,Qw=function(e){return typeof Array.isArray=="function"?Array.isArray(e):NT.call(e)==="[object Array]"},Jw=function(e){if(!e||NT.call(e)!=="[object Object]")return!1;var n=eu.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&eu.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||eu.call(e,i)},eb=function(e,n){Zw&&n.name==="__proto__"?Zw(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},tb=function(e,n){if(n==="__proto__")if(eu.call(e,n)){if(Xw)return Xw(e,n).value}else return;return e[n]},BW=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=tb(a,n),i=tb(e,n),a!==i&&(u&&i&&(Jw(i)||(s=Qw(i)))?(s?(s=!1,o=r&&Qw(r)?r:[]):o=r&&Jw(r)?r:{},eb(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&eb(a,{name:n,newValue:i}));return a};const Tf=pn(BW);function Em(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function VW(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?UW(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function UW(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Qn={basename:HW,dirname:WW,extname:qW,join:YW,sep:"/"};function HW(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Yl(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function WW(t){if(Yl(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qW(t){Yl(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function YW(...t){let e=-1,n;for(;++e<t.length;)Yl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":KW(n)}function KW(t){Yl(t);const e=t.codePointAt(0)===47;let n=GW(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function GW(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Yl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const ZW={cwd:XW};function XW(){return"/"}function Nm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function QW(t){if(typeof t=="string")t=new URL(t);else if(!Nm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return JW(t)}function JW(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Af=["history","path","basename","stem","extname","dirname"];class _T{constructor(e){let n;e?Nm(e)?n={path:e}:typeof e=="string"||e9(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":ZW.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Af.length;){const s=Af[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Af.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qn.basename(this.path):void 0}set basename(e){jf(e,"basename"),Pf(e,"basename"),this.path=Qn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Qn.dirname(this.path):void 0}set dirname(e){nb(this.basename,"dirname"),this.path=Qn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Qn.extname(this.path):void 0}set extname(e){if(Pf(e,"extname"),nb(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Nm(e)&&(e=QW(e)),jf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Qn.basename(this.path,this.extname):void 0}set stem(e){jf(e,"stem"),Pf(e,"stem"),this.path=Qn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new jt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Pf(t,e){if(t&&t.includes(Qn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Qn.sep+"`")}function jf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function nb(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function e9(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const t9=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},n9={}.hasOwnProperty;class Vv extends t9{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=VW()}copy(){const e=new Vv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Tf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(If("data",this.frozen),this.namespace[e]=n,this):n9.call(this.namespace,e)&&this.namespace[e]||void 0:e?(If("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jc(e),r=this.parser||this.Parser;return Rf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Rf("process",this.parser||this.Parser),Mf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=jc(e),l=r.parse(a);r.run(l,a,function(u,h,f){if(u||!h||!f)return c(u);const p=h,g=r.stringify(p,f);s9(g)?f.value=g:f.result=g,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Rf("processSync",this.parser||this.Parser),Mf("processSync",this.compiler||this.Compiler),this.process(e,i),ib("processSync","process",n),r;function i(s,o){n=!0,Gw(s),r=o}}run(e,n,r){rb(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=jc(n);i.run(e,l,c);function c(u,h,f){const p=h||e;u?a(u):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),ib("runSync","run",r),i;function s(o,a){Gw(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=jc(n),i=this.compiler||this.Compiler;return Mf("stringify",i),rb(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(If("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Tf(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[p,...g]=u;const m=r[f][1];Em(m)&&Em(p)&&(p=Tf(!0,m,p)),r[f]=[c,p,...g]}}}}const r9=new Vv().freeze();function Rf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Mf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function If(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rb(t){if(!Em(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ib(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jc(t){return i9(t)?t:new _T(t)}function i9(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function s9(t){return typeof t=="string"||o9(t)}function o9(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const a9="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",sb=[],ob={allowDangerousHtml:!0},l9=/^(https?|ircs?|mailto|xmpp)$/i,c9=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function u9(t){const e=d9(t),n=h9(t);return f9(e.runSync(e.parse(n),n),t)}function d9(t){const e=t.rehypePlugins||sb,n=t.remarkPlugins||sb,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...ob}:ob;return r9().use(WH).use(n).use(FW,r).use(e)}function h9(t){const e=t.children||"",n=new _T;return typeof e=="string"&&(n.value=e),n}function f9(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||p9;for(const u of c9)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+a9+u.id,void 0);return ET(t,c),CU(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in Ef)if(Object.hasOwn(Ef,p)&&Object.hasOwn(u.properties,p)){const g=u.properties[p],m=Ef[p];(m===null||m.includes(u.tagName))&&(u.properties[p]=l(String(g||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,f)),p&&f&&typeof h=="number")return a&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function p9(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||l9.test(t.slice(0,e))?t:""}const m9=()=>{const{categoryId:t,articleId:e}=vs(),n=vt(),{tg:r}=Qt(),i=on(l=>l.getArticleByIds),s=on(l=>l.getCategoryById),o=y.useMemo(()=>i(t||"",e||""),[t,e,i]),a=y.useMemo(()=>s(t||""),[t,s]);if(y.useEffect(()=>{const l=()=>n(`/faq/${t}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",l),k.log("[FaqArticlePage] Telegram BackButton shown and handler attached.")),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",l),k.log("[FaqArticlePage] Telegram BackButton hidden and handler removed."))}},[r,n,t]),!a||!(a.isActive??!0)||!o||!o.content){const l=!a||!(a.isActive??!0)?`Категория FAQ "${t}" не найдена или неактивна.`:`Статья FAQ "${e}" не найдена или не имеет контента.`;return d.jsx("div",{className:"p-4 text-center",children:d.jsx(gt,{message:l})})}return d.jsxs("div",{className:"p-4 pb-6 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-4 flex-shrink-0 border-b pb-4",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:o.title,children:o.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx("div",{className:U("flex-grow overflow-y-auto no-scrollbar","prose prose-sm dark:prose-invert","max-w-none","prose-headings:font-semibold prose-a:text-primary hover:prose-a:underline","prose-li:my-1 prose-p:leading-relaxed","prose-strong:font-semibold","prose-headings:mt-6 prose-headings:mb-2 first:prose-headings:mt-0","prose-ul:pl-5 prose-ol:pl-5"),children:d.jsx(u9,{children:o.content})})]})},g9=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(""),[i,s]=y.useState(!1),{toast:o}=_n(),a=vt(),l=er(f=>f.login),c=Mt(f=>f.login),u=async()=>{var f;s(!0);try{k.log("[AdminLogin] Attempting login via /Account/LoginByLogPassPair...");const p=await PL(t,n);if(p.isSuccess&&((f=p.resultObject)!=null&&f.jwt))k.log("[AdminLogin] API login successful. Setting user and admin state."),c(p.resultObject.userId,p.resultObject.jwt,null),l(),o({title:"Успешный вход",description:"Добро пожаловать, администратор!",variant:"success"}),a("/admin/panel");else throw new Error(p.errorMessage||"Не удалось войти. Проверьте логин и пароль.")}catch(p){k.error("[AdminLogin] Login failed:",p),o({title:"Ошибка входа",description:p.message||"Произошла неизвестная ошибка.",variant:"destructive"}),s(!1)}},h=t.length>0&&n.length>0&&!i;return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40",children:d.jsxs(St,{className:"w-full max-w-sm shadow-lg rounded-xl",children:[d.jsxs(mr,{className:"items-center text-center space-y-2 pt-8 pb-6",children:[d.jsx(Vk,{className:"h-12 w-12 text-primary mb-2"}),d.jsx(Vr,{className:"text-2xl font-bold",children:"Вход для администратора"}),d.jsx(Nd,{children:"Введите учетные данные"})]}),d.jsxs(Xt,{className:"space-y-5 px-6 pb-8",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(at,{htmlFor:"username",children:"Логин"}),d.jsx($n,{id:"username",type:"text",placeholder:"Ваш логин",value:t,onChange:f=>e(f.target.value),disabled:i,autoComplete:"username"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(at,{htmlFor:"password",children:"Пароль"}),d.jsx($n,{id:"password",type:"password",placeholder:"••••••••",value:n,onChange:f=>r(f.target.value),disabled:i,autoComplete:"current-password"})]}),d.jsx(ke,{className:"w-full h-11 text-base font-semibold mt-4",onClick:u,disabled:!h,children:i?d.jsx(Ee,{size:"sm"}):"Войти"}),d.jsx(ke,{variant:"link",className:"text-xs text-muted-foreground hover:text-primary h-auto p-0 w-full mt-2",onClick:()=>a("/login"),children:"Вернуться к обычному входу"})]})]})})};var Uv="Switch",[v9,q8]=Ft(Uv),[y9,x9]=v9(Uv),TT=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Pe(e,b=>p(b)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Nn({prop:i,defaultProp:s,onChange:c});return d.jsxs(y9,{scope:n,checked:v,disabled:a,children:[d.jsx(ue.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":jT(v),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onClick:de(t.onClick,b=>{x(S=>!S),w&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),w&&d.jsx(w9,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});TT.displayName=Uv;var AT="SwitchThumb",PT=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=x9(AT,n);return d.jsx(ue.span,{"data-state":jT(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});PT.displayName=AT;var w9=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=zd(n),a=Dd(e);return y.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function jT(t){return t?"checked":"unchecked"}var RT=TT,b9=PT;const Hv=y.forwardRef(({className:t,...e},n)=>d.jsx(RT,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:d.jsx(b9,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Hv.displayName=RT.displayName;var MT="AlertDialog",[S9,Y8]=Ft(MT,[KE]),Wr=KE(),IT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Wr(e);return d.jsx(uN,{...r,...n,modal:!0})};IT.displayName=MT;var k9="AlertDialogTrigger",LT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(l4,{...i,...r,ref:e})});LT.displayName=k9;var C9="AlertDialogPortal",OT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Wr(e);return d.jsx(dN,{...r,...n})};OT.displayName=C9;var E9="AlertDialogOverlay",DT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(iv,{...i,...r,ref:e})});DT.displayName=E9;var mo="AlertDialogContent",[N9,_9]=S9(mo),$T=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Wr(n),o=y.useRef(null),a=Pe(e,o),l=y.useRef(null);return d.jsx(i4,{contentName:mo,titleName:zT,docsSlug:"alert-dialog",children:d.jsx(N9,{scope:n,cancelRef:l,children:d.jsxs(sv,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:de(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(nC,{children:r}),d.jsx(A9,{contentRef:o})]})})})});$T.displayName=mo;var zT="AlertDialogTitle",FT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(ov,{...i,...r,ref:e})});FT.displayName=zT;var BT="AlertDialogDescription",VT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(av,{...i,...r,ref:e})});VT.displayName=BT;var T9="AlertDialogAction",UT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(Wd,{...i,...r,ref:e})});UT.displayName=T9;var HT="AlertDialogCancel",WT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=_9(HT,n),s=Wr(n),o=Pe(e,i);return d.jsx(Wd,{...s,...r,ref:o})});WT.displayName=HT;var A9=({contentRef:t})=>{const e=`\`${mo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mo}\` by passing a \`${BT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},P9=IT,j9=LT,R9=OT,qT=DT,YT=$T,KT=UT,GT=WT,ZT=FT,XT=VT;const QT=P9,JT=j9,M9=R9,eA=y.forwardRef(({className:t,...e},n)=>d.jsx(qT,{className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));eA.displayName=qT.displayName;const Wv=y.forwardRef(({className:t,...e},n)=>d.jsxs(M9,{children:[d.jsx(eA,{}),d.jsx(YT,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Wv.displayName=YT.displayName;const qv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});qv.displayName="AlertDialogHeader";const Yv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Yv.displayName="AlertDialogFooter";const Kv=y.forwardRef(({className:t,...e},n)=>d.jsx(ZT,{ref:n,className:U("text-lg font-semibold",t),...e}));Kv.displayName=ZT.displayName;const Gv=y.forwardRef(({className:t,...e},n)=>d.jsx(XT,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Gv.displayName=XT.displayName;const Zv=y.forwardRef(({className:t,...e},n)=>d.jsx(KT,{ref:n,className:U(zl(),t),...e}));Zv.displayName=KT.displayName;const Xv=y.forwardRef(({className:t,...e},n)=>d.jsx(GT,{ref:n,className:U(zl({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xv.displayName=GT.displayName;const I9=async t=>{const e="Failed to trigger Moex assets update.";k.log("[API/Admin] Triggering Moex assets update...");try{const n=await et.post("/api/Admin/FillDatabaseWithMoexAssets",null,{signal:t==null?void 0:t.signal});return k.log("[API/Admin] Update Moex Assets response:",n==null?void 0:n.data),lt(n,e)}catch(n){return ct(n,e)}},L9=async(t,e)=>{const n="Failed to get system variables.";if(!t||t.length===0)return{isSuccess:!0,errorMessage:null,resultObject:[]};k.log("[API/SystemVariables] Getting variables:",t);try{const r={SystemVariableNames:t},i=await et.post("/api/SystemVariables/GetSystemVariables",r,{signal:e==null?void 0:e.signal});k.log("[API/SystemVariables] Get response raw data:",i==null?void 0:i.data);const s=lt(i,n);return s.isSuccess&&s.resultObject===null&&(k.warn("[API/SystemVariables] getSystemVariables success but resultObject is null. Normalizing to empty array."),s.resultObject=[]),k.log("[API/SystemVariables] Get response processed:",s),s}catch(r){return ct(r,n)}},O9=async(t,e)=>{const n="Failed to set system variables.";if(!t||t.length===0)return{isSuccess:!1,errorMessage:"No variables provided to set.",resultObject:null};k.log("[API/SystemVariables] Setting variables:",t);try{const r={SystemVariables:t},i=await et.post("/api/SystemVariables/SetSystemVariables",r,{signal:e==null?void 0:e.signal});return k.log("[API/SystemVariables] Set response:",i==null?void 0:i.data),lt(i,n)}catch(r){return ct(r,n)}},wr=[{name:"telegramLink",backendName:"chat_link",label:"Ссылка на Telegram чат",placeholder:"https://t.me/your_chat",type:"url"}],D9=()=>{var se;const[t,e]=y.useState(!1),[n,r]=y.useState({}),[i,s]=y.useState({}),[o,a]=y.useState(!0),[l,c]=y.useState(null),[u,h]=y.useState(!1),{toast:f}=_n(),p=vt(),g=vn(),m=er(H=>H.logout),w=Mt(H=>H.logout),{tg:v}=Qt(),{categories:x,toggleCategoryActive:b,addCategory:S,deleteCategory:E,updateCategoryTitle:C}=on(),[_,P]=y.useState(""),[L,j]=y.useState(!1),[M,z]=y.useState(null),[R,I]=y.useState(""),$=y.useCallback(async H=>{const q=wr.map(ne=>ne.backendName||ne.name);if(q.length===0){a(!1);return}k.log("[AdminPanelPage] Fetching system variables (backend names):",q),a(!0),c(null);try{const ne=await L9(q,{signal:H});if(!H.aborted)if(ne.isSuccess&&ne.resultObject!==null){const ae={};wr.forEach(Ce=>{var De;const Be=Ce.backendName||Ce.name,pe=(De=ne.resultObject)==null?void 0:De.find(Ve=>Ve.name===Be);ae[Ce.name]=(pe==null?void 0:pe.value)||""}),r(ae),s(ae),k.log("[AdminPanelPage] System variables fetched (UI state):",ae)}else if(ne.isSuccess&&ne.resultObject===null){k.warn("[AdminPanelPage] System variables fetch successful but resultObject is null. Setting defaults.");const ae={};wr.forEach(Ce=>ae[Ce.name]=""),r(ae),s(ae)}else throw new Error(ne.errorMessage||"Не удалось загрузить системные переменные.")}catch(ne){if(ne.name==="AbortError")k.log("[AdminPanelPage fetchSystemVariables] Request aborted.");else if(!H.aborted){k.error("[AdminPanelPage] Error fetching system variables:",ne),c(ne.message);const ae={};wr.forEach(Ce=>ae[Ce.name]=""),r(ae),s(ae)}}finally{H.aborted||a(!1)}},[]);y.useEffect(()=>{const H=new AbortController;return $(H.signal),()=>{H.abort()}},[$]),y.useEffect(()=>{var ne;const H=((ne=g.state)==null?void 0:ne.fromProfile)===!0,q=()=>p("/profile");return H&&v?(v.BackButton.show(),v.onEvent("backButtonClicked",q),k.log("[AdminPanelPage] Telegram BackButton shown and handler attached.")):v&&(v.BackButton.hide(),k.log("[AdminPanelPage] Telegram BackButton hidden.")),()=>{v&&(v.BackButton.hide(),v.offEvent("backButtonClicked",q),k.log("[AdminPanelPage] Telegram BackButton hidden and handler removed."))}},[v,p,(se=g.state)==null?void 0:se.fromProfile]);const D=async()=>{e(!0),k.log("[AdminPanelPage] Triggering Moex assets update...");try{const H=await I9();if(H.isSuccess)f({title:"Обновление запущено",description:"База данных активов обновляется в фоновом режиме.",variant:"success"});else throw new Error(H.errorMessage||"Не удалось запустить обновление.")}catch(H){k.error("[AdminPanelPage] Error triggering Moex update:",H),f({title:"Ошибка обновления",description:H.message,variant:"destructive"})}finally{e(!1)}},F=(H,q)=>{r(ne=>({...ne,[H]:q}))},T=async()=>{const H=wr.filter(q=>n[q.name]!==i[q.name]).map(q=>({Name:q.backendName||q.name,Value:n[q.name]}));if(H.length===0){f({title:"Нет изменений",description:"Значения системных переменных не были изменены.",duration:2e3});return}h(!0),c(null),k.log("[AdminPanelPage] Saving system variables payload:",H);try{const q=await O9(H);if(q.isSuccess){const ne={...i};H.forEach(ae=>{const Ce=wr.find(Be=>(Be.backendName||Be.name)===ae.Name);Ce&&(ne[Ce.name]=ae.Value)}),s(ne),f({title:"Настройки сохранены",description:`Обновлено ${H.length} переменных.`,variant:"success"})}else throw new Error(q.errorMessage||"Не удалось сохранить настройки.")}catch(q){k.error("[AdminPanelPage] Error saving system variables:",q),c(q.message),f({title:"Ошибка сохранения",description:q.message,variant:"destructive"})}finally{h(!1)}},O=()=>{k.log("[AdminPanelPage] Logging out..."),m(),w(),f({title:"Выход выполнен",duration:2e3}),p("/login")},N=y.useCallback(H=>{b(H);const q=on.getState().categories.find(ne=>ne.id===H);f({title:`Категория "${(q==null?void 0:q.title)||H}"`,description:`Теперь ${q!=null&&q.isActive?"активна":"скрыта"}`,duration:2e3})},[b,f]),B=y.useCallback(()=>{const H=_.trim();H?(j(!0),S(H)?(f({title:"Категория добавлена",description:`"${H}"`,variant:"success"}),P("")):f({title:"Ошибка",description:"Не удалось добавить категорию.",variant:"destructive"}),j(!1)):f({title:"Ошибка",description:"Название категории не может быть пустым.",variant:"destructive"})},[_,S,f]),Q=y.useCallback((H,q)=>{E(H),f({title:"Категория удалена",description:`"${q}"`,variant:"success"})},[E,f]),A=y.useCallback((H,q)=>{z(H),I(q)},[]),J=y.useCallback(()=>{z(null),I("")},[]),le=y.useCallback(()=>{M&&R.trim()?(C(M,R),f({title:"Название обновлено",variant:"success",duration:1500}),J()):f({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[M,R,C,f,J]),ce=y.useCallback(H=>{p(`/admin/faq/${H}`)},[p]),X=wr.some(H=>n[H.name]!==i[H.name]);return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40 overflow-y-auto",children:d.jsxs(St,{className:"w-full max-w-lg shadow-lg rounded-xl my-auto",children:[d.jsxs(mr,{className:"items-center text-center pt-6 pb-4 border-b relative",children:[" ",d.jsx(Vr,{className:"text-xl font-bold",children:"Панель администратора"})," ",d.jsx(Nd,{children:"Управление приложением"})," "]}),d.jsxs(Xt,{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(at,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx(QL,{className:"h-5 w-5 text-primary"})," База данных активов "]}),d.jsxs(ke,{className:"w-full h-10",onClick:D,disabled:t,children:[" ",t?d.jsx(Ee,{size:"sm"}):"Обновить активы с МосБиржи"," "]})]}),d.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-card",children:[d.jsxs(at,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx(hO,{className:"h-5 w-5 text-primary"})," Системные настройки "]}),o?d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ee,{})}):l?d.jsx(gt,{message:l}):wr.map(H=>d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(at,{htmlFor:H.name,children:H.label}),d.jsx($n,{id:H.name,type:H.type||"text",value:n[H.name]??"",onChange:q=>F(H.name,q.target.value),placeholder:H.placeholder||"",disabled:u,className:"h-10"})]},H.name)),!o&&!l&&wr.length>0&&d.jsx(ke,{className:"w-full h-10 mt-3",onClick:T,disabled:u||!X,children:u?d.jsx(Ee,{size:"sm"}):"Сохранить настройки"})]}),d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(at,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx($u,{className:"h-5 w-5 text-primary"})," Управление FAQ "]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 -mr-2",children:x.map(H=>d.jsxs("div",{className:U("flex items-center justify-between gap-2 p-2 rounded hover:bg-muted/50",!H.isActive&&"opacity-60"),children:[d.jsxs("div",{className:U("flex-grow mr-1 min-w-0"),children:[" ",M===H.id?d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx($n,{value:R,onChange:q=>I(q.target.value),className:"h-8 text-sm flex-grow",autoFocus:!0,onKeyDown:q=>q.key==="Enter"&&le()}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-success flex-shrink-0",onClick:le,children:d.jsx(jg,{size:16})})," ",d.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground flex-shrink-0",onClick:J,children:d.jsx(Ed,{size:16})})," "]}):d.jsxs("span",{className:"text-sm truncate cursor-pointer group block",onClick:()=>A(H.id,H.title),children:[" ",H.title,d.jsx(Bk,{className:"h-3 w-3 inline-block ml-1 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]})]}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsx(Hv,{id:`faq-active-${H.id}`,checked:H.isActive??!0,onCheckedChange:()=>N(H.id),className:"mr-2 scale-75","aria-label":`Активность категории ${H.title}`}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-blue-600 hover:text-blue-700",onClick:()=>ce(H.id),children:[d.jsx(Uk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать категорию ",H.title]})]}),d.jsxs(QT,{children:[d.jsx(JT,{asChild:!0,children:d.jsxs("span",{children:[" ",d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",children:[d.jsx(Hk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить категорию ",H.title]})]})]})}),d.jsxs(Wv,{children:[d.jsxs(qv,{children:[d.jsx(Kv,{children:"Удалить категорию?"}),d.jsxs(Gv,{children:['Вы уверены, что хотите удалить категорию "',H.title||"Без названия",'" и все статьи в ней? Это действие необратимо.']})]}),d.jsxs(Yv,{children:[d.jsx(Xv,{children:"Отмена"}),d.jsx(Zv,{onClick:()=>Q(H.id,H.title||""),className:zl({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},H.id))}),x.length===0?d.jsx("p",{className:"p-4 text-center text-muted-foreground",children:"Нет категорий FAQ."}):null,d.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[d.jsx($n,{type:"text",placeholder:"Название новой категории...",value:_,onChange:H=>P(H.target.value),className:"h-9 flex-grow",disabled:L,onKeyDown:H=>H.key==="Enter"&&B()}),d.jsx(ke,{size:"sm",onClick:B,disabled:L||!_.trim(),className:"gap-1 h-9",children:L?d.jsx(Ee,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx($k,{size:16})," Добавить"]})})]})]}),d.jsxs(ke,{variant:"outline",className:"w-full mt-4 h-10",onClick:O,children:[" ",d.jsx(Fk,{className:"h-4 w-4 mr-2"})," Выйти из панели "]})]})]})})},tA=y.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));tA.displayName="Textarea";const $9=({isOpen:t,onClose:e,categoryId:n,article:r})=>{const{toast:i}=_n(),{updateArticle:s,addArticle:o}=on(),[a,l]=y.useState(""),[c,u]=y.useState(""),[h,f]=y.useState(!1),p=r!=null;y.useEffect(()=>{t?(l(p?(r==null?void 0:r.title)??"":""),u(p?(r==null?void 0:r.content)??"":""),k.log(`[FaqArticleEditModal] Initialized. Mode: ${p?"Edit":"Create"}. Article ID: ${r==null?void 0:r.id}`)):(l(""),u(""))},[t,r,p]);const g=y.useCallback(async()=>{if(!a.trim()){i({title:"Ошибка",description:"Заголовок статьи не может быть пустым.",variant:"destructive"});return}f(!0);try{if(p&&r){k.log(`[FaqArticleEditModal] Updating article ${r.id}`);const w={},v=a.trim();v&&v!==((r==null?void 0:r.title)??"")&&(w.title=v),c!==((r==null?void 0:r.content)??"")&&(w.content=c),Object.keys(w).length>0&&s(n,r.id,w),i({title:"Сохранено",description:`Статья "${v}" обновлена.`,variant:"success"})}else{if(p)throw new Error("Ошибка: Попытка обновить несуществующую статью.");if(k.log(`[FaqArticleEditModal] Adding new article to category ${n}`),o(n,a,c))i({title:"Статья добавлена",description:`"${a.trim()}"`,variant:"success"});else throw new Error("Не удалось добавить статью в стор.")}await new Promise(w=>setTimeout(w,200)),e()}catch(w){k.error("[FaqArticleEditModal] Save error:",w),i({title:"Ошибка сохранения",description:w.message||"Не удалось сохранить изменения.",variant:"destructive"})}finally{f(!1)}},[p,r,n,a,c,s,o,e,i]),m=p?`Измените заголовок и содержание статьи "${(r==null?void 0:r.title)||"(загрузка...)"}".`:"Создайте новую статью в категории.";return d.jsx(Pa,{open:t,onOpenChange:e,children:d.jsxs(ao,{className:"max-w-3xl w-[90vw] h-[85vh] flex flex-col",children:[d.jsxs(lo,{children:[d.jsx(co,{children:p?"Редактировать статью":"Добавить новую статью"}),d.jsxs(ja,{children:[m," Используйте Markdown."]})]}),d.jsxs("div",{className:"grid gap-4 py-4 flex-grow overflow-y-auto pr-6 -mr-6 pl-1",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx(at,{htmlFor:"article-title",children:"Заголовок"}),d.jsx($n,{id:"article-title",value:a,onChange:w=>l(w.target.value),placeholder:"Введите заголовок статьи...",disabled:h,className:"text-base"})]}),d.jsxs("div",{className:"space-y-1 flex flex-col flex-grow",children:[d.jsx(at,{htmlFor:"article-content",children:"Содержание (Markdown)"}),d.jsx(tA,{id:"article-content",value:c,onChange:w=>u(w.target.value),placeholder:"Введите содержание статьи...",disabled:h,className:"text-sm font-mono flex-grow"})]})]}),d.jsxs(lv,{className:"mt-4 flex-shrink-0 pt-4 border-t",children:[d.jsx(hN,{asChild:!0,children:d.jsx(ke,{type:"button",variant:"outline",disabled:h,children:"Отмена"})}),d.jsx(ke,{type:"button",onClick:g,disabled:h||!a.trim(),children:h?d.jsx(Ee,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx(jg,{size:16,className:"mr-1.5"})," ",p?"Сохранить":"Добавить"]})})]})]})})},z9=()=>{const{categoryId:t}=vs(),e=vt(),{toast:n}=_n(),{deleteArticle:r,updateCategoryTitle:i,toggleCategoryActive:s}=on(),o=on.persist.hasHydrated(),{tg:a}=Qt(),l=on(R=>{if(!o||!t)return;const I=R.categories.find($=>$.id===t);return I?{id:I.id,title:I.title,articles:I.articles,isActive:I.isActive??!0}:void 0},io),[c,u]=y.useState(void 0),[h,f]=y.useState(!1),[p,g]=y.useState(null),[m,w]=y.useState("");y.useEffect(()=>{f(c!==void 0)},[c]),y.useEffect(()=>{const R=()=>e("/admin/panel");return a&&(a.BackButton.show(),a.onEvent("backButtonClicked",R),k.log("[AdminFaqCategoryPage] Telegram BackButton shown and handler attached.")),()=>{a&&(a.BackButton.hide(),a.offEvent("backButtonClicked",R),k.log("[AdminFaqCategoryPage] Telegram BackButton hidden and handler removed."))}},[a,e]);const v=y.useCallback(R=>{u(R)},[]),x=y.useCallback(()=>{u(null)},[]),b=y.useCallback((R,I)=>{t&&(r(t,R),n({title:"Статья удалена",description:`"${I}"`,variant:"success"}))},[t,r,n]),S=y.useCallback(()=>{u(void 0)},[]),E=y.useCallback((R,I)=>{g(R),w(I)},[]),C=y.useCallback(()=>{g(null),w("")},[]),_=y.useCallback(()=>{p&&m.trim()?(i(p,m),n({title:"Название обновлено",variant:"success",duration:1500}),C()):n({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[p,m,i,n,C]),P=y.useCallback(R=>{s(R);const I=on.getState().categories.find($=>$.id===R);n({title:`Категория "${(I==null?void 0:I.title)||R}"`,description:`Теперь ${I!=null&&I.isActive?"активна":"скрыта"}`,duration:2e3})},[s,n]);if(!o)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})});if(!l)return d.jsx("div",{className:"p-4 text-center",children:d.jsx(gt,{message:`Категория FAQ "${t}" не найдена.`})});const{id:L,title:j,articles:M,isActive:z}=l;return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",p===L?d.jsxs("div",{className:"flex items-center gap-1 flex-grow mx-10",children:[d.jsx($n,{value:m,onChange:R=>w(R.target.value),className:"h-9 text-lg font-semibold text-center flex-grow",autoFocus:!0,onKeyDown:R=>R.key==="Enter"&&_()}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-success",onClick:_,children:d.jsx(jg,{size:18})}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground",onClick:C,children:d.jsx(Ed,{size:18})})]}):d.jsxs("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)] cursor-pointer group",title:`Редактировать название "${j}"`,onClick:()=>E(L,j),children:[j,d.jsx(Bk,{className:"h-3.5 w-3.5 inline-block ml-1.5 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]}),d.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 flex items-center gap-1",children:d.jsx(Hv,{id:`faq-active-${L}`,checked:z,onCheckedChange:()=>P(L),"aria-label":`Активность категории ${j}`})})]}),d.jsxs(St,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:[d.jsx(mr,{className:"px-4 pt-4 pb-2 border-b",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Vr,{className:"text-base",children:"Статьи в категории"}),d.jsxs(ke,{size:"sm",variant:"outline",onClick:x,className:"gap-1",children:[d.jsx($k,{size:16})," Добавить статью"]})]})}),d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:M.length>0?d.jsx("div",{className:"divide-y divide-border/60",children:M.map(R=>d.jsxs("div",{className:U("flex items-center justify-between gap-2 p-3 hover:bg-muted/50",!z&&"opacity-60"),children:[d.jsx("span",{className:"text-sm flex-grow mr-2 truncate",children:R.title}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-700",onClick:()=>v(R),children:[d.jsx(Uk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать статью ",R.title]})]}),d.jsxs(QT,{children:[d.jsx(JT,{asChild:!0,children:d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:[d.jsx(Hk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить статью ",R.title]})]})}),d.jsxs(Wv,{children:[d.jsxs(qv,{children:[d.jsx(Kv,{children:"Удалить статью?"}),d.jsxs(Gv,{children:['Вы уверены, что хотите удалить статью "',R.title||"Без названия",'"? Это действие необратимо.']})]}),d.jsxs(Yv,{children:[d.jsx(Xv,{children:"Отмена"}),d.jsx(Zv,{onClick:()=>b(R.id,R.title||""),className:zl({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},R.id))}):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})]}),L&&d.jsx($9,{isOpen:h,onClose:S,categoryId:L,article:c})]})},F9=()=>{const{id:t}=vs(),e=Number(t),n=vt(),{tg:r}=Qt(),[i,s]=y.useState(null),[o,a]=y.useState("1M"),[l,c]=y.useState("line"),[u,h]=y.useState(null),[f,p]=y.useState(!0),[g,m]=y.useState(!0),[w,v]=y.useState(null),[x,b]=y.useState(null);y.useEffect(()=>{const C=new AbortController,_=C.signal;return(async()=>{if(!e||isNaN(e)){v("Неверный ID актива."),p(!1);return}p(!0),v(null);try{const L=await Tk(e,{signal:_});_.aborted||(L.isSuccess&&L.resultObject?s(L.resultObject):v(L.errorMessage||`Актив ${e} не найден.`))}catch(L){L.name==="AbortError"?k.log(`[FullscreenChartPage fetchAsset] Request aborted for ID ${e}.`):_.aborted||v(L.message||"Ошибка загрузки данных актива.")}finally{_.aborted||p(!1)}})(),()=>{k.log(`[FullscreenChartPage fetchAsset] Cleanup: Aborting fetch for ID ${e}.`),C.abort()}},[e]),y.useEffect(()=>{const C=new AbortController,_=C.signal;return(async()=>{if(!(i!=null&&i.id)){h([]),m(!1),b(null);return}m(!0),b(null),k.log(`[FullscreenChartPage] Fetching history for asset ${i.id}, period ${o}`);try{const L=await Pk(i.id,o,{signal:_});_.aborted||(L.isSuccess&&Array.isArray(L.resultObject)?(h(L.resultObject),b(null),k.log(`[FullscreenChartPage] History loaded successfully. Points: ${L.resultObject.length}`)):(b(L.errorMessage||`Не удалось загрузить историю для ${o}.`),h([])))}catch(L){L.name==="AbortError"?k.log(`[FullscreenChartPage fetchChartHistory] Fetch aborted for period ${o}`):_.aborted||(b(L.message||"Ошибка загрузки истории цен."),h([]))}finally{_.aborted||m(!1)}})(),()=>{k.log(`[FullscreenChartPage fetchChartHistory] Cleanup: Aborting fetch for period ${o}`),C.abort()}},[i,o]),y.useEffect(()=>{const C=()=>n(`/asset/${e}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",C),k.log("[FullscreenChartPage] Telegram BackButton shown and handler attached.")),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",C),k.log("[FullscreenChartPage] Telegram BackButton hidden and handler removed."))}},[r,n,e]);const S=y.useMemo(()=>o==="1D"?"line":l,[o,l]),E=()=>d.jsxs("div",{className:"relative h-full w-full",children:[d.jsx("div",{className:U("absolute inset-0 transition-opacity duration-200",g?"opacity-50 pointer-events-none":"opacity-100"),children:u&&u.length>0?d.jsx(j_,{data:u,chartType:S,period:o,assetDecimals:i==null?void 0:i.decimals}):!g&&!x?d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Нет данных о цене за этот период."}):null}),g&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/30 z-10",children:d.jsx(Ee,{size:"lg"})}),x&&!g&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 z-10",children:d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[" ",d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",x," "]})})]});return f?d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})}):i?d.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0 h-9",children:[d.jsx("div",{className:"w-9"})," ",d.jsxs("div",{className:"text-center",children:[" ",d.jsxs("h1",{className:"text-base font-semibold truncate",children:[i.ticker," - ",Ao(i)]})," "]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(ke,{variant:S==="line"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("line"),title:"Линейный график",children:d.jsx(zk,{className:"h-4 w-4"})}),d.jsx(ke,{variant:S==="candle"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("candle"),title:"Свечной график",disabled:o==="1D",children:d.jsx(Ik,{className:"h-4 w-4"})})]})]}),d.jsx("div",{className:"mb-4 flex-shrink-0",children:d.jsx(rh,{defaultValue:o,onValueChange:C=>a(C),className:"w-full",children:d.jsxs(Wl,{className:"grid grid-cols-6 h-9 w-full",children:[" ",d.jsx(_t,{value:"1D",className:"text-xs h-full",children:"1D"})," ",d.jsx(_t,{value:"1W",className:"text-xs h-full",children:"1W"})," ",d.jsx(_t,{value:"1M",className:"text-xs h-full",children:"1M"})," ",d.jsx(_t,{value:"1Y",className:"text-xs h-full",children:"1Y"})," ",d.jsx(_t,{value:"5Y",className:"text-xs h-full",children:"5Y"})," ",d.jsx(_t,{value:"ALL",className:"text-xs h-full",children:"All"})," "]})})}),d.jsxs("div",{className:"flex-grow overflow-hidden",children:[" ",E()," "]})]}):d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(gt,{message:w||`Актив с ID ${e} не найден.`})," "]})};Me.extend(Dl);Me.extend($l);Me.extend(cv);Me.locale("ru");const B9=t=>{const e=t.split(/:: |\n/);return e.length>1?e.map((n,r)=>{const i=n.trim();if(!i)return null;const s=i.match(/^(.+?):\s*(.*)$/);if(s){const o=s[1].replace(/\.$/,"").trim(),a=s[2];return d.jsxs("div",{className:"flex",children:[" ",d.jsxs("span",{className:"text-muted-foreground mr-1",children:[o,":"]})," ",d.jsx("span",{className:"flex-1",children:a})," "]},r)}return d.jsx("div",{children:i},r)}).filter(Boolean):t},V9=t=>t.match(/^Покупка\s+/i)?"Покупка":t.match(/^Продажа\s+/i)?"Продажа":t,ab=80,lb=5,U9=({notification:t,currentFilter:e})=>{const{markAsRead:n,isMarkingAsRead:r}=Ci(),{toast:i}=_n(),s=!t.readByUserAt,o=r.has(t.id),a=y.useRef(null),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),h=y.useRef(!1),f=y.useRef(!1),[p,g]=y.useState(0),[m,w]=y.useState(!1),[v,x]=y.useState(!1),[b,S]=y.useState(!1),[E,C]=y.useState(!1),_=y.useCallback(async N=>{if(!s||o||v)return;k.log(`[NotificationItem handleMarkRead] Attempting markAsRead for ${t.id} from ${N}`),await n(t.id)?(k.log(`[NotificationItem handleMarkRead] Mark as read successful for ${t.id}.`),e===!1?(k.log("[NotificationItem handleMarkRead] Current filter is 'unread', starting animation."),x(!0)):(k.log("[NotificationItem handleMarkRead] Current filter is NOT 'unread', skipping animation."),N==="swipe"&&g(0))):(k.warn(`[NotificationItem handleMarkRead] Mark as read failed for ${t.id}. Animating back (if swipe).`),i({title:"Ошибка",description:"Не удалось отметить уведомление прочитанным.",variant:"destructive"}),N==="swipe"&&(w(!1),g(0)))},[t.id,s,o,v,n,i,e]),P=y.useCallback(N=>{if(!s||o||v||E||N.touches.length>1){l.current=null,c.current=null;return}l.current=N.touches[0].clientX,c.current=N.touches[0].clientY,u.current=l.current,h.current=!1,f.current=!1,w(!0),k.debug(`[NotificationItem TouchStart] Start X: ${l.current}, Y: ${c.current} for ${t.id}`)},[s,o,v,E,t.id]),L=y.useCallback(N=>{if(l.current===null||c.current===null||!m||o||v||E)return;u.current=N.touches[0].clientX;const B=N.touches[0].clientY,Q=u.current-l.current,A=B-c.current;if(!h.current&&Math.abs(Q)>lb&&Math.abs(Q)>Math.abs(A))h.current=!0,k.debug(`[NotificationItem TouchMove] Swipe intent confirmed (horizontal) for ${t.id}`);else if(!h.current&&Math.abs(A)>=lb&&Math.abs(A)>Math.abs(Q)){k.debug(`[NotificationItem TouchMove] Vertical scroll detected, cancelling swipe for ${t.id}`),w(!1),l.current=null,c.current=null;return}if(h.current){const J=Math.max(-100,Math.min(0,Q));g(J)}},[m,o,v,E]),j=y.useCallback(()=>{const N=h.current,B=m;if(w(!1),l.current=null,c.current=null,h.current=!1,!B){k.debug("[NotificationItem TouchEnd] Swipe was not active. Resetting translate."),p!==0&&g(0);return}const Q=p;k.debug(`[NotificationItem TouchEnd] End: finalTranslateX=${Q}, wasIntentionalSwipe=${N} for ${t.id}`),N&&Q<=-80?(k.log(`[NotificationItem TouchEnd] Threshold met for ${t.id}. Triggering handleMarkRead from swipe.`),f.current=!0,_("swipe")):N?(k.log(`[NotificationItem TouchEnd] Threshold not met for ${t.id}. Animating back.`),g(0)):p!==0&&g(0)},[p,_,m]),M=y.useCallback(()=>{k.debug(`[NotificationItem TouchCancel] Cancelled for ${t.id}. Resetting.`),w(!1),g(0),l.current=null,c.current=null,h.current=!1,f.current=!1},[]),z=()=>{!f.current&&s&&!o&&!v?(C(N=>!N),k.debug(`[NotificationItem Click] Toggled menu for ${t.id}. New state: ${!E}`)):k.debug(`[NotificationItem Click] Click ignored. didSwipeRef=${f.current}, isUnread=${s}, isProcessing=${o}, isAnimatingOut=${v}`),f.current=!1},R=N=>{N.stopPropagation(),s&&!o&&!v&&(k.log(`[NotificationItem MenuClick] Mark as read clicked for ${t.id}`),C(!1),_("menu"))};y.useEffect(()=>{const N=B=>{a.current&&!a.current.contains(B.target)&&E&&(k.debug(`[NotificationItem ClickOutside] Closing menu for ${t.id}`),C(!1))};return E?(document.addEventListener("mousedown",N),k.debug(`[NotificationItem Effect] Added click outside listener for ${t.id}`)):document.removeEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[E]);const I=()=>{v&&(k.log(`[NotificationItem AnimationEnd] Animation ended for ${t.id}. Hiding element.`),S(!0))},$=y.useMemo(()=>{try{const N=Me.utc(t.createdAt).local();return N.isValid()?N.format("D MMMM YYYY, HH:mm"):"Неверная дата"}catch(N){return k.error(`[NotificationItem] Error formatting date ${t.createdAt}:`,N),"Ошибка даты"}},[t.createdAt]),D=y.useMemo(()=>B9(t.content),[t.content]),F=y.useMemo(()=>V9(t.title),[t.title]);if(b)return null;const T={transform:`translateX(${p}px)`,transition:m?"none":"transform 0.2s ease-out","--swipe-translate-x":`${p}px`},O=s?Math.min(1,Math.abs(p)/ab):0;return d.jsxs("div",{ref:a,className:U("relative w-full bg-card",v&&"animate-slide-collapse-fade-out","overflow-hidden"),onTouchStart:P,onTouchMove:L,onTouchEnd:j,onTouchCancel:M,onAnimationEnd:I,style:T,children:[s&&d.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pr-4 bg-green-600 pointer-events-none",style:{width:`${Math.abs(p)}px`,opacity:O},"aria-hidden":"true",children:Math.abs(p)>=ab*.8&&d.jsx(Du,{className:"h-5 w-5 text-white"})}),d.jsxs("div",{className:U("relative flex items-start p-4 space-x-3 transition-colors w-full text-left bg-card",o&&"opacity-70 pointer-events-none",s&&!m&&!v&&"cursor-pointer hover:bg-muted/30"),onClick:z,"aria-label":`Уведомление "${t.title}"`,children:[d.jsx("div",{className:"flex-shrink-0 pt-1 w-6 h-6 flex items-center justify-center",children:o?d.jsx(Ee,{size:"sm"}):s?d.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 mt-1",title:"Непрочитано"}):d.jsx(Lk,{className:"h-4 w-4 text-blue-600 dark:text-blue-500 opacity-80"})}),d.jsxs("div",{className:"flex-grow space-y-1",children:[d.jsxs("div",{className:"flex justify-between items-baseline",children:[d.jsxs("h4",{className:U("text-sm font-semibold leading-snug",s&&!o&&"font-bold"),children:[" ",F," "]}),d.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-2 whitespace-nowrap",children:[" ",$," "]})]}),d.jsxs("div",{className:U("text-xs text-muted-foreground leading-snug space-y-0.5 mt-1"),children:[" ",D," "]})]}),E&&s&&!m&&!v&&d.jsx("div",{className:U("absolute z-10 w-auto min-w-[150px] rounded-md border bg-popover p-1 text-popover-foreground shadow-md","top-2 left-9"),children:d.jsxs(ke,{variant:"ghost",className:"w-full h-auto justify-start px-2 py-1.5 text-sm font-normal",onClick:R,disabled:o,children:[d.jsx(Du,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Отметить прочитанным"})]})})]})]})},H9=()=>{const t=vt(),{tg:e}=Qt(),{toast:n}=_n(),{notifications:r,filterReadStatus:i,totalCount:s,unreadCount:o,isLoading:a,error:l,fetchNotifications:c,setFilter:u,resetNotifications:h}=Ci(),f=y.useRef(null),[p,g]=y.useState(!1),m=i===!1?"unread":"all";y.useEffect(()=>(k.log("[NotificationsPage] Initializing, fetching first page."),c(1,i,!1),()=>{k.log("[NotificationsPage Initial Fetch] Cleanup: Resetting notifications."),h()}),[]),y.useEffect(()=>{const E=()=>t("/profile");return e&&(e.BackButton.show(),e.onEvent("backButtonClicked",E)),()=>{e&&(e.BackButton.hide(),e.offEvent("backButtonClicked",E))}},[e,t]);const w=y.useCallback(()=>{!a&&r.length<s&&c(void 0,void 0,!0)},[a,r.length,s,c]);y.useEffect(()=>{const E=f.current;if(!E)return;const C=new IntersectionObserver(([_])=>{_.isIntersecting&&!a&&r.length<s&&(k.log("Intersection observer triggered load more history"),w())},{threshold:.1});return C.observe(E),()=>{E&&C.unobserve(E)}},[a,r.length,s,w]);const v=E=>{k.log(`[NotificationsPage] Tab changed to: ${E}`);let C=null;E==="unread"&&(C=!1),u(C)},x=async()=>{if(o===0){n({title:"Нет непрочитанных уведомлений",duration:2e3});return}g(!0),k.log("[NotificationsPage] Marking all notifications as read via API...");try{const E=await uD();if(E.isSuccess)k.log("[NotificationsPage] Mark all successful. Updating UI optimistically."),n({title:"Успешно",description:"Все уведомления отмечены как прочитанные.",variant:"success"}),Ci.setState(C=>({notifications:C.notifications.map(_=>_.readByUserAt?_:{..._,readByUserAt:new Date().toISOString()}),unreadCount:0}));else throw new Error(E.errorMessage||"Не удалось отметить все уведомления.")}catch(E){k.error("[NotificationsPage] Error marking all as read:",E),n({title:"Ошибка",description:E.message||"Произошла ошибка.",variant:"destructive"})}finally{g(!1)}},b=()=>{const E=i===!1,C=r.length===0||E&&o===0;return a&&r.length===0&&!l?d.jsx("div",{className:"flex justify-center items-center h-48",children:d.jsx(Ee,{size:"lg"})}):l&&r.length===0?d.jsx("div",{className:"p-6",children:d.jsx(gt,{message:l})}):C&&!a&&!l?d.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center text-muted-foreground p-4",children:[d.jsx(Up,{className:"w-12 h-12 mb-3",strokeWidth:1}),d.jsx("p",{children:E?"Нет непрочитанных уведомлений.":"У вас пока нет уведомлений."})]}):d.jsxs("div",{className:"divide-y divide-border/60",children:[r.map(_=>d.jsx(U9,{notification:_,currentFilter:i},_.id)),d.jsx("div",{ref:f,style:{height:"10px"},"aria-hidden":"true"}),a&&r.length>0&&r.length<s&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ee,{size:"sm"})})]})},S=o>0&&!p&&!a;return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs(St,{className:"flex-shrink-0 shadow-sm border rounded-lg",children:[d.jsx(mr,{className:"pb-3 pt-4",children:d.jsxs("div",{className:"flex justify-between items-center h-8",children:[d.jsx("div",{className:"w-8 flex-shrink-0"}),d.jsx(Vr,{className:"text-lg font-semibold text-center flex-grow mx-2",children:"Уведомления"}),d.jsxs(ke,{variant:"ghost",size:"sm",className:U("h-7 px-2 text-xs disabled:opacity-50 flex-shrink-0",S?"text-primary hover:text-primary/80 hover:bg-primary/10":"text-muted-foreground pointer-events-none"),onClick:x,disabled:!S,title:S?"Отметить все как прочитанные":"Нет непрочитанных уведомлений",children:[p?d.jsx(Ee,{size:"sm"}):d.jsx(Lk,{className:"h-4 w-4 mr-1"}),"Прочитать все"]})]})}),d.jsx(Xt,{className:"pt-2 pb-3",children:d.jsx(rh,{value:m,onValueChange:v,className:"w-full",children:d.jsxs(Wl,{className:"grid w-full grid-cols-2 h-9 bg-muted p-1 rounded-lg",children:[d.jsx(_t,{value:"all",className:U("text-sm h-full rounded-md px-3 transition-all",m==="all"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground/80 data-[state=inactive]:hover:text-foreground/80"),children:" Лента "}),d.jsx(_t,{value:"unread",className:U("text-sm h-full rounded-md px-3 transition-all",m==="unread"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground/80 data-[state=inactive]:hover:text-foreground/80"),children:" Непрочитанные "})]})})})]}),d.jsxs(St,{className:"shadow-sm border rounded-lg overflow-hidden flex flex-col flex-grow",children:[d.jsx(Xt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar min-h-0",children:b()}),!a&&r.length>0&&i===null&&d.jsxs("div",{className:"text-xs text-center text-muted-foreground p-2 border-t",children:["Всего уведомлений: ",s]})]})]})},W9=()=>{const{unreadCount:t,notificationsEnabled:e}=Ci(u=>({unreadCount:u.unreadCount,notificationsEnabled:u.notificationsEnabled})),n=[{to:"/portfolio",label:"Мои счета",Icon:gO,hasBadge:!0},{to:"/market",label:"Биржа",Icon:cO},{to:"/top10",label:"Топ 10",Icon:pO},{to:"/profile",label:"Профиль",Icon:GL}],r=()=>U("relative flex flex-col items-center justify-center flex-1 h-full group transition-all duration-200 ease-in-out","pt-1 p-1","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-md"),i=()=>" text-primary",s=()=>"text-muted-foreground hover:text-foreground/90",o="bg-primary/10 dark:bg-primary/15 rounded-lg",a=({isActive:u})=>U("h-5 w-5 mb-0.5 transition-transform duration-150",u?"scale-105":"scale-100 opacity-80 group-hover:opacity-100"),l=({isActive:u})=>U("text-[11px] leading-tight block",u?"font-semibold":"font-normal"),c=d.jsx("div",{className:U("absolute inset-x-1.5 bottom-1 h-[3px] rounded-full bg-primary")});return d.jsx("nav",{className:U("fixed bottom-0 left-0 right-0 h-16 bg-background/95 backdrop-blur-sm border-t border-border/50 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] dark:shadow-[0_-2px_10px_rgba(0,0,0,0.2)]","flex justify-around items-stretch","px-1","safe-padding-bottom z-50"),style:{paddingBottom:"env(safe-area-inset-bottom)"},children:n.map(({to:u,label:h,Icon:f,hasBadge:p})=>d.jsx(sR,{to:u,end:u==="/portfolio",children:({isActive:g})=>d.jsx("div",{className:U(r(),g?i():s()),children:d.jsxs("div",{className:U("relative flex flex-col items-center justify-center w-full h-full",g&&o),children:[p&&e&&d.jsx(eC,{count:t,positionClasses:"absolute top-0.5 right-1.5 transform translate-x-1/2 -translate-y-1/2"}),d.jsx(f,{className:a({isActive:g}),strokeWidth:g?2.25:1.75}),d.jsx("span",{className:l({isActive:g}),children:h}),g&&c]})})},u))})};var Qv="ToastProvider",[Jv,q9,Y9]=Pd("Toast"),[nA,K8]=Ft("Toast",[Y9]),[K9,lh]=nA(Qv),rA=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=y.useState(null),[c,u]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qv}\`. Expected non-empty \`string\`.`),d.jsx(Jv.Provider,{scope:e,children:d.jsx(K9,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>u(p=>p+1),[]),onToastRemove:y.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};rA.displayName=Qv;var iA="ToastViewport",G9=["F8"],_m="toast.viewportPause",Tm="toast.viewportResume",sA=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=G9,label:i="Notifications ({hotkey})",...s}=t,o=lh(iA,n),a=q9(n),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=Pe(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;y.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),y.useEffect(()=>{const w=l.current,v=h.current;if(g&&w&&v){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(_m);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Tm);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!w.contains(C.relatedTarget)&&b()},E=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",S),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",E),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const m=y.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const S=b.ref.current,E=[S,...l8(S)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return y.useEffect(()=>{const w=h.current;if(w){const v=x=>{var E,C,_;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const P=document.activeElement,L=x.shiftKey;if(x.target===w&&L){(E=c.current)==null||E.focus();return}const z=m({tabbingDirection:L?"backwards":"forwards"}),R=z.findIndex(I=>I===P);Lf(z.slice(R+1))?x.preventDefault():L?(C=c.current)==null||C.focus():(_=u.current)==null||_.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),d.jsxs(u$,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&d.jsx(Am,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});Lf(w)}}),d.jsx(Jv.Slot,{scope:n,children:d.jsx(ue.ol,{tabIndex:-1,...s,ref:f})}),g&&d.jsx(Am,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});Lf(w)}})]})});sA.displayName=iA;var oA="ToastFocusProxy",Am=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=lh(oA,n);return d.jsx(Fd,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});Am.displayName=oA;var ch="Toast",Z9="toast.swipeStart",X9="toast.swipeMove",Q9="toast.swipeCancel",J9="toast.swipeEnd",aA=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=Nn({prop:r,defaultProp:i,onChange:s});return d.jsx(Ur,{present:n||a,children:d.jsx(n8,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ot(t.onPause),onResume:Ot(t.onResume),onSwipeStart:de(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:de(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});aA.displayName=ch;var[e8,t8]=nA(ch,{onClose(){}}),n8=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=lh(ch,n),[w,v]=y.useState(null),x=Pe(e,I=>v(I)),b=y.useRef(null),S=y.useRef(null),E=i||m.duration,C=y.useRef(0),_=y.useRef(E),P=y.useRef(0),{onToastAdd:L,onToastRemove:j}=m,M=Ot(()=>{var $;(w==null?void 0:w.contains(document.activeElement))&&(($=m.viewport)==null||$.focus()),o()}),z=y.useCallback(I=>{!I||I===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(M,I))},[M]);y.useEffect(()=>{const I=m.viewport;if(I){const $=()=>{z(_.current),c==null||c()},D=()=>{const F=new Date().getTime()-C.current;_.current=_.current-F,window.clearTimeout(P.current),l==null||l()};return I.addEventListener(_m,D),I.addEventListener(Tm,$),()=>{I.removeEventListener(_m,D),I.removeEventListener(Tm,$)}}},[m.viewport,E,l,c,z]),y.useEffect(()=>{s&&!m.isClosePausedRef.current&&z(E)},[s,E,m.isClosePausedRef,z]),y.useEffect(()=>(L(),()=>j()),[L,j]);const R=y.useMemo(()=>w?pA(w):null,[w]);return m.viewport?d.jsxs(d.Fragment,{children:[R&&d.jsx(r8,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),d.jsx(e8,{scope:n,onClose:M,children:ms.createPortal(d.jsx(Jv.ItemSlot,{scope:n,children:d.jsx(c$,{asChild:!0,onEscapeKeyDown:de(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:de(t.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:de(t.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:de(t.onPointerMove,I=>{if(!b.current)return;const $=I.clientX-b.current.x,D=I.clientY-b.current.y,F=!!S.current,T=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,N=T?O(0,$):0,B=T?0:O(0,D),Q=I.pointerType==="touch"?10:2,A={x:N,y:B},J={originalEvent:I,delta:A};F?(S.current=A,Rc(X9,h,J,{discrete:!1})):cb(A,m.swipeDirection,Q)?(S.current=A,Rc(Z9,u,J,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs($)>Q||Math.abs(D)>Q)&&(b.current=null)}),onPointerUp:de(t.onPointerUp,I=>{const $=S.current,D=I.target;if(D.hasPointerCapture(I.pointerId)&&D.releasePointerCapture(I.pointerId),S.current=null,b.current=null,$){const F=I.currentTarget,T={originalEvent:I,delta:$};cb($,m.swipeDirection,m.swipeThreshold)?Rc(J9,p,T,{discrete:!0}):Rc(Q9,f,T,{discrete:!0}),F.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),r8=t=>{const{__scopeToast:e,children:n,...r}=t,i=lh(ch,e),[s,o]=y.useState(!1),[a,l]=y.useState(!1);return o8(()=>o(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:d.jsx($d,{asChild:!0,children:d.jsx(Fd,{...r,children:s&&d.jsxs(d.Fragment,{children:[i.label," ",n]})})})},i8="ToastTitle",lA=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ue.div,{...r,ref:e})});lA.displayName=i8;var s8="ToastDescription",cA=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ue.div,{...r,ref:e})});cA.displayName=s8;var uA="ToastAction",dA=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?d.jsx(fA,{altText:n,asChild:!0,children:d.jsx(ey,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${uA}\`. Expected non-empty \`string\`.`),null)});dA.displayName=uA;var hA="ToastClose",ey=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=t8(hA,n);return d.jsx(fA,{asChild:!0,children:d.jsx(ue.button,{type:"button",...r,ref:e,onClick:de(t.onClick,i.onClose)})})});ey.displayName=hA;var fA=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return d.jsx(ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function pA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),a8(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...pA(r))}}),e}function Rc(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?iC(i,s):i.dispatchEvent(s)}var cb=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function o8(t=()=>{}){const e=Ot(t);ht(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function a8(t){return t.nodeType===t.ELEMENT_NODE}function l8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Lf(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var c8=rA,mA=sA,gA=aA,vA=lA,yA=cA,xA=dA,wA=ey;const u8=c8,bA=y.forwardRef(({className:t,...e},n)=>d.jsx(mA,{ref:n,className:U("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));bA.displayName=mA.displayName;const d8=Td("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",success:"success group border-success bg-success text-success-foreground"}},defaultVariants:{variant:"default"}}),SA=y.forwardRef(({className:t,variant:e,...n},r)=>d.jsx(gA,{ref:r,className:U(d8({variant:e}),t),...n}));SA.displayName=gA.displayName;const h8=y.forwardRef(({className:t,...e},n)=>d.jsx(xA,{ref:n,className:U("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive group-[.success]:border-muted/40 group-[.success]:hover:border-success/30 group-[.success]:hover:bg-success group-[.success]:hover:text-success-foreground group-[.success]:focus:ring-success",t),...e}));h8.displayName=xA.displayName;const kA=y.forwardRef(({className:t,...e},n)=>d.jsx(wA,{ref:n,className:U("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 group-[.success]:text-green-300 group-[.success]:hover:text-green-50 group-[.success]:focus:ring-green-400 group-[.success]:focus:ring-offset-green-600",t),"toast-close":"",...e,children:d.jsx(Ed,{className:"h-4 w-4"})}));kA.displayName=wA.displayName;const CA=y.forwardRef(({className:t,...e},n)=>d.jsx(vA,{ref:n,className:U("text-sm font-semibold",t),...e}));CA.displayName=vA.displayName;const EA=y.forwardRef(({className:t,...e},n)=>d.jsx(yA,{ref:n,className:U("text-sm opacity-90",t),...e}));EA.displayName=yA.displayName;function f8(){const{toasts:t,dismiss:e}=_n();return d.jsxs(u8,{children:[t.map(function({id:n,title:r,description:i,action:s,...o}){return d.jsxs(SA,{...o,onClick:()=>e(n),className:"cursor-pointer",children:[d.jsxs("div",{className:"grid gap-1",children:[r&&d.jsx(CA,{children:r}),i&&d.jsx(EA,{children:i})]}),s,d.jsx(kA,{})]},n)}),d.jsx(bA,{})]})}const p8=()=>{const{tg:t}=Qt(),e=jo(r=>r.preference),n=()=>{const r=jo.getState().preference,i=(t==null?void 0:t.colorScheme)??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let s;r==="light"?s="light":r==="dark"?s="dark":s=i,k.log(`[ThemeManager Apply] Applying effective theme: ${s} (Preference: ${r}, TG/System: ${i})`),s==="dark"?(document.documentElement.classList.add("dark"),document.documentElement.style.colorScheme="dark"):(document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light")};return y.useEffect(()=>{if(!t){k.warn("[ThemeManager] Telegram SDK not ready on mount. Initial theme relies on script/system.");return}return t.onEvent("themeChanged",n),k.log("[ThemeManager] Subscribed to Telegram themeChanged event."),n(),()=>{t&&(t.offEvent("themeChanged",n),k.log("[ThemeManager] Unsubscribed from Telegram themeChanged event."))}},[t]),y.useEffect(()=>{k.log(`[ThemeManager Preference Effect] Preference changed to: ${e}`),n()},[e]),null};class m8 extends y.Component{constructor(){super(...arguments);ty(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error in ErrorBoundary:",n,r),this.setState({error:n,errorInfo:r})}render(){var n;return this.state.hasError?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",children:[d.jsx("h1",{className:"text-xl font-semibold text-destructive mb-4",children:"Что-то пошло не так..."}),d.jsx("p",{className:"text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10",children:((n=this.state.error)==null?void 0:n.message)||"Произошла ошибка рендеринга приложения."}),!1,d.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Перезагрузить страницу"})]}):this.props.children}}const ub=({children:t})=>{const{isAdminAuthenticated:e,isLoading:n}=er(),{isAuthenticated:r,isLoading:i,jwt:s}=Mt(),o=vn();if(n||i)return k.log("[AdminGuard Simple] Waiting for auth states to load..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})});if(!r||!e||!s){k.log("[AdminGuard Simple] Access denied. Redirecting.",{isUserAuthenticated:r,isAdminAuthenticated:e,hasJwt:!!s});const a=r?"/admin/login":"/login";return d.jsx(gi,{to:a,state:{from:o},replace:!0})}return k.log("[AdminGuard Simple] Access granted to admin panel."),t},br=({children:t})=>{const{isAuthenticated:e,isLoading:n}=Mt(),{accounts:r,isLoading:i,error:s,fetchPortfolio:o,isFetching:a,hasAttemptedFetch:l}=dr(),c=vn();if(k.log(`[ProtectedRoute] Rendering for path: ${c.pathname}. AuthLoading: ${n}, PortfolioLoading: ${i}, HasAttemptedFetch: ${l}`),y.useEffect(()=>{e&&!n&&!l&&!a&&!i&&(k.log("[ProtectedRoute Portfolio Effect] Authenticated. Triggering fetchPortfolio..."),o())},[e,n,l,a,i,o]),n)return k.log("[ProtectedRoute Render] Auth state is loading..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})});if(!e)return c.pathname.startsWith("/admin")?(k.log(`[ProtectedRoute Render] User NOT authenticated on admin path ${c.pathname}. Passing through to AdminGuard.`),null):(k.log(`[ProtectedRoute Render] User NOT authenticated. Redirecting from ${c.pathname} to /login.`),d.jsx(gi,{to:"/login",state:{from:c},replace:!0}));const u=c.pathname.startsWith("/faq")||c.pathname.startsWith("/asset/")||c.pathname.startsWith("/profile")||c.pathname.startsWith("/notifications");if(!c.pathname.startsWith("/admin")&&!u){if(k.log(`[ProtectedRoute Render] User authenticated. Checking portfolio status for path: ${c.pathname}`),(a||i)&&!l)return k.log("[ProtectedRoute Render] Waiting for portfolio data (initial load)..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ee,{size:"lg"})});if(l&&s&&!s.includes("401")&&!s.includes("Unauthorized"))return k.error("[ProtectedRoute Render] Portfolio fetch error:",s),d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 text-center",children:[" ",d.jsx(gt,{message:`Ошибка загрузки данных портфеля: ${s}`})," ",d.jsx(ke,{variant:"outline",onClick:()=>o(!0),className:"mt-4",children:"Повторить"})," "]});if(l&&r===null&&!s&&!i&&!a)return k.error("[ProtectedRoute Render] Portfolio fetch attempted, no error, but accounts is still null."),d.jsx("div",{className:"p-4 text-center text-destructive",children:"Не удалось загрузить данные портфеля. Обновите страницу."});if(r!==null){if(r.length===0&&c.pathname!=="/register-initial")return k.log("[ProtectedRoute Render] No accounts found, redirecting to /register-initial"),d.jsx(gi,{to:"/register-initial",replace:!0});if(r.length>0&&c.pathname==="/register-initial")return k.log("[ProtectedRoute Render] Accounts exist, redirecting from /register-initial to /portfolio"),d.jsx(gi,{to:"/portfolio",replace:!0})}}return k.log(`[ProtectedRoute Render] All checks passed for path ${c.pathname}. Rendering children.`),t},g8=({children:t})=>{const{isAuthenticated:e,isLoading:n}=Mt();return k.log(`[GuestGuard] Rendering. AuthLoading: ${n}, IsAuthenticated: ${e}`),n?d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ee,{})}):e?d.jsx(gi,{to:"/",replace:!0}):t},v8=()=>{const t=vn(),e=y.useRef(null),n=kr.getState().resetMarketState;return k.log(`[AppLayout] Rendering for path: ${t.pathname}`),y.useEffect(()=>{const r=t.pathname;e.current==="/market"&&r!=="/market"&&!r.startsWith("/asset/")&&(k.log("[AppLayout Effect] Navigating away from Market via BottomNav/Other. Resetting Market state."),n()),e.current=r},[t.pathname]),d.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden pb-16",children:[d.jsx("main",{className:"flex-grow overflow-y-auto no-scrollbar",children:d.jsxs(IS,{children:[d.jsx(tt,{index:!0,element:d.jsx(gi,{to:"/portfolio",replace:!0})}),d.jsx(tt,{path:"/portfolio",element:d.jsx(mD,{})}),d.jsx(tt,{path:"/market",element:d.jsx(nV,{})}),d.jsx(tt,{path:"/top10",element:d.jsx(aV,{})}),d.jsx(tt,{path:"/profile",element:d.jsx(J4,{})}),d.jsx(tt,{path:"/portfolio/:accountId",element:d.jsx(QD,{})}),d.jsx(tt,{path:"*",element:d.jsx(gi,{to:"/portfolio",replace:!0})})," "]})}),d.jsx(W9,{})]})};function y8(){k.log("[App] Component rendering...");const{tg:t}=Qt(),e=Mt(o=>o.isAuthenticated),{fetchUnreadCount:n,startCountPolling:r,stopCountPolling:i,resetNotifications:s}=Ci();return y.useEffect(()=>{k.log("[App Effect] Running TG effect..."),t?(t.ready(),t.expand(),k.log("[App Effect] TG ready() and expand() called.")):k.warn("[App Effect] TG object not available yet.")},[t]),y.useEffect(()=>{e?(k.log("[App Auth Effect] User is authenticated. Fetching unread count and starting polling."),n(!0),r()):(k.log("[App Auth Effect] User is not authenticated. Stopping polling and resetting notifications."),i(),s())},[e,n,r,i,s]),k.log("[App] Returning JSX structure..."),d.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[d.jsx(p8,{}),d.jsx(f8,{}),d.jsx(m8,{children:d.jsxs(IS,{children:[d.jsx(tt,{path:"/login",element:d.jsx(g8,{children:d.jsx(a3,{})})}),d.jsx(tt,{path:"/register-initial",element:d.jsx(br,{children:d.jsx(s3,{})})}),d.jsx(tt,{path:"/asset/:id",element:d.jsx(br,{children:d.jsx(Q5,{})})}),d.jsx(tt,{path:"/asset/:id/chart",element:d.jsx(br,{children:d.jsx(F9,{})})}),d.jsx(tt,{path:"/portfolio/:accountId/operations",element:d.jsx(br,{children:d.jsx(w4,{})})}),d.jsx(tt,{path:"/notifications",element:d.jsx(br,{children:d.jsx(H9,{})})}),d.jsx(tt,{path:"/faq",element:d.jsx(br,{children:d.jsx(_V,{})})}),d.jsx(tt,{path:"/faq/:categoryId",element:d.jsx(br,{children:d.jsx(TV,{})})}),d.jsx(tt,{path:"/faq/:categoryId/:articleId",element:d.jsx(br,{children:d.jsx(m9,{})})}),d.jsx(tt,{path:"/admin/login",element:d.jsx(g9,{})}),d.jsx(tt,{path:"/admin/panel",element:d.jsx(ub,{children:d.jsx(D9,{})})}),d.jsx(tt,{path:"/admin/faq/:categoryId",element:d.jsx(ub,{children:d.jsx(z9,{})})}),d.jsx(tt,{path:"/*",element:d.jsx(br,{children:d.jsx(v8,{})})})]})})]})}const x8=({message:t})=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"sans-serif",textAlign:"center",backgroundColor:"#fef2f2",color:"#b91c1c"},children:[d.jsx(Rg,{style:{width:"48px",height:"48px",marginBottom:"16px",color:"#dc2626"}}),d.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"8px"},children:"Ошибка загрузки приложения"}),d.jsx("p",{style:{marginBottom:"16px",fontSize:"0.9rem",color:"#7f1d1d"},children:"Не удалось загрузить необходимую конфигурацию. Пожалуйста, обратитесь в поддержку или попробуйте позже."}),d.jsxs("details",{style:{fontSize:"0.75rem",color:"#991b1b",maxWidth:"90%",overflowWrap:"break-word"},children:[d.jsx("summary",{style:{cursor:"pointer",fontWeight:"500"},children:"Детали ошибки"}),d.jsx("pre",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#fee2e2",borderRadius:"4px",textAlign:"left",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"200px",overflowY:"auto"},children:t})]})]});async function w8(){var n;console.log("[index.tsx] startApp() called.");const t=document.getElementById("root");if(!t){console.error("[index.tsx] CRITICAL: Root element #root not found!"),document.body.innerHTML='<div style="color: red; padding: 20px; font-family: sans-serif; text-align: center;">Fatal Error: Root element (#root) not found in HTML. Application cannot start.</div>';return}console.log("[index.tsx] Root element found. Creating React root...");const e=Of.createRoot(t);console.log("[index.tsx] React root created.");try{console.log("[index.tsx] Initializing app config..."),await WM(),console.log("[index.tsx] App config initialized.");try{const r=ys();qM(r)}catch(r){k.error("[index.tsx] Failed to get config after initialization to update logger:",r)}k.log("[index.tsx] Configuration loaded successfully (using logger)."),k.log("[index.tsx] Initializing Telegram SDK check..."),(n=window.Telegram)!=null&&n.WebApp?(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),k.log("[index.tsx] Telegram WebApp SDK initialized.")):k.warn("[index.tsx] Telegram WebApp SDK not found."),k.log("[index.tsx] Telegram SDK check complete."),k.log("[index.tsx] Rendering React App..."),e.render(d.jsxs(tR,{children:[" ",d.jsx(y8,{})," "]})),k.log("[index.tsx] React App Rendered (or render initiated).")}catch(r){console.error("[index.tsx] CRITICAL: Failed during startApp:",r),e.render(d.jsx(x8,{message:(r==null?void 0:r.message)||"Unknown application startup error."}))}}console.log("[index.tsx] Script loaded, calling startApp()...");w8();
